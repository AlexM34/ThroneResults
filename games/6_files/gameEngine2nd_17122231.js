function d0vy(a,b){this.key=a;this.value=b}function g_h(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b===null?"":decodeURIComponent(b[1].replace(/\+/g," "))}if(typeof String.prototype.mlh!="function"){String.prototype.mlh=function(a){return this.slice(0,a.length)==a}}Number.prototype.vxn0=function(e,d){var f=Math.min.apply(Math,[e,d]),c=Math.max.apply(Math,[e,d]);return this>=f&&this<=c};Number.prototype.r_z=function(){return this.valueOf()};String.prototype.r_z=function(){return parseInt(this,this.length>1?10:16)};String.prototype.l30=function(b){try{return this.match(new RegExp(b,"g")).length}catch(a){return 0}};String.prototype._xt=function(){return this.replace(/^\s*?(\S*?)\s*$/,"$1")};String.prototype.b2q=function(){return this.replace(/^\s+|(\s+(?!\S))/mg,"")};String.prototype.r63s=function(){return this.replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\0/g,"\0").replace(/\\\\/g,"\\")};function p1m(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}String.prototype.h01=function(b,a){return this.replace(new RegExp(p1m(b),"g"),a)};String.prototype.q_fk=function(a,b){b=typeof b!="string"?""+b:b;return this.substr(0,a)+b+this.substr(a+b.length)};String.prototype.k81j=function(a){return this.indexOf(a)>-1};Array.prototype.pvq6=function(b){var a=this.length;while(a--){this[a]=+this[a]}return this};Array.prototype.k81j=function(b){var a=this.length;while(a--){if(this[a]===b){return true}}return false};Array.prototype.mwy=function(){return[].concat(this)};function sqz(b,a){b=b+"";return b.length>=a?b:new Array(a-b.length+1).join("0")+b}function $(a){return document.getElementById(a)}function hyj_(d,c){return d[0]-c[0]}function xnz_(d,c){return c[0]-d[0]}function p4hx(d,c){return c-d}function _z4s(e){var a=window.location.search,c=[],d=[];a=a.replace(/\?/g,"");c=a.split("&");for(var b=0;b<c.length;b++){d=c[b].split("=");if(d[0]==e){return d[1]}}}function cz2(a){var b=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.clientLeft||document.body.clientLeft||0;return Math.round(a.getBoundingClientRect().left+b-c)}function rlz(b){var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.clientTop||document.body.clientTop||0;return Math.round(b.getBoundingClientRect().top+a-c)}function b__b(a){return typeof a!="object"?$(a):a}function _8k0(a){return $(a).style.cursor=="pointer"}function g2r(a){xzs(a,"pointer")}function frjw(a){xzs(a,"crosshair")}function p170(a){xzs(a,"default")}function xzs(b,c){try{b__b(b).style.cursor=c}catch(a){}}function hnv(b,a){b__b(b).className="";spy(b,a)}function kws_(b,a){j9t(b,a,-1)}function spy(b,a){j9t(b,a,1)}function rkv(b,a){b=b__b(b);b.className.k81j(a)}function j9t(g,c,d){g=b__b(g);try{var a=c.split(" ");while(a.length>0){var b=a.pop()._xt();if(b){d>0?g.classList.add(b):g.classList.remove(b)}}}catch(f){if(d>0){g.className=" "+c}else{g.className=g.name.replace(new RegExp("[ ]?"+c),"")}}}var q8vq=false,__x=new mt_();function mt_(){this.serverTime=0;this.cntRequest=0;this.cntWarning=0;this.cntError=0;this.warning=function(){if(++this.cntWarning>2){this.cntWarning=0;this.error()}};this.error=function(){if(++this.cntError>=2){f0x()}};this.resetState=function(){this.cntWarning=0;this.cntError=0;gt0()};this.ok=function(){this.resetState()};this.setTime=function(a){if(this.serverTime!=a){this.serverTime=a}else{this.error()}}}function sc2f(){this.url="./ajax.php";this.parameter="";this.method="GET";this.result="TEXT";this.onSuccess=null;this.onError=function(a){__x.error()}}function snyf(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}}return false}sc2f.prototype.zbgc=function(){if(!this.url){this.onError("Error: No target url! HTTP request was stopped.");return false}if(this.method!="GET"){this.method="POST"}var b=snyf();if(!b){this.onError("Error while initializing XMLHttpRequest object.");return false}var c=this;b.onreadystatechange=a;switch(this.method){case"POST":b.open(this.method,this.url,true);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.send(this.parameter);break;default:b.open(this.method,this.url+"?"+this.parameter,true);b.setRequestHeader("Pragma","no-cache");b.setRequestHeader("Cache-Control","no-store, no-cache, must-revalidate");b.setRequestHeader("If-Modified-Since",document.lastModified);b.send();break}function a(){if(this.readyState<4){return false}else{q8vq=false;if(this.status==200||this.status==304){__x.ok();if(c.onSuccess){if(c.result=="XML"){c.onSuccess(this.responseXML)}else{c.onSuccess(this.responseText)}}}else{if(this.status>0||this.statusText){c.onError(this.status+": "+this.statusText)}else{__x.error()}}}}};function nwb(a,b){dmw0("GET",a,b)}function b0xz(a,b){dmw0("POST",a,b)}function dmw0(sendMethod,options,handler){if(q8vq){__x.warning();return false}q8vq=true;with(new sc2f()){method=sendMethod;parameter="game="+yt_+"&rc="+(++__x.cntRequest)+"&"+options;onSuccess=handler;zbgc()}}function wxn(){wg1=g_h("review")=="1";yt_=xzs1("g-id");_jtq=xzs1("g-ttl").r63s();d5h2=xzs1("g-stttm");h_n0=xzs1("g-plrs");___0=xzs1("g-hid").split("|");s_ff=(xzs1("g-ha").split("|")).pvq6();zh0=xzs1("g-pmax");q__=xzs1("g-omax");kb0=xzs1("g-c2win");mbj=xzs1("g-umaxf");x9v=xzs1("g-umaxk");_6t=xzs1("g-umaxs");z_84=xzs1("g-umaxse");r4hn=xzs1("g-al");lyw1=xzs1("g-as");j_d=xzs1("g-ap");vfz4=xzs1("g-tmax");q_kx=xzs1("cfg-useprts");_1m_=xzs1("cfg-bttlvrnt");xg64=xzs1("cfg-rdrs2");mfnf=xzs1("cfg-mp2nd");rz0_=xzs1("cfg-mp6");qvxd=xzs1("cfg-kcrt");rmw=xzs1("p-avatars").split("|");bk9x("p-avatars","");ww2m="card"+xzs1("css-crds");ntsr="cardToB_base cardToB";vh85="o_base"+xzs1("css-rdrs");wf_=xzs1("u-ismob");t0_x=xzs1("u-snd");w1dk+=rz0_?"s5,l30,l31,l36":"l33";w1dk+=","}function kkc5(){if(n1tc>=0){clearInterval(n1tc);n1tc=-1}n1tc=setInterval(w4d_,xzs1("u-ival"))}function dgkh(){var a=$("myMap");try{jsonAreas=xzs1("g-ma").replace(/\;/g,",");mapAreas=JSON.parse(jsonAreas);for(var c=0;c<mapAreas.length;++c){var b=document.createElement("area");b.setAttribute("id",mapAreas[c][0]);b.setAttribute("title",mapAreas[c][1]);b.setAttribute("shape",mapAreas[c][2]);b.setAttribute("coords",mapAreas[c][3]);a.appendChild(b)}}catch(d){alert("Unexpected error while initializing game map!")}bk9x("g-ma","")}function y4t9(){wxn();j_v();dgkh();c8m();g03m();y508(xzs1("cfg-ldtwn"));document.images.initLoading.style.display="none";$("gameField").style.display="";k9d();cbsr();if(xzs1("g-stts")!=1){cm_h()}else{if(wf_){$("chatWindow").style.position="absolute"}kkc5();v_f()?lrmm(mdmy,zj9,_8n):alert(STR.SPECTATOR)}var b="./images/cards_HSNM"+(xzs1("cfg-crds")?"_2nd":"")+".png";for(var a=0;a<h_n0;a++){var c=___0[a];if(_y9(c)){new Image().src=b.replace("HSNM",c)}}}function x3w4(){yt_=g_h("game");nwb("get=GAMEDATA&player="+g_h("player")+"&access="+g_h("access"),l_kx)}function _3hb(a){mvn=!mvn}window.onload=x3w4;window.onfocus=_3hb;window.onblur=_3hb;function j_v(){v9tf();n2d();lcb();vzd();p14();wl5();_3wv();ndh()}var hrhg;var x2_k=[];with(x2_k){push([2,2]);push([2,3]);push([2,2,3]);push([2,2,2,3]);push([2,2,3,3]);push([2,2,3,4]);push([2,2,2,3,4])}var ___0,s_ff,rmw,qtzp=navigator.userAgent.indexOf("WebKit")>0,wf_,_jtq,wg1=false,jsq_,yt_,d5h2,q_kx,_1m_,xg64,mfnf,rz0_,qvxd,h_n0,zh0,kb0,mbj,x9v,z_84,_6t,q__,vfz4,r4hn,lyw1,j_d,ww2m,ntsr,vh85,t0_x;var t7vm,d06=[];for(var j=0;j<20;j++){d06.push(0)}var w1dk="s0,s1,s2,s3,s4,l3,l7,l8,l12,l16,l23,l27,l29";var mtqb=0;var _v4m=0;var _9q5=false,_hh,k89=-1,hx_=-1,qg0=false,n_h=0,ctk=0;var ytmn=0,hzg=0;var mvn=false,n1tc=-1;var mm52="",hmf="",wh_=0,x__="",l9ng="nnn",zj9="",mdmy="",_8n="",qny="",hq2="",dqc="",x9l="",mqy="",rc__="",bky="",vdq="",r5t="",wvk6="",wwf=-1,yn_=-1,n_xv="",z7g=-1,l6p=-1,mhz=-1,c2ts=0,dsqw=-1,rxl=1,__p=0;var gtg8=[],f4z=[];for(var i=0;i<8;i++){f4z.push([])}var h86=[];var xdr=[];var cv2_=[];var hxx2=[];var chat,wgs=0,_zx=0;var zp0_,qc_,v1s=-1,knq=-1,bzm=0,cqq1=0,xqm,rf36=0,r_pg=0,j0x=[];var n2tb=new Image();n2tb.src="./images/battle.gif";var rf0j=new Image();rf0j.src="./images/window_background.gif";var gc6g=[];function n2d(){for(var a=0;a<16;a++){gc6g[a]=[]}gc6g[0][1]=vh85+" o_cover";gc6g[1][1]=vh85+" o_raid1";gc6g[2][1]=vh85+" o_raid1";gc6g[3][1]=vh85+" o_raid2";gc6g[4][1]=vh85+" o_march0";gc6g[5][1]=vh85+" o_march1";gc6g[6][1]=vh85+" o_march2";gc6g[7][1]=vh85+" o_supp1";gc6g[8][1]=vh85+" o_supp1";gc6g[9][1]=vh85+" o_supp2";gc6g[10][1]=vh85+" o_def1";gc6g[11][1]=vh85+" o_def1";gc6g[12][1]=vh85+" o_def2";gc6g[13][1]=vh85+" o_cp1";gc6g[14][1]=vh85+" o_cp1";gc6g[15][1]=vh85+" o_cp2"}var txsb="",xsbp=[];function lcb(){xsbp[3]="s00l01";xsbp[7]="s00s02l06l08l10";xsbp[8]="s00s01s02l07";xsbp[10]="s02l06l07l09l14";xsbp[12]="s02";xsbp[14]="s02s03l10l16l17l18";xsbp[16]="s03l14l18l23";xsbp[17]="l14l18l19l21";xsbp[18]="l14l16l17l21l23";xsbp[21]="l17l18l19l22l23l25";if(!rz0_){xsbp[0]="s00s10l01l02";xsbp[1]="s00s10l00l02l03l04l06";xsbp[2]="s10l00l01";xsbp[4]="s09s10l01l05l06";xsbp[5]="s09s10l04";xsbp[6]="s09l01l04l07l09l10";xsbp[9]="s09l06l10l11l13";xsbp[11]="s09l09l13";xsbp[13]="s09l09l11l15l19";xsbp[15]="s09l13";xsbp[19]="s07s08s09l13l17l21l22";xsbp[20]="s07";xsbp[22]="s08l19l21l24l25";xsbp[23]="s01s03l16l18l21l25l27";xsbp[24]="s07s08l22l25l26l28";xsbp[25]="l21l22l23l24l27l28";xsbp[26]="s06s07l24l28";xsbp[27]="s01s04l23l25l28l29";xsbp[28]="s06l24l25l26l27l29l30l31";xsbp[29]="s04l27l28";xsbp[30]="s04l28l31";xsbp[31]="s04s05s06l28l30l32";xsbp[32]="s05s06l31";xsbp[33]="s04";if(q_kx){xsbp[29]+="p03";xsbp[32]+="p04"}}else{xsbp[0]="s00s11l01l02";xsbp[1]="s00s11l00l02l03l04l06";xsbp[2]="s11l00l01";xsbp[4]="s10s11l01l05l06";xsbp[5]="s10s11l04";xsbp[6]="s10l01l04l07l09l10";xsbp[9]="s10l06l10l11l13";xsbp[11]="s10l09l13";xsbp[13]="s10l09l11l15l19";xsbp[15]="s10l13";xsbp[19]="s08s09s10l13l17l21l22";xsbp[20]="s08";xsbp[22]="s09l19l21l24l25";xsbp[23]="s01s03s04l16l18l21l25l27";xsbp[24]="s08s09l22l25l26l28";xsbp[25]="l21l22l23l24l27l28l29";xsbp[26]="s06s07s08l24l28";xsbp[27]="s04s05l23l25l29l30";xsbp[28]="s07l24l25l26l29l32l33";xsbp[29]="l25l27l28l30l31l32";xsbp[30]="s05l27l29l31";xsbp[31]="s04s05l29l30";xsbp[32]="l28l29l33l35";if(mfnf){xsbp[31]+="l32";xsbp[32]+="l31"}xsbp[33]="s07l28l32l34l35l37";xsbp[34]="s06s07l33l37";xsbp[35]="s04s06l32l33l37";xsbp[36]="s04s05";xsbp[37]="s06l33l34l35";if(q_kx){xsbp[30]+="p03";xsbp[34]+="p04"}}xsbp[r4hn+0]="s01l00l01l03l07l08";xsbp[r4hn+1]="s00s02s03s04l08l23l27";xsbp[r4hn+2]="s01s03l07l08l10l12l14";xsbp[r4hn+3]="s01s02l14l16l23";if(!rz0_){xsbp[r4hn+4]="s01s05l27l29l30l31l33";xsbp[r4hn+5]="s04s06s07l31l32";xsbp[r4hn+6]="s05s07l26l28l31l32";xsbp[r4hn+7]="s05s06s08s09l19l20l24l26";xsbp[r4hn+8]="s07l19l22l24";xsbp[r4hn+9]="s07s10l04l05l06l09l11l13l15l19";xsbp[r4hn+10]="s09l00l01l02l04l05";if(q_kx){xsbp[r4hn+4]+="p03";xsbp[r4hn+5]+="p04";xsbp[r4hn+7]+="p05p06";xsbp[r4hn+9]+="p07"}}else{xsbp[r4hn+1]="s00s02s03s04l08l23";xsbp[r4hn+4]="s01s05s06l23l27l31l35l36";xsbp[r4hn+5]="s04l27l30l31l36";xsbp[r4hn+6]="s04s07s08l26l34l35l37";xsbp[r4hn+7]="s06l26l28l33l34";xsbp[r4hn+8]="s06s09s10l19l20l24l26";xsbp[r4hn+9]="s08l19l22l24";xsbp[r4hn+10]="s08s11l04l05l06l09l11l13l15l19";xsbp[r4hn+11]="s10l00l01l02l04l05";if(q_kx){xsbp[r4hn+5]+="p03";xsbp[r4hn+6]+="p04";xsbp[r4hn+8]+="p05p06";xsbp[r4hn+10]+="p07"}}if(q_kx){xsbp[1]+="p00";xsbp[4]+="p07";xsbp[12]+="p01";xsbp[16]+="p02";xsbp[20]+="p06";xsbp[26]+="p05";xsbp[r4hn+0]+="p00";xsbp[r4hn+2]+="p01";xsbp[r4hn+3]+="p02";xsbp[r4hn+lyw1+0]="s00l01";xsbp[r4hn+lyw1+1]="s02l12";xsbp[r4hn+lyw1+2]="s03l16";if(!rz0_){xsbp[r4hn+lyw1+3]="s04l29";xsbp[r4hn+lyw1+4]="s05l31";xsbp[r4hn+lyw1+5]="s07l26";xsbp[r4hn+lyw1+6]="s07l20";xsbp[r4hn+lyw1+7]="s09l04"}else{xsbp[r4hn+lyw1+3]="s05l30";xsbp[r4hn+lyw1+4]="s06l34";xsbp[r4hn+lyw1+5]="s08l26";xsbp[r4hn+lyw1+6]="s08l20";xsbp[r4hn+lyw1+7]="s10l04"}}}var sr63=[],f878=[],rvqs=[],p4jb=[];function vzd(){var e=h_n0==6?6:5,f=mbj*e,a=x9v*e,d=z_84*e,b=_6t*e;for(var c=0;c<f;c++){sr63[c]=[];sr63[c][0]=false;sr63[c][6]=true;sr63[c][2]=-1;if(c<mbj){sr63[c][1]="u_base u_map u_FMB";sr63[c][3]="BFM"+c;sr63[c][4]="B"}else{if(c<mbj*2){sr63[c][1]="u_base u_map u_FML";sr63[c][3]="LFM"+c;sr63[c][4]="L"}else{if(c<mbj*3){sr63[c][1]="u_base u_map u_FMS";sr63[c][3]="SFM"+c;sr63[c][4]="S"}else{if(c<mbj*4){sr63[c][1]="u_base u_map u_FMT";sr63[c][3]="TFM"+c;sr63[c][4]="T"}else{if(c<mbj*5){sr63[c][1]="u_base u_map u_FMG";sr63[c][3]="GFM"+c;sr63[c][4]="G"}else{sr63[c][1]="u_base u_map u_FMM";sr63[c][3]="MFM"+c;sr63[c][4]="M"}}}}}}for(c=0;c<a;c++){f878[c]=[];f878[c][0]=false;f878[c][6]=true;f878[c][2]=-1;if(c<x9v){f878[c][1]="u_base u_map u_KTB";f878[c][3]="BKT"+c;f878[c][4]="B"}else{if(c<x9v*2){f878[c][1]="u_base u_map u_KTL";f878[c][3]="LKT"+c;f878[c][4]="L"}else{if(c<x9v*3){f878[c][1]="u_base u_map u_KTS";f878[c][3]="SKT"+c;f878[c][4]="S"}else{if(c<x9v*4){f878[c][1]="u_base u_map u_KTT";f878[c][3]="TKT"+c;f878[c][4]="T"}else{if(c<x9v*5){f878[c][1]="u_base u_map u_KTG";f878[c][3]="GKT"+c;f878[c][4]="G"}else{f878[c][1]="u_base u_map u_KTM";f878[c][3]="MKT"+c;f878[c][4]="M"}}}}}}for(c=0;c<d;c++){rvqs[c]=[];rvqs[c][0]=false;rvqs[c][6]=true;rvqs[c][2]=-1;if(c<z_84){rvqs[c][1]="u_base u_map u_SEB";rvqs[c][3]="BSE"+c;rvqs[c][4]="B"}else{if(c<z_84*2){rvqs[c][1]="u_base u_map u_SEL";rvqs[c][3]="LSE"+c;rvqs[c][4]="L"}else{if(c<z_84*3){rvqs[c][1]="u_base u_map u_SES";rvqs[c][3]="SSE"+c;rvqs[c][4]="S"}else{if(c<z_84*4){rvqs[c][1]="u_base u_map u_SET";rvqs[c][3]="TSE"+c;rvqs[c][4]="T"}else{if(c<z_84*5){rvqs[c][1]="u_base u_map u_SEG";rvqs[c][3]="GSE"+c;rvqs[c][4]="G"}else{rvqs[c][1]="u_base u_map u_SEM";rvqs[c][3]="MSE"+c;rvqs[c][4]="M"}}}}}}for(c=0;c<b;c++){p4jb[c]=[];p4jb[c][0]=false;p4jb[c][6]=true;p4jb[c][2]=-1;if(c<_6t){p4jb[c][1]="u_base u_map u_SPB";p4jb[c][3]="BSP"+c;p4jb[c][4]="B"}else{if(c<_6t*2){p4jb[c][1]="u_base u_map u_SPL";p4jb[c][3]="LSP"+c;p4jb[c][4]="L"}else{if(c<_6t*3){p4jb[c][1]="u_base u_map u_SPS";p4jb[c][3]="SSP"+c;p4jb[c][4]="S"}else{if(c<_6t*4){p4jb[c][1]="u_base u_map u_SPT";p4jb[c][3]="TSP"+c;p4jb[c][4]="T"}else{if(c<_6t*5){p4jb[c][1]="u_base u_map u_SPG";p4jb[c][3]="GSP"+c;p4jb[c][4]="G"}else{p4jb[c][1]="u_base u_map u_SPM";p4jb[c][3]="MSP"+c;p4jb[c][4]="M"}}}}}}}function sc7(){wvk6="";for(var a=0;a<20;a++){d06[a]=0}mtqb=0;_hh=null;n_h=0;ctk=0}function v9tf(){var a=$("WesterosMapImg");if(!wg1){cvi_map.add(a,{opacity:25})}}var f2l=[];function p14(){for(var a=0;a<lyw1;a++){f2l[a]=[];switch(a){case 0:f2l[a][0]=65;f2l[a][1]=270;f2l[a][2]=45;f2l[a][3]=270;f2l[a][4]=25;f2l[a][5]=270;f2l[a][6]=85;f2l[a][7]=270;break;case 1:if(!rz0_){f2l[a][0]=55;f2l[a][1]=1030;f2l[a][2]=35;f2l[a][3]=1030;f2l[a][4]=75;f2l[a][5]=1030;f2l[a][6]=15;f2l[a][7]=1030}else{f2l[a][0]=21;f2l[a][1]=584;f2l[a][2]=38;f2l[a][3]=584;f2l[a][4]=55;f2l[a][5]=584;f2l[a][6]=4;f2l[a][7]=584}break;case 2:f2l[a][0]=45;f2l[a][1]=661;f2l[a][2]=62;f2l[a][3]=661;f2l[a][4]=53;f2l[a][5]=627;f2l[a][6]=70;f2l[a][7]=627;break;case 3:f2l[a][0]=70;f2l[a][1]=805;f2l[a][2]=90;f2l[a][3]=795;f2l[a][4]=110;f2l[a][5]=785;f2l[a][6]=50;f2l[a][7]=815;break;case 4:if(!rz0_){f2l[a][0]=50;f2l[a][1]=1245;f2l[a][2]=30;f2l[a][3]=1245;f2l[a][4]=70;f2l[a][5]=1245;f2l[a][6]=10;f2l[a][7]=1245}else{f2l[a][0]=80;f2l[a][1]=1375;f2l[a][2]=100;f2l[a][3]=1375;f2l[a][4]=120;f2l[a][5]=1375;f2l[a][6]=60;f2l[a][7]=1375}break;case 5:if(!rz0_){f2l[a][0]=570;f2l[a][1]=1350;f2l[a][2]=590;f2l[a][3]=1350;f2l[a][4]=610;f2l[a][5]=1350;f2l[a][6]=630;f2l[a][7]=1350}else{f2l[a][0]=55;f2l[a][1]=1220;f2l[a][2]=75;f2l[a][3]=1245;f2l[a][4]=35;f2l[a][5]=1200;f2l[a][6]=55;f2l[a][7]=1180}break;case 6:if(!rz0_){f2l[a][0]=519;f2l[a][1]=1185;f2l[a][2]=499;f2l[a][3]=1175;f2l[a][4]=539;f2l[a][5]=1195;f2l[a][6]=479;f2l[a][7]=1165}else{f2l[a][0]=565;f2l[a][1]=1345;f2l[a][2]=585;f2l[a][3]=1345;f2l[a][4]=605;f2l[a][5]=1345;f2l[a][6]=625;f2l[a][7]=1345}break;case 7:if(!rz0_){f2l[a][0]=682;f2l[a][1]=1050;f2l[a][2]=665;f2l[a][3]=1050;f2l[a][4]=699;f2l[a][5]=1050;f2l[a][6]=648;f2l[a][7]=1050}else{f2l[a][0]=509;f2l[a][1]=1185;f2l[a][2]=489;f2l[a][3]=1175;f2l[a][4]=529;f2l[a][5]=1195;f2l[a][6]=469;f2l[a][7]=1165}break;case 8:if(!rz0_){f2l[a][0]=541;f2l[a][1]=894;f2l[a][2]=524;f2l[a][3]=894;f2l[a][4]=558;f2l[a][5]=894;f2l[a][6]=531;f2l[a][7]=861}else{f2l[a][0]=682;f2l[a][1]=1068;f2l[a][2]=665;f2l[a][3]=1068;f2l[a][4]=699;f2l[a][5]=1068;f2l[a][6]=648;f2l[a][7]=1068}break;case 9:if(!rz0_){f2l[a][0]=630;f2l[a][1]=535;f2l[a][2]=650;f2l[a][3]=535;f2l[a][4]=670;f2l[a][5]=535;f2l[a][6]=690;f2l[a][7]=535}else{f2l[a][0]=541;f2l[a][1]=894;f2l[a][2]=524;f2l[a][3]=894;f2l[a][4]=558;f2l[a][5]=894;f2l[a][6]=531;f2l[a][7]=861}break;case 10:if(!rz0_){f2l[a][0]=640;f2l[a][1]=390;f2l[a][2]=620;f2l[a][3]=390;f2l[a][4]=660;f2l[a][5]=390;f2l[a][6]=680;f2l[a][7]=390}else{f2l[a][0]=630;f2l[a][1]=535;f2l[a][2]=650;f2l[a][3]=535;f2l[a][4]=670;f2l[a][5]=535;f2l[a][6]=690;f2l[a][7]=535}break;case 11:f2l[a][0]=640;f2l[a][1]=390;f2l[a][2]=620;f2l[a][3]=390;f2l[a][4]=660;f2l[a][5]=390;f2l[a][6]=680;f2l[a][7]=390;break;default:break}}}var brg=[];function wl5(){if(!q_kx){return}for(i=0;i<j_d;i++){brg[i]=[]}brg[0][0]=268;brg[0][1]=189;brg[0][2]=251;brg[0][3]=189;brg[0][4]=285;brg[0][5]=189;brg[1][0]=65;brg[1][1]=732;brg[1][2]=48;brg[1][3]=732;brg[1][4]=82;brg[1][5]=732;brg[2][0]=95;brg[2][1]=882;brg[2][2]=112;brg[2][3]=882;brg[2][4]=78;brg[2][5]=882;brg[3][0]=103;brg[3][1]=1130;brg[3][2]=85;brg[3][3]=1130;brg[3][4]=120;brg[3][5]=1130;brg[4][0]=633;brg[4][1]=1275;brg[4][2]=616;brg[4][3]=1275;brg[4][4]=650;brg[4][5]=1275;brg[5][0]=594;brg[5][1]=1071;brg[5][2]=577;brg[5][3]=1071;brg[5][4]=611;brg[5][5]=1071;brg[6][0]=637;brg[6][1]=951;brg[6][2]=620;brg[6][3]=951;brg[6][4]=654;brg[6][5]=951;brg[7][0]=420;brg[7][1]=534;brg[7][2]=403;brg[7][3]=534;brg[7][4]=437;brg[7][5]=534}var _m_h=[];function _3wv(){for(var a=0;a<r4hn;a++){_m_h[a]=[];switch(a){case 0:_m_h[a][0]=450;_m_h[a][1]=120;_m_h[a][2]=421;_m_h[a][3]=120;_m_h[a][4]=479;_m_h[a][5]=120;_m_h[a][6]=392;_m_h[a][7]=120;break;case 1:_m_h[a][0]=362;_m_h[a][1]=335;_m_h[a][2]=332;_m_h[a][3]=335;_m_h[a][4]=320;_m_h[a][5]=375;_m_h[a][6]=290;_m_h[a][7]=375;break;case 2:_m_h[a][0]=536;_m_h[a][1]=212;_m_h[a][2]=565;_m_h[a][3]=212;_m_h[a][4]=594;_m_h[a][5]=212;_m_h[a][6]=507;_m_h[a][7]=212;break;case 3:_m_h[a][0]=150;_m_h[a][1]=400;_m_h[a][2]=180;_m_h[a][3]=400;_m_h[a][4]=120;_m_h[a][5]=400;_m_h[a][6]=166;_m_h[a][7]=435;break;case 4:_m_h[a][0]=420;_m_h[a][1]=421;_m_h[a][2]=390;_m_h[a][3]=421;_m_h[a][4]=405;_m_h[a][5]=385;_m_h[a][6]=435;_m_h[a][7]=385;break;case 5:_m_h[a][0]=465;_m_h[a][1]=435;_m_h[a][2]=465;_m_h[a][3]=471;_m_h[a][4]=488;_m_h[a][5]=403;_m_h[a][6]=518;_m_h[a][7]=403;break;case 6:_m_h[a][0]=300;_m_h[a][1]=497;_m_h[a][2]=330;_m_h[a][3]=497;_m_h[a][4]=300;_m_h[a][5]=534;_m_h[a][6]=270;_m_h[a][7]=534;break;case 7:_m_h[a][0]=190;_m_h[a][1]=543;_m_h[a][2]=220;_m_h[a][3]=543;_m_h[a][4]=205;_m_h[a][5]=506;_m_h[a][6]=235;_m_h[a][7]=506;break;case 8:_m_h[a][0]=118;_m_h[a][1]=571;_m_h[a][2]=131;_m_h[a][3]=535;_m_h[a][4]=86;_m_h[a][5]=571;_m_h[a][6]=101;_m_h[a][7]=535;break;case 9:_m_h[a][0]=342;_m_h[a][1]=616;_m_h[a][2]=372;_m_h[a][3]=616;_m_h[a][4]=312;_m_h[a][5]=616;_m_h[a][6]=342;_m_h[a][7]=653;break;case 10:_m_h[a][0]=275;_m_h[a][1]=650;_m_h[a][2]=245;_m_h[a][3]=650;_m_h[a][4]=245;_m_h[a][5]=610;_m_h[a][6]=215;_m_h[a][7]=580;break;case 11:_m_h[a][0]=460;_m_h[a][1]=590;_m_h[a][2]=490;_m_h[a][3]=590;_m_h[a][4]=430;_m_h[a][5]=590;_m_h[a][6]=460;_m_h[a][7]=626;break;case 12:_m_h[a][0]=120;_m_h[a][1]=670;_m_h[a][2]=150;_m_h[a][3]=690;_m_h[a][4]=120;_m_h[a][5]=707;_m_h[a][6]=90;_m_h[a][7]=690;break;case 13:_m_h[a][0]=435;_m_h[a][1]=670;_m_h[a][2]=405;_m_h[a][3]=670;_m_h[a][4]=375;_m_h[a][5]=696;_m_h[a][6]=395;_m_h[a][7]=731;break;case 14:_m_h[a][0]=275;_m_h[a][1]=729;_m_h[a][2]=305;_m_h[a][3]=729;_m_h[a][4]=335;_m_h[a][5]=729;_m_h[a][6]=258;_m_h[a][7]=763;break;case 15:_m_h[a][0]=506;_m_h[a][1]=743;_m_h[a][2]=476;_m_h[a][3]=743;_m_h[a][4]=486;_m_h[a][5]=706;_m_h[a][6]=456;_m_h[a][7]=706;break;case 16:_m_h[a][0]=170;_m_h[a][1]=840;_m_h[a][2]=202;_m_h[a][3]=840;_m_h[a][4]=170;_m_h[a][5]=877;_m_h[a][6]=202;_m_h[a][7]=803;break;case 17:_m_h[a][0]=357;_m_h[a][1]=785;_m_h[a][2]=327;_m_h[a][3]=785;_m_h[a][4]=343;_m_h[a][5]=822;_m_h[a][6]=373;_m_h[a][7]=822;break;case 18:_m_h[a][0]=293;_m_h[a][1]=858;_m_h[a][2]=262;_m_h[a][3]=858;_m_h[a][4]=262;_m_h[a][5]=895;_m_h[a][6]=293;_m_h[a][7]=821;break;case 19:_m_h[a][0]=466;_m_h[a][1]=815;_m_h[a][2]=497;_m_h[a][3]=815;_m_h[a][4]=435;_m_h[a][5]=815;_m_h[a][6]=451;_m_h[a][7]=846;break;case 20:_m_h[a][0]=630;_m_h[a][1]=845;_m_h[a][2]=660;_m_h[a][3]=845;_m_h[a][4]=630;_m_h[a][5]=882;_m_h[a][6]=660;_m_h[a][7]=882;break;case 21:_m_h[a][0]=348;_m_h[a][1]=930;_m_h[a][2]=318;_m_h[a][3]=930;_m_h[a][4]=333;_m_h[a][5]=894;_m_h[a][6]=363;_m_h[a][7]=894;break;case 22:_m_h[a][0]=450;_m_h[a][1]=951;_m_h[a][2]=480;_m_h[a][3]=951;_m_h[a][4]=420;_m_h[a][5]=951;_m_h[a][6]=420;_m_h[a][7]=914;break;case 23:_m_h[a][0]=170;_m_h[a][1]=975;_m_h[a][2]=170;_m_h[a][3]=938;_m_h[a][4]=139;_m_h[a][5]=975;_m_h[a][6]=139;_m_h[a][7]=938;break;case 24:_m_h[a][0]=448;_m_h[a][1]=1025;_m_h[a][2]=418;_m_h[a][3]=1025;_m_h[a][4]=433;_m_h[a][5]=1062;_m_h[a][6]=403;_m_h[a][7]=1062;break;case 25:_m_h[a][0]=285;_m_h[a][1]=1060;_m_h[a][2]=315;_m_h[a][3]=1060;_m_h[a][4]=255;_m_h[a][5]=1060;_m_h[a][6]=345;_m_h[a][7]=1060;break;case 26:_m_h[a][0]=483;_m_h[a][1]=1110;_m_h[a][2]=513;_m_h[a][3]=1110;_m_h[a][4]=543;_m_h[a][5]=1110;_m_h[a][6]=497;_m_h[a][7]=1073;break;case 27:_m_h[a][0]=170;_m_h[a][1]=1046;_m_h[a][2]=140;_m_h[a][3]=1029;_m_h[a][4]=200;_m_h[a][5]=1066;_m_h[a][6]=170;_m_h[a][7]=1090;break;case 28:if(!rz0_){_m_h[a][0]=302;_m_h[a][1]=1170;_m_h[a][2]=336;_m_h[a][3]=1170;_m_h[a][4]=268;_m_h[a][5]=1170;_m_h[a][6]=285;_m_h[a][7]=1135}else{_m_h[a][0]=369;_m_h[a][1]=1172;_m_h[a][2]=339;_m_h[a][3]=1172;_m_h[a][4]=355;_m_h[a][5]=1137;_m_h[a][6]=385;_m_h[a][7]=1137}break;case 29:if(!rz0_){_m_h[a][0]=162;_m_h[a][1]=1167;_m_h[a][2]=189;_m_h[a][3]=1204;_m_h[a][4]=131;_m_h[a][5]=1167;_m_h[a][6]=189;_m_h[a][7]=1241}else{_m_h[a][0]=260;_m_h[a][1]=1136;_m_h[a][2]=230;_m_h[a][3]=1136;_m_h[a][4]=290;_m_h[a][5]=1136;_m_h[a][6]=200;_m_h[a][7]=1136}break;case 30:if(!rz0_){_m_h[a][0]=285;_m_h[a][1]=1286;_m_h[a][2]=254;_m_h[a][3]=1286;_m_h[a][4]=316;_m_h[a][5]=1286;_m_h[a][6]=285;_m_h[a][7]=1249}else{_m_h[a][0]=123;_m_h[a][1]=1170;_m_h[a][2]=109;_m_h[a][3]=1205;_m_h[a][4]=137;_m_h[a][5]=1135;_m_h[a][6]=93;_m_h[a][7]=1170}break;case 31:if(!rz0_){_m_h[a][0]=405;_m_h[a][1]=1279;_m_h[a][2]=435;_m_h[a][3]=1279;_m_h[a][4]=420;_m_h[a][5]=1240;_m_h[a][6]=390;_m_h[a][7]=1240}else{_m_h[a][0]=175;_m_h[a][1]=1238;_m_h[a][2]=190;_m_h[a][3]=1203;_m_h[a][4]=205;_m_h[a][5]=1238;_m_h[a][6]=160;_m_h[a][7]=1203}break;case 32:if(!rz0_){_m_h[a][0]=527;_m_h[a][1]=1250;_m_h[a][2]=557;_m_h[a][3]=1250;_m_h[a][4]=540;_m_h[a][5]=1285;_m_h[a][6]=510;_m_h[a][7]=1285}else{_m_h[a][0]=305;_m_h[a][1]=1230;_m_h[a][2]=275;_m_h[a][3]=1230;_m_h[a][4]=290;_m_h[a][5]=1195;_m_h[a][6]=260;_m_h[a][7]=1195}break;case 33:if(!rz0_){_m_h[a][0]=80;_m_h[a][1]=1320;_m_h[a][2]=48;_m_h[a][3]=1320;_m_h[a][4]=20;_m_h[a][5]=1320;_m_h[a][6]=65;_m_h[a][7]=1285}else{_m_h[a][0]=425;_m_h[a][1]=1252;_m_h[a][2]=395;_m_h[a][3]=1252;_m_h[a][4]=410;_m_h[a][5]=1217;_m_h[a][6]=380;_m_h[a][7]=1217}break;case 34:_m_h[a][0]=530;_m_h[a][1]=1245;_m_h[a][2]=560;_m_h[a][3]=1255;_m_h[a][4]=500;_m_h[a][5]=1235;_m_h[a][6]=470;_m_h[a][7]=1235;break;case 35:_m_h[a][0]=295;_m_h[a][1]=1300;_m_h[a][2]=325;_m_h[a][3]=1300;_m_h[a][4]=265;_m_h[a][5]=1300;_m_h[a][6]=250;_m_h[a][7]=1265;break;case 36:_m_h[a][0]=72;_m_h[a][1]=1292;_m_h[a][2]=48;_m_h[a][3]=1318;_m_h[a][4]=20;_m_h[a][5]=1318;_m_h[a][6]=80;_m_h[a][7]=1325;break;case 37:_m_h[a][0]=477;_m_h[a][1]=1289;_m_h[a][2]=445;_m_h[a][3]=1289;_m_h[a][4]=412;_m_h[a][5]=1289;_m_h[a][6]=510;_m_h[a][7]=1289;break;default:break}}}var jll=[];function ndh(){var b=r4hn+lyw1+j_d+1;for(var a=0;a<b;a++){jll[a]=[]}jll[0][0]=355;jll[0][1]=91;jll[1][0]=400;jll[1][1]=245;jll[2][0]=536;jll[2][1]=262;jll[3][0]=165;jll[3][1]=315;jll[4][0]=447;jll[4][1]=365;jll[5][0]=490;jll[5][1]=435;jll[6][0]=345;jll[6][1]=470;jll[7][0]=162;jll[7][1]=488;jll[8][0]=58;jll[8][1]=533;jll[9][0]=320;jll[9][1]=575;jll[10][0]=204;jll[10][1]=628;jll[11][0]=520;jll[11][1]=575;jll[12][0]=143;jll[12][1]=648;jll[13][0]=550;jll[13][1]=640;jll[14][0]=260;jll[14][1]=695;jll[15][0]=538;jll[15][1]=722;jll[16][0]=160;jll[16][1]=766;jll[17][0]=375;jll[17][1]=795;jll[18][0]=219;jll[18][1]=903;jll[19][0]=540;jll[19][1]=795;jll[20][0]=593;jll[20][1]=860;jll[21][0]=221;jll[21][1]=958;jll[22][0]=450;jll[22][1]=890;jll[23][0]=105;jll[23][1]=955;jll[24][0]=531;jll[24][1]=960;jll[25][0]=275;jll[25][1]=990;jll[26][0]=435;jll[26][1]=1115;jll[27][0]=131;jll[27][1]=1068;if(!rz0_){jll[28][0]=225;jll[28][1]=1135;jll[29][0]=133;jll[29][1]=1235;jll[30][0]=230;jll[30][1]=1240;jll[31][0]=365;jll[31][1]=1230;jll[32][0]=475;jll[32][1]=1255;jll[33][0]=35;jll[33][1]=1300}else{jll[28][0]=385;jll[28][1]=1164;jll[29][0]=295;jll[29][1]=1115;if(q_kx){jll[30][0]=75;jll[30][1]=1195}else{jll[30][0]=90;jll[30][1]=1120}jll[31][0]=125;jll[31][1]=1245;jll[32][0]=295;jll[32][1]=1180;jll[33][0]=355;jll[33][1]=1240;jll[34][0]=590;jll[34][1]=1220;jll[35][0]=220;jll[35][1]=1300;jll[36][0]=30;jll[36][1]=1295;jll[37][0]=395;jll[37][1]=1310}jll[r4hn+0][0]=55;jll[r4hn+0][1]=200;jll[r4hn+1][0]=10;jll[r4hn+1][1]=965;jll[r4hn+2][0]=12;jll[r4hn+2][1]=625;jll[r4hn+3][0]=20;jll[r4hn+3][1]=830;jll[r4hn+4][0]=165;jll[r4hn+4][1]=1340;jll[r4hn+5][0]=455;jll[r4hn+5][1]=1370;jll[r4hn+6][0]=610;jll[r4hn+6][1]=1155;jll[r4hn+7][0]=670;jll[r4hn+7][1]=1095;jll[r4hn+8][0]=530;jll[r4hn+8][1]=851;jll[r4hn+9][0]=655;jll[r4hn+9][1]=590;jll[r4hn+10][0]=655;jll[r4hn+10][1]=295;if(rz0_){jll[r4hn+1][0]=2;jll[r4hn+1][1]=543;jll[r4hn+4][0]=180;jll[r4hn+4][1]=1335;jll[r4hn+5][0]=25;jll[r4hn+5][1]=1150;jll[r4hn+6][0]=490;jll[r4hn+6][1]=1355;jll[r4hn+7][0]=550;jll[r4hn+7][1]=1180;jll[r4hn+8][0]=670;jll[r4hn+8][1]=1020;jll[r4hn+9][0]=527;jll[r4hn+9][1]=848;jll[r4hn+10][0]=655;jll[r4hn+10][1]=590;jll[r4hn+11][0]=655;jll[r4hn+11][1]=295}if(q_kx){jll[r4hn+lyw1+0][0]=225;jll[r4hn+lyw1+0][1]=205;jll[r4hn+lyw1+1][0]=19;jll[r4hn+lyw1+1][1]=745;jll[r4hn+lyw1+2][0]=50;jll[r4hn+lyw1+2][1]=895;jll[r4hn+lyw1+3][0]=76;jll[r4hn+lyw1+3][1]=1087;jll[r4hn+lyw1+4][0]=645;jll[r4hn+lyw1+4][1]=1290;jll[r4hn+lyw1+5][0]=590;jll[r4hn+lyw1+5][1]=1027;jll[r4hn+lyw1+6][0]=652;jll[r4hn+lyw1+6][1]=930;jll[r4hn+lyw1+7][0]=440;jll[r4hn+lyw1+7][1]=526}jll[r4hn+lyw1+j_d][0]=-1000;jll[r4hn+lyw1+j_d][1]=-1000}function w2h(a){return hq2.charAt(a).r_z()}function h75(){return w2h(0)+1+(vfz4>10?xzs1("cycles")*10:0)}function fjl(){return w2h(1)}function f01s(){return w2h(2)*2}function jwk(){return w2h(3)}function d_hs(){return fjl()==0}function __0(){return fjl()==1}function myf(){return fjl()==2}function bzv4(b){try{return mdmy.substr(b*8,8)}catch(a){return"n0000000"}}function ztd(b,a){return a==0?bzv4(b).charAt(a):parseInt(bzv4(b).charAt(a))}function l9z(c,a,b){mdmy=mdmy.q_fk(c*8+a,b)}function ydx7(b,a){if(a.vxn0(0,2)){l9z(b,4,a)}}function d2d(b,a){l9z(b,0,a)}function __j7(b,a){zj9=zj9.q_fk(b*2,a)}function x8pq(a){return ztd(a,0)}function _p7k(a){return x8pq(j1zn(a))}function ynhr(a){return a<r4hn}function z_w(a){return !ynhr(a)&&!zzf(a)}function zzf(a){return a>=r4hn+lyw1}function srf(b){try{if(zzf(b)){return _p7k(b-r4hn-lyw1)}else{if(z_w(b)){return d6v8(b-r4hn)}}return x8pq(b)}catch(a){return"n"}}function l4_9(a,b){return a==kbl(b)}function kbl(f){var b=sqz(f,2);for(var c=0;c<h_n0;c++){var e=___0[c],d=q0q(e);for(var a=0;a<d.length;a+=3){if(b==d.substr(a,2)){return e}}}return"n"}function krnj(a){return ztd(a,4)}function npy(a){return krnj(a)==1}function zwp(a){return krnj(a)>1}function hkwf(a){return ztd(a,5)}function _5fv(a){return ztd(a,5)>0}function cvl(a){return ztd(a,7)}function k1py(a){return x__.substr(a*6,6)}function wdt(c,d){var b=d<4?1:2,a=k1py(c).substr(d,b);return parseInt(a,10)}function dxs(a,b){return wdt(a,b)}function _85j(a){return wdt(a,0)-1}function wm8(a){return wdt(q1tm(a),0)}function j_9(a){return wdt(q1tm(a),1)}function ndl(a){return wdt(q1tm(a),2)}function y4zj(a){return wdt(a,3)}function jn8(a){return wdt(a,4)}function ptrv(a){return zj9.substr(a*2,2)}function d6v8(a){return ptrv(a).charAt(0)}function xg_(c,e){var a=[],b=r4hn+lyw1+j_d;for(var d=0;d<b;++d){if(srf(d)==c&&(!e||cy29(d)>0)){a.push(d)}}return a}function tqz1(a){a=a?a:v_f();return a?y4zj(q1tm(a)):0}function wwp(){if(d_hs()){var a=jwk(),b=lv3();return(a==1&&b==5)||(a==2&&b==6)||(a==3&&b==14)}return false}function __h(){return d_hs()&&jwk()==1&&z7g==1}function mn5l(){return d_hs()&&jwk()==1&&z7g==2}function q89(){return d_hs()&&jwk()==2&&l6p==2}function mvxd(){return d_hs()&&jwk()==2&&(l6p==1||l6p==5)}function d0bb(){return d_hs()&&jwk()==3&&mhz==5}function shs0(){var a,c=[];for(var b=0;b<h_n0;b++){if(yh51(b)){a=parseInt(xzs1("bid"+___0[b]));c.push(a)}}return c}function _m__(){var c=shs0(),a,b=0;while(c.length>0){a=c.pop();b+=a>0?a:0}return b}function y59k(){return _m__()}function z3zr(a,b){return w_ss(a,b,2)}function sh0(a,b){return w_ss(a,b,1)}function _z_p(a,b){return w_ss(a,b,0)}function w_ss(b,c,d){var a=d==2?"_STATUS":(d==1?"_TTIP":"");if(c==3){return STR["EVT_WINTER"+a]}else{if(c==4){return STR["EVT_SUMMER"+a]}else{if(b==1){switch(c){case 0:return STR["EVT_DECK"+a]+" I";case 1:return STR["EVT_MUSTER"+a];case 2:return STR["EVT_SUPPLY"+a];case 5:return STR["EVT_BLADES"+a];default:break}}else{if(b==2){switch(c){case 0:return STR["EVT_DECK"+a]+" II";case 1:return STR["EVT_THRONES"+a];case 2:return STR["EVT_CLASH"+a];case 5:return STR["EVT_THRONES"+a];case 6:return STR["EVT_WINGS"+a];default:break}}else{if(b==3){switch(c){case 0:return STR["EVT_DECK"+a]+" III";case 5:return STR["EVT_WILDLINGS"+a];case 6:return STR["EVT_SWORDS"+a];case 7:return STR["EVT_STORMS"+a];case 8:return STR["EVT_FEAST"+a];case 9:return STR["EVT_RAINS"+a];case 10:return STR["EVT_STORMS"+a];case 11:return STR["EVT_FEAST"+a];case 12:return STR["EVT_RAINS2"+a];case 13:return STR["EVT_LIES"+a];case 14:return STR["EVT_SWORD"+a];default:break}}}}}}return"Unknown Event"}function _c7b(b,c){if(b>1&&h75()==1&&fjl()==0){return STR.EVT_SUMMER}var d=_z_p(b,c),a=[0,104,105,106,204,205,206,304,306,309,310,311,312];if(a.k81j(b*100+c)){d+='<div class="grey">'+STR.format(STR.EVT_SUB_WSTR,["+2"])+"</div>"}return d}function lv3(){switch(jwk()){case 1:return z7g;case 2:return l6p;case 3:return mhz;default:return 0}}function t3p(a){var b=["throne","sword","raven"];try{return"./images/"+b[--a]+".gif"}catch(c){return""}}function _mc(a){return"./images/house"+a+".gif"}function f8fr(a){return"./images/power"+a+".png"}function _56(c,a){var b="mini"+ww2m+" card_"+c;switch(a){case 0:return b+"_used";case 2:return b+"_select";default:return b}}function q1tm(a){try{return ___0.indexOf(a)}catch(b){return -1}}function _yjt(d,a){try{var c=a+d.r_z();return $(c).title}catch(b){return""}}function _qbx(b,a){if(a=="s"&&b<r4hn){b+=r4hn}else{if(a=="p"&&b<lyw1){b+=r4hn+lyw1}}return b}function j2n(a){if(ynhr(a)){return a}else{if(q_kx&&zzf(a)){return a-r4hn-lyw1}}return a-r4hn}function hwt3(a){if(a<r4hn){return"l"}else{if(a<r4hn+lyw1){return"s"}}return"p"}function t7rr(b,a){return _60(b,a,false,true)}function _60(s,p,h,q){var c=xsbp[s],r=c.length,o="";for(var k=0;k<r;k+=3){var b=c.charAt(k),m=c.substr(k+1,2).r_z(),l=_qbx(m,b),a=srf(l);if(!___0.k81j(a)||(!h&&a==v_f())||(h&&!h.k81j(a))){continue}var d=p24(l),e=sqz(l,2)+z70(d),g=!p;for(var n=0;!g&&n<p.length;++n){g=p[n].x1nl(d,l)}if(g){o+=e;if(q){g2r("Order"+l)}}}return o}function lf2(a,b){return zzpx(q0q(b),a)}function zzpx(b,a){return b.charAt(a*3+2)}function z70(a){if(typeof a==="number"){return a.toString(16).toUpperCase()}return a}function p24(b){var a=fjl()>2?xzs1("ordersall"):q0q(srf(b));return ww_(b,a)}function ww_(b,a){var d=sqz(b,2);for(var c=0;c<a.length;c+=3){if(d==a.substr(c,2)){return zzpx(a,c/3).r_z()}}return 0}function q0q(a){if(!a){a=v_f();if(!a){return""}}switch(a){case"B":return x9l;case"L":return mqy;case"S":return rc__;case"T":return bky;case"G":return vdq;case"M":return r5t;default:return""}}function hg_w(a,c){var d=c?c:q0q(v_f());a=z70(a);for(var b=0;b<d.length;b+=3){if(a==d.charAt(b+2)){return d.substr(b,2).r_z()}}return -1}function jtsz(a){switch(a){case 1:return 348;case 12:return 98;case 16:return 212;case 20:return 678;case 27:return 199;case 34:return 585;case 32:if(!rz0_){return 585}break;default:break}return Math.round((_m_h[a][0]+_m_h[a][2])/2)}function bdm(a){switch(a){case 1:return 224;case 12:return 649;case 16:return 776;case 20:return 825;case 27:return 1079;case 34:return 1241;case 32:if(!rz0_){return 1240}break;default:break}return Math.round((_m_h[a][1]+_m_h[a][3])/2)+5}function _0_(){for(var b=0;b<h_n0;b++){if(q0q(___0[b])=="1"){return _y_(___0[b])}}for(var b=0;b<h_n0;b++){var a=xzs1("bid"+___0[b]);if(a==cv2_[0]){return _y_(___0[b])}}return STR.HOUSE_U}function _nf_(a){return vh13(a)&&qy_(a)!=v_f()}function j8q(a){return qy_(a)==v_f()}function vh13(a){return s_ff.k81j(a)}function wsv(){return xzs1("g-cid")&&xzs1("g-cid")!=1}function gxb(){return xzs1("cfg-tbcrds")==1}function y1t9(a){return yjy()?xzs1(a+"tob"):0}function nt2(){return y1t9("attacker")}function sq1v(){return y1t9("defender")}function j1zn(b){var a=rz0_?[1,12,16,30,34,26,20,4]:[1,12,16,29,32,26,20,4];try{return a[b]}catch(c){return -1}}function hj_(b){var a=rz0_?[0,2,3,5,6,8,8,10]:[0,2,3,4,5,7,7,9];try{return a[b]}catch(c){return -1}}function x59(b){var a=rz0_?[1,12,16,30,34,26,20,4]:[1,12,16,29,32,26,20,4];return a.indexOf(b)}function qy_(d){try{var b=s_ff.indexOf(d);if(b>=0){var a=___0[b];if(_y9(a)){return a}}}catch(c){alert(c)}return"n"}function gldl(){return xzs1("cfg-dyn")}function v_f(){return xzs1("p-phs")}function wyv(b){if(q1tm(b)>=0){var a=xzs1("p-h"+b.toLowerCase());if(!a){return _y_(b)}return decodeURIComponent(a)}return""}function _y_(a){try{return STR["HOUSE_"+a]}catch(b){return STR.HOUSE_U}}function s8d(b,a){switch(b){case 0:return tj4(a);case 1:return xz80(a);case 2:return _g8(a);default:return false}}function h65(b){for(var a=0;a<h_n0;a++){if(s8d(b,___0[a])){return ___0[a]}}}function js1(){return h65(0)}function t75(){return h65(1)}function j1wf(){return h65(2)}function tj4(b){if(b){var a=l9ng.charAt(0);if(a==b||(a=="n"&&b==dv7c())){return true}}return false}function xz80(b){if(b){var a=l9ng.charAt(1);if(a==b||(a=="n"&&j_9(b)==1)){return true}}return false}function _g8(b){if(b){var a=l9ng.charAt(2);if(a==b||(a=="n"&&ndl(b)==1)){return true}}return false}function lr96(a,d){var b=d?a:q1tm(a?a:v_f());try{return xdr[b][0]}catch(c){return 0}}function _04z(a,d){var b=d?a:q1tm(a?a:v_f());try{return xdr[b][1]}catch(c){return 0}}function lz0t(a){if(a==nnlv()){return j6y0()}else{if(a==msgj()){return d0sg()}}return"n0"}function nnlv(){return xzs1("attacker")}function msgj(){return xzs1("defender")}function j6y0(){return xzs1("attackercard")}function d0sg(){return xzs1("defendercard")}function c7bw(a){return lz0t(a).charAt(1)}function q56p(b){var a;switch(b){case"B":a=0;break;case"L":a=7;break;case"S":a=14;break;case"T":a=21;break;case"G":a=28;break;case"M":a=35;break;default:return"0000000"}return dqc.substr(a,7)}function yh51(a){try{return xzs1("activeplayers").charAt(a)=="1"}catch(b){return true}}function _y9(a){var b=q1tm(a);return b>=0?yh51(b):false}function x5v(c){for(var b=0;b<h_n0;b++){for(var a=0;a<h_n0;a++){if(b==dxs(a,c)){if(yh51(a)){return ___0[a]}break}}}}function dv7c(){for(var a=0;a<h_n0;a++){var b=khz_(a);if(_y9(b)){return b}}}function klw0(a){switch(a){case 3:return["1","2","3"];case 4:return["4","5","6"];case 5:return["F"];default:return[]}}function khz_(a){var c=[];for(var b=0;b<h_n0;b++){c[_85j(b)]=___0[b]}return c[a]}function kdd8(){_v4m=0;for(var a=0;a<h_n0;a++){if(yh51(a)){continue}_v4m++;try{var c=$("activePlayer"+___0[a]);c.innerHTML="<strike>"+c.innerHTML+"</strike>"}catch(b){}}if(_v4m>0){qvyb()}}function w_w3(){if(_v4m>0&&gldl()){switch(h_n0-_v4m){case 6:return 6;case 3:return 8;default:return 7}}return kb0}function bk9x(a,b){h86[a]=b}function xzs1(a){try{return h86[a]}catch(b){return 0}}function m4m(){this.trooper=0;this.knight=0;this.siege=0;this.ship=0}function wh7y(a){switch(a){case"FM":return sr63;case"KT":return f878;case"SE":return rvqs;case"SP":return p4jb;default:return 0}}function b8_(c,a){var b=0,d=-1;while(++d<r4hn){if(c==x8pq(d)){b+=ztd(d,a)}}return b}function rf0m(b){var a=0,c=-1;while(++c<lyw1){if(b==d6v8(c)){a+=rt1h(c)}}return a}function d39(c){var b=0,a=-1;while(q_kx&&++a<j_d){if(c==_p7k(a)){b+=_qwp(a)}}return b}function p0j(a){return rf0m(a)+d39(a)}function qlh(a){return b8_(a,1)}function skv_(a){return b8_(a,2)}function hctz(a){return b8_(a,3)}function nlp4(){return d8dm()?d7v()+lrg1()+n1q():yvg()}function cy29(a){if(a<r4hn){return __fb(a)}else{if(a<r4hn+lyw1){return rt1h(a-r4hn)}else{if(q_kx){return _qwp(a-r4hn-lyw1)}else{return 0}}}}function rt1h(a){return parseInt(ptrv(a).charAt(1))}function _qwp(a){return q_kx?parseInt(_8n.charAt(a)):0}function _mgq(a){return ztd(a,1)}function f4v(a){return ztd(a,2)}function hgv(a){return ztd(a,3)}function rzfz(a,c){if(c.vxn0(0,4)){try{xqm=xqm.q_fk(a,c)}catch(b){xqm="000".q_fk(a,c)}}}function msmq(a){rzfz(0,d7v()+a)}function _c_(a){rzfz(1,lrg1()+a)}function q_6(a){rzfz(2,n1q()+a)}function n5sz(a){rqy(yvg()+a)}function mp_6(a){rzfz(0,a)}function ggn1(a){rzfz(1,a)}function l6ql(a){rzfz(2,z_84>0?a:0)}function rqy(a){xqm=a}function slb(a){try{return typeof xqm!="number"?parseInt(xqm.charAt(a)):xqm}catch(b){return 0}}function d7v(){return d8dm()?slb(0):0}function lrg1(){return d8dm()?slb(1):0}function n1q(){return d8dm()&&z_84>0?slb(2):0}function yvg(){return kt4()?slb(0):0}function __fb(a){return _mgq(a)+f4v(a)+hgv(a)}function n_pw(d,a){var c=0;for(var b=0;b<a.length;b++){if(!a[b][6]&&a[b][2]==d){c++}}return c}function j3n(a){return n_pw(a,wh7y("FM"))}function nkcs(a){return n_pw(a,wh7y("KT"))}function nwz(a){return n_pw(a,wh7y("SE"))}function n_wv(a){return n_pw(a,wh7y("SP"))}function xz11(b,a,c){if(c.vxn0(0,9)){l9z(b,a,c)}}function k_0(a,b){xz11(a,1,b)}function w9g(a,b){xz11(a,2,b)}function _n9(a,b){xz11(a,3,b)}function lcy(a,b){if(b<=_6t){zj9=b<1?zj9.q_fk(a*2,"n0"):zj9.q_fk(a*2+1,b)}}function tpwj(a,b){if(b.vxn0(0,_6t)){_8n=_8n.q_fk(a,b)}}function kxb7(f,d,b,g){var a,e;if(g==0){return}switch(b){case"FM":a=3;break;case"KT":a=4;break;case"SE":a=5;break;case"SP":a=5;if(f<r4hn){f+=r4hn}break;default:return false}e=qny.indexOf(d+sqz(f,2));if(e>=0){g=parseInt(qny.charAt(e+a))+g;qny=qny.q_fk(e+a,g<0?0:g)}else{if(g.vxn0(0,4)){var c=d+sqz(f,2)+"000";qny+=c.q_fk(a,g)}}qny=qny.replace(/[a-zA-Z][0-9][0-9]000/g,"")}function bz7p(b,a,c){kxb7(b,a,"FM",c)}function k_x(b,a,c){kxb7(b,a,"KT",c)}function bx77(b,a,c){kxb7(b,a,"SE",c)}function _qz(b,a,c){kxb7(b,a,"SP",c)}function f_fv(c,b,d){if(d==0){return}var a=ztd(c,b);xz11(c,b,a+d)}function wm0(a,b){f_fv(a,1,b)}function h5b_(a,b){f_fv(a,2,b)}function rf6(a,b){f_fv(a,3,b)}function qk5p(a,b){lcy(a,rt1h(a)+b)}function __3c(a,b){tpwj(a,_qwp(a)+b)}function _3z(b,a){wm0(b,-1);wm0(a,1)}function r9px(b,a){h5b_(b,-1);h5b_(a,1)}function p58(b,a){rf6(b,-1);rf6(a,1)}function qys(b,a){b<SEA_UNITS?qk5p(b,-1):__3c(b-SEA_UNITS,-1);a<SEA_UNITS?qk5p(a,1):__3c(a-SEA_UNITS,1)}function x0j_(a){tq0(a,1)}function bn_(a){tq0(a,2)}function nxck(a){tq0(a,3)}function mckv(){if(mdmy!=xzs1("land")||zj9!=xzs1("sea")||_8n!=xzs1("port")){return true}}function hfq(){var d=v_f(),e=q1tm(d),g=e*mbj,b=e*x9v,f=e*z_84,c=e*_6t;for(var a=g;a<g+mbj;a++){g2r(d+"FM"+a)}for(var a=b;a<b+x9v;a++){g2r(d+"KT"+a)}for(var a=f;a<f+z_84;a++){g2r(d+"SE"+a)}for(var a=c;a<c+_6t;a++){g2r(d+"SP"+a)}}function tq0(c,a){var d=yrc(c),b=a>1?2:1;if(f4z[d][1]>=b){ckr();f_fv(c,a,1);z1jx();lrmm(mdmy,zj9,_8n);f4z[d][1]-=b;if(a==1){y59()}jj5h(d)}}function j80r(d,b){var a=fjl(),e=yrc(d);if(f4z[e][1]>0){ckr();wm0(d,-1);b?rf6(d,1):h5b_(d,1);if(a>4){if(j3n(d)>_mgq(d)){var c=x8pq(d);bz7p(d,c,-1);b?bx77(d,c,1):k_x(d,c,1)}}z1jx();f4z[e][1]--;if(a<6){y59();jj5h(e)}else{if(a==10){kz5c();g03m();l0j()}}}}function v1p(c){var a,b=v_f(),d=yrc(c);kkb9();if(f4z[d][1]<1){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_MP)}else{if(f4z[d][1]==1&&qlh(b)>=mbj){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_FOOTMEN)}else{a=mdmy.q_fk(c*8+1,_mgq(c)+1);if(!lrmm(a,zj9,_8n,null,false)){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_LOW_SUPPLY)}else{if(z_84==0||f4z[d][1]==1||(x9v==skv_(b)&&z_84==hctz(b))){x0j_(c)}else{fwp(c)}}}}}function wx0(d,c){var f=v_f(),b=fjl(),g=sr63[c][2];if(f&&[0,5,8,9,10].k81j(b)){if(b>7&&d0sg()=="M4"&&d=="M"&&g==knq&&f4z[0][0]==knq&&f4z[0][1]>0){j80r(g);return true}if(qg0&&_8k0(d+"FM"+c)&&(b==5||b==10||__h())){ckr();var h=yrc(g),a=skv_(d),e=z_84>0?hctz(d):0;if(h<0||f4z[h][1]<1){jc0x(STR.EVT_MUSTER_UP+"\n"+STR.EVT_MUSTER_NO_MP)}else{if(d==f&&(x9v>a||z_84>e)&&(b==0||b==5||(b==10&&x9v>a&&(j6y0()=="B6"||d0sg()=="B6")))){if(b<6&&z_84>e){if(a==x9v){j80r(g,true)}else{fwp(g,true)}}else{j80r(g)}}else{if(qg0&&f==d){jc0x(STR.EVT_MUSTER_UP+"\n"+STR.EVT_MUSTER_NO_KNIGHTS)}}}}}}function fwp(c,a){var b=v_f();content='<table cellspacing=8 cellpadding=2 class="musterwindow overlay_shadow"><tr><th colspan=3>'+_yjt(c,"l")+":</th></tr><tr>";if(!a&&qlh(b)<mbj){content+='<th><div onclick="x0j_('+c+')" class="u_base u_FM'+b+'" style="cursor:pointer;"></div></th>'}else{content+='<th><div class="u_base u_FM'+b+' musternot">N/A</div></th>'}if(skv_(b)<x9v){content+="<th><div "+(a?'onclick="j80r('+c+')" ':'onclick="bn_('+c+')" ')+'class="u_base u_KT'+b+'" style="cursor:pointer;"></div></th>'}else{content+='<th><div class="u_base u_KT'+b+' musternot">N/A</div></th>'}if(hctz(b)<z_84){content+="<th><div "+(a?'onclick="j80r('+c+', true)" ':'onclick="nxck('+c+')" ')+'class="u_base u_SE'+b+'" style="cursor:pointer;"></div></th>'}else{content+='<th><div class="u_base u_SE'+b+' musternot">N/A</div></th>'}yg_(content+"</tr></table>",_m_h[c][0]-50,_m_h[c][1]-80)}function z04(b){var a=_8n,c=v_f(),d=j1zn(b),e=yrc(d);ckr();kkb9();if(f4z[e][1]<1){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_MP_SHIP)}else{if(f4z[e][1]==1&&p0j(c)>=_6t){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_SHIPS)}else{__3c(b,1);if(!lrmm(mdmy,zj9,_8n)){_8n=a;jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_LOW_SUPPLY)}else{k520();f4z[e][1]--;jj5h(e)}}}}function xz16(e){var g=xsbp[e+r4hn].match(/.{1,3}/g),b="",k,f=zj9;while(g.length>0){var c=g.pop(),a=c.charAt(0),h=c.substr(1);if(a=="l"&&txsb.k81j(c)){for(var d=0;d<8;d++){if(f4z[d][0]&&f4z[d][0]==h.r_z()&&f4z[d][1]>0){b+=c;break}}}}if(b.length<3){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_MP_SHIP)}else{if(d6v8(e)=="n"){__j7(e,v_f())}qk5p(e,1);k=lrmm(mdmy,zj9,_8n,null,false);zj9=f;if(!k){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_LOW_SUPPLY)}else{if(b.length>3){qj9c(e,b)}else{n0cx(e,b.substr(1,2).r_z())}}}}function n0cx(b,a){ckr();var c=-1;while(++c<8){if(f4z[c][0]==a&&f4z[c][1]>0){if(d6v8(b)=="n"){__j7(b,v_f())}qk5p(b,1);k520();lrmm(mdmy,zj9,_8n);f4z[c][1]--;jj5h(c);break}}}function y59(){var c=v_f(),a=c+"FM";for(var b=0;b<h_n0*mbj;b++){if(sr63[b][4]==c){p170(a+b);if(sr63[b][2]>=0&&_5fv(sr63[b][2])){g2r(a+b)}}}}function pvy6(b,a,f){var k=mn5l();var d=false;if(qg0&&a==v_f()&&(k||d0bb())){var h=wh7y(f)[b][2];if(__p<1){jc0x(STR.EVT_SUPPLY_OK_ALREADY)}else{if(k&&lrmm(mdmy,zj9,_8n)){jc0x(STR.EVT_MUSTER_SUPPLY)}else{if(f!="SP"){var c=__fb(h)==1;if(k&&c){jc0x(STR.EVT_SUPPLY_SINGLE_UNIT);return 0}switch(f){case"FM":wm0(h,-1);break;case"KT":h5b_(h,-1);__p--;break;case"SE":rf6(h,-1);__p--;break;default:break}if(c&&!npy(h)){x5f(h);if(zxk(h)){k520()}}z1jx();d=!c}else{var g=h>=lyw1,e=g?_qwp(h-lyw1):rt1h(h),c=e==1;if(c&&k){jc0x(STR.EVT_SUPPLY_SINGLE_UNIT);return 0}if(g){__3c(h-lyw1,-1)}else{qk5p(h,-1)}k520();d=!c}}}__p--;if(d){lrmm(mdmy,zj9,_8n)}}}function sn_n(){return false}function wvf(){return true}function k61t(){return"BATTLE_CARD2"}function rvgn(a){return false}function __hz(c,a){if(c=="L7"&&!rvgn(a)){var b=w7q_("L",2);if(v_f()!="L"){yxm9+="\n\n"+STR.format(STR.BATTLE_PT_GAIN_NAME,[STR.HOUSE_L,b])}else{yxm9+="\n\n"+STR.format(STR.BATTLE_PT_GAIN,[b])}document.finishBattleForm.Lannisterpos.value=k1py(1)}}function hh7(a){return["B6","L1"].k81j(a)}function st6(b,a){if(rvgn(a)){return false}if(b=="B6"){if(x9v>skv_("B")){return true}}else{if(b=="L1"){return true}}return false}function _k9q(a){var c=[0,0,1,1,2,2,3,4],b=0,e=j6y0(),d=d0sg();if(fjl()>7){if(a==zp0_){b=parseInt(e.charAt(1))}else{if(a==qc_){b=parseInt(d.charAt(1))}}}return c[b]}function lr0_(){var a=h2fw();content='<table class="box_extend box_game_state"><tr><th valign="top"><small>'+STR.DLG_MAIN_AOF+"<br></small>";if(h_n0>wm8(a)){content+='<br><br><span style="float:left;width:25px;"><img src="./images/throne.gif" title="'+STR.SPECIAL_TOKEN_THRONE+'"></span><span style="float:left;width:25px;"><input type="radio" style="cursor:pointer" name="token" id="throne" onclick="document.finishBattleForm.trackid.value=1"></span><label for="throne" style="cursor:pointer"><small>'+STR.TRACK_THRONE+"</small></label>"}if(h_n0>j_9(a)){content+='<br><br><span style="float:left;width:25px;"><img src="./images/sword.gif" title="'+STR.SPECIAL_TOKEN_BLADE+'"></span><span style="float:left;width:25px;"><input type="radio" style="cursor:pointer" name="token" id="blade" onclick="document.finishBattleForm.trackid.value=2"></span><label for="blade" style="cursor:pointer"><small>'+STR.TRACK_FIEFDOMS+"</small></label>"}if(h_n0>ndl(a)){content+='<br><br><span style="float:left;width:25px;"><img src="./images/raven.gif" title="'+STR.SPECIAL_TOKEN_RAVEN+'"></span><span style="float:left;width:25px;"><input type="radio" style="cursor:pointer" name="token" id="raven" onclick="document.finishBattleForm.trackid.value=3"></span><label for="raven" style="cursor:pointer"><small>'+STR.TRACK_COURT+"</small></label>"}content+="</th></tr></table>";$("leak_menu").innerHTML=content;$("leak_menu").style.left=-1;$("leak_menu").style.top=rlz($("gameStateField"))-23;j2_1();kkb9()}function hk_s(){if(ptw()){return false}return true}function ptw(){if(pmj()=="S"&&(j6y0()=="S6"||d0sg()=="S6")){return true}return false}function z2_f(){if(fjl()!=8||xzs1("bidL")==1||(j6y0()!="L3"&&d0sg()!="L3")){return false}return true}function z0rt(){if(!_y9("G")||fjl()!=8||xzs1("bidG")==1||xdr[4][0]<2||q56p("G").l30("1")==1||(j6y0()!="G1"&&d0sg()!="G1")){return false}return true}function f619(){var b=j6y0(),a=d0sg();if(!_y9("G")||rvgn(b)||rvgn(a)||(b.mlh("G")&&xzs1("attackersupporters").length>0)||(a.mlh("G")&&xzs1("defendersupporters").length>0)||yyn(knq,"G")>0||r8x(knq,"G")>0){return false}return true}function __s7(){if(!_y9("G")||d0sg()!="G5"||rvgn(j6y0())||kt4()||mdmy.charAt(knq*8+5)=="0"){return false}return true}function dlh(){if(!_y9("T")||fjl()!=8||xzs1("bidT")==1||(j6y0()!="T1"&&d0sg()!="T1")){return false}var d=kt4()?(knq+r4hn):knq,c=[new d86g()],b=zp0_!="T"?zp0_:qc_,a=_60(d,c,b,false);return a.length>0}function d86g(){this.areaOffset=d8dm()?0:-r4hn}d86g.prototype.x1nl=function(a,b){return a>0&&(!m35(a)||b+this.areaOffset!=v1s)};function cq6_(){if(!_y9("T")||j6y0()!="T6"||d0sg()=="M2"||nlp4()<=0||rvgn(d0sg())){return false}return true}function s6b(){if(!_y9("M")||fjl()!=8||xzs1("bidM")==1||(j6y0()!="M1"&&d0sg()!="M1")){return false}return true}function x_2g(){if(d0sg()!="M2"){return true}return false}function _qf(c){var d=c.charAt(0),e=["G1","T1","M1"],a=c==j6y0()?d0sg():j6y0(),b=a.charAt(0);if(!mq9(c)){return false}if(a!="G1"&&xzs1("bid"+b)!=1&&e.k81j(a)&&mq9(a)&&wm8(d)>wm8(b)){return false}return true}function mq9(a){if((a=="G1"&&!z0rt())||(a=="T1"&&!dlh())||(a=="M1"&&!s6b())){return false}return true}function jxb_(b){var e=0,c=b.charAt(0),d=c==zp0_,f=fl2g(c);switch(b){case"B2":e=1;break;case"B4":e=f?1:-1;break;case"B5":e=xzs1("cards").charAt(6)=="0"?1:0;break;case"L4":e=-2;break;case"L5":e=1;break;case"L6":e=3;break;case"S3":e=-2;break;case"S4":e=1;break;case"S7":e=2;break;case"T2":e=-1;break;case"T3":e=-1;break;case"T4":e=1;break;case"T5":e=2;break;case"G2":e=f619()?(f?2:-1):0;break;case"G3":e=f?1:-1;break;case"G5":e=__s7()?1:0;break;case"G7":e=1;break;case"M3":e=d?1:-1;break;case"M4":e=1;break;case"M5":e=1;break;case"M6":e=-1;break;case"M7":e=f?2:-1;break;default:break}if((e>0&&!f)||(e<0&&f)){e=0}if(gxb()){var a=s77f(d?"attacker":"defender");if((a>0&&f)||(a<0&&!f)){e+=a}}if(e>0){if((d&&d0sg()=="S2")||(!d&&j6y0()=="S2")){e=0}}return e}function sr_q(){var a=document.phaseAForm,b=a.type.value;if(b=="B6"){if(mdmy!=xzs1("land")){a.proceed.disabled=true;a.land.value=mdmy}else{if(!confirm(STR.CNFM_NO_UPGRADE)){return false}kz5c()}}else{if(b=="L1"){if((x9l+mqy+rc__+bky+vdq+r5t)==xzs1("ordersall")){if(!confirm(STR.CNFM_NO_ENEMY_ORDER)){return false}}p170(a.proceed);a.proceed.disabled=true;a.ordersB.value=x9l;a.ordersL.value=mqy;a.ordersS.value=rc__;a.ordersT.value=bky;a.ordersG.value=vdq;if(h_n0==6){a.ordersM.value=r5t}a.routedunits.value=qny}}cxj()}function fv_9(){var a=document.phaseAForm;if(!a.cardstring.value.length){if(!confirm(STR.CNFM_NO_ENEMY_CARD)){return false}a.cardstring.value="CONFIRMED";a.submit()}else{if(a.cardstring.value.length==7){a.proceed.disabled=true}}cxj()}function _n6(g){var e=v_f();if(g=="B6"){if(d8dm()){var d=0,a=xsbp[knq],f=d0sg()!="M2"?knq:v1s;a+="l"+sqz(f,2);ldf();txsb="";for(var c=0;c<h_n0*mbj;c++){if(sr63[c][4]==e){var b=sr63[c][2];if(a.k81j("l"+sqz(b,2))&&(sr63[c][2]==f||(sr63[c][5]>6&&sr63[c][5]<10))){f4z[d][0]=sr63[c][2];f4z[d++][1]=1;kz5c();_q5h("l"+b,"#FCFC00");g2r(e+"FM"+c)}else{p170(e+"FM"+c)}}}}}else{if(g=="L1"){if(e==zp0_){ykl(qc_)}else{ykl(zp0_)}}}}function y9bq(b,l){if(rvgn(b)||rvgn(l)){return}var e=false;if(b=="B3"&&(xzs1("attackersupport")>0||r8x(knq,"B")||yyn(knq,"B"))){var a=qc_;rf36=rf36-xzs1("attackerseasupport")+rh0(xzs1("attackersupporters"));r_pg=r_pg-r8x(knq,a)-xzs1("defenderseasupport")+rh0(xzs1("defendersupporters")+a);if(kt4()){r_pg=r_pg-parseInt(zj9.charAt(knq*2+1))+n_wv(knq)}}else{if(l=="B3"&&(xzs1("defendersupport")>0||r8x(knq,"B")||yyn(knq,"B"))){var a=zp0_;r_pg=r_pg-xzs1("defenderseasupport")+rh0(xzs1("defendersupporters"));rf36=rf36-r8x(knq,a)-xzs1("attackerseasupport")+rh0(xzs1("attackersupporters")+a);if(kt4()){rf36-=yvg()}e=true}else{if(b=="B5"&&xzs1("cards").charAt(6)=="0"){rf36+=1}else{if(l=="B5"&&xzs1("cards").charAt(6)=="0"){r_pg+=1}else{if(b=="B7"&&wm8(zp0_)>wm8(qc_)){rf36+=1}else{if(l=="B7"&&wm8(qc_)>wm8(zp0_)){r_pg+=1}}}}}}if(b=="L2"&&d8dm()){var h=d7v(),g=gtw(knq,"L");if(h>0&&l=="T7"){h--}rf36+=h+g}if(l=="S1"){if(_zb_(rc__,["A","B"],knq)){r_pg+=1}else{if(_zb_(rc__,["C"],knq)){r_pg+=2}}}if(b=="T7"&&l!="S2"&&d8dm()){var c=_mgq(knq);if(c>0){if(c>j3n(knq)){r_pg-=1}j0x[4]+=1;wm0(knq,-1);if(__fb(knq)==0){d2v(knq,msgj());if(krnj(knq)==0){x5f(knq);var d=mdmy.charAt(knq*8);if(d!="n"&&d!=xzs1("land").charAt(knq*8)&&zxk(knq)){k520();var f=x59(knq),k=r4hn+lyw1+f;d2v(k,msgj())}}}z1jx()}}else{if(l=="T7"&&b!="S2"&&d7v()>0){j0x[4]+=1;availableTroopers=_mgq(v1s);if(d7v()==1&&!npy(v1s)&&__fb(v1s)==1){x5f(v1s);if(zxk(v1s)){k5nx(v1s);k520()}}else{if(availableTroopers>0){wm0(v1s,-1)}}msmq(-1);rf36-=1;z1jx()}}if(b=="G4"){r_pg-=_k9q(qc_)}else{if(l=="G4"){rf36-=_k9q(zp0_)}else{if(__s7()){r_pg+=1}else{if(!e&&b=="G6"){var m=pcxp(knq,"G");rf36+=yvg()+m}}}}bzm+=rf36;cqq1+=r_pg}function wgf7(c){var e=j6y0(),d=d0sg(),b=c==zp0_?e:d,a=b!=e?e:d;if(!st6(b,a)){return}if(b=="B6"){if(!kt4()&&$("AvailKnightB").innerHTML.r_z()!=x9v&&(gtw(knq,"B")>0||(d=="B6"&&_mgq(knq)>0)||(e=="B6"&&d7v()>0))){document.finishBattleForm.aphaseplayer.value=c}}else{document.finishBattleForm.aphaseplayer.value=c}}function jbp(c,a,b){extAreaOver("WesterosMapImg",c,a,b)}function _q5h(b,a){jbp(b,a,35)}function kz5c(){extAreaOut("WesterosMapImg")}function _0q2(b,a){f490(b,a,true)}function f490(c,b,a){if(a){kz5c()}_0wc(c,0,b);jpfv(c,0,b)}function sz1(){var a=["#FCFC00","#991100","#EEEEEE","#33EE33","#111111","#FFAA11"];f490("n","#3333F0",0);for(var b=0;b<h_n0;b++){if(yh51(b)){f490(___0[b],a[b],0)}}}function _0wc(f,a,c){for(var d=0;d<r4hn;d++){var e=mdmy.charAt(d*8),b=mdmy.charAt(d*8+a);if(e==f&&(a==0||(a!=4&&b!="0")||(a==4&&b=="1"))){_q5h("l"+d,c)}}}function jpfv(d,a,b){for(var c=0;c<lyw1;c++){if(d6v8(c)==d&&(a==0||rt1h(c)>0)){jbp("s"+c,b,38)}}for(var c=0;c<j_d;c++){if(_qwp(c)>0&&_p7k(c)==d){_q5h("p"+c,b)}}}function m0fk(){var e=h_n0*mbj,d=h_n0*x9v,c=h_n0*z_84,a=h_n0*_6t;for(var b=0;b<e;b++){hnv(sr63[b][3],sr63[b][1]);if(!sr63[b][6]){spy(sr63[b][3],"u_routed")}if(b<d){hnv(f878[b][3],f878[b][1]);if(!f878[b][6]){spy(f878[b][3],"u_routed")}}if(b<c){hnv(rvqs[b][3],rvqs[b][1]);if(!rvqs[b][6]){spy(rvqs[b][3],"u_routed")}}if(b<a){hnv(p4jb[b][3],p4jb[b][1]);if(!p4jb[b][6]){spy(p4jb[b][3],"u_routed")}}}}function wgg(c,b){if(rxl>0&&rxl<4&&xzs1("bidcount")>=h_n0){var a=document.images["aof"+rxl+c];p170(a);if(b&&a.src.k81j("empty.gif")&&tj4(v_f())){a.src="./images/house_empty2.gif";frjw(a)}else{if(a.src.k81j("empty2.gif")){a.src="./images/house_empty.gif"}}}}function _z3f(d,c){if(srf(d)!=v_f()){var b="OrderSelect"+d,a="Order"+d;if(c&&_8k0(a)){$(b).style.left=$(a).style.left;$(b).style.top=$(a).style.top;hnv(b,vh85);spy(b,"o_map o_select2")}else{l2g(b)}}}function mnv_(c,d){var b=fjl(),e=parseInt(c.substr(3),10),a=d=="_select";type=c.substr(1,2),units=wh7y(type);if(units){if(a||(knq<0&&((units[e][0]&&a)||(qg0&&b>=4&&!units[e][0]&&units[e][6]&&units[e][4]==v_f()&&units[e][5]>=4&&units[e][5]<=6&&_hh==q0q())))){hnv(c,"u_base u_map");spy(c,"u_"+type+d);if(!a){g2r(c)}}}}var shbg=-1;function tl4q(d){var f=0,a=-1,e=d.substr(1,2),c=wh7y(e);if(fjl()!=4||!c||knq>=0||!_8k0(d)){return}while(c[f][3]!=d){f++}a=c[f][2];if(e=="SP"){a+=r4hn}if(shbg>=0&&shbg!=a&&_hh==q0q()){a=c[f][2];_5_(4);rjk()}if(qg0&&!c[f][0]&&c[f][5]>=4&&c[f][5]<=6&&c[f][4]==v_f()&&_hh==q0q()){mnv_(d,"_select");c[f][0]=true;shbg=c[f][2];if(e=="SP"){shbg+=r4hn}ctk++;var b=ctk;c501(c[f][5]);if(b!=ctk){mnv_(d,"_select");c[f][0]=true;ctk++}}else{if(c[f][0]&&c[f][4]==v_f()){c[f][0]=false;ctk--;mnv_(d,"_hover");if(ctk<=0){q1_h()}}}}function rjk(){var e=mbj*h_n0,d=x9v*h_n0,c=z_84*h_n0,a=_6t*h_n0;ctk=0;q1_h();for(var b=0;b<e;b++){if(sr63[b][0]){sr63[b][0]=false;hnv(sr63[b][3],sr63[b][1])}if(b<d&&f878[b][0]){f878[b][0]=false;hnv(f878[b][3],f878[b][1])}if(b<c&&rvqs[b][0]){rvqs[b][0]=false;hnv(rvqs[b][3],rvqs[b][1])}if(b<a&&p4jb[b][0]){p4jb[b][0]=false;hnv(p4jb[b][3],p4jb[b][1])}}}function l2g(a){t86(a,-1250,0)}function t86(f,a,d){try{var c=b__b(f);c.style.left=a+"px";c.style.top=d+"px"}catch(b){}}function y508(c){if(!rz0_){var a,d,b;if(c=="101"){b="crown";a=180;d=1240}else{if(c=="200"){b="stronghold";a=144;d=1200}}if(b){t86("oldtownPosition",a,d);$("oldtownContent").innerHTML='<img name="oldtownE" src="./images/extra_'+b+'.gif">'}}}function n_yy(){var a=[0,0,0,0,0,0,0],e,d;for(var c=0;c<h_n0;c++){for(var b=0;b<7;b++){e="supply"+b+c;document.images[e].src="./images/blind.gif"}}for(var c=0;c<h_n0;c++){d=tqz1(___0[c]);e="supply"+d+""+a[d];document.images[e].src=_mc(___0[c]);a[d]++}if(v_f()){_m_j();lrmm(mdmy,zj9,_8n)}}function l82(){var c=fjl(),e=["THRONE","FIEFDOMS","COURT"],g,d;if(c==0){x__=xzs1("houses")}for(var f=0;f<6;f++){d=q1tm(___0[f]);for(var b=1;b<4;b++){var a=dxs(d,b-1);g="aof"+b+a;if(c!=0||rxl>b||h_n0<=f||!q89()||(b==1&&(l9ng.charAt(0)==___0[f]||(l9ng.charAt(0)=="n"&&g=="aof11")))){document.images[g].src=_mc(___0[f])}else{document.images[g].src="./images/house_empty.gif"}document.images[g].title=STR["TRACK_"+e[b-1]]+" #"+a}if(f==4&&h_n0<6){break}}gd3()}function gd3(){var e,f,c,b=[t3p(1),t3p(2),t3p(3)];if(c2ts==1){b[1]="./images/sword_used.gif"}for(var a=0;a<3;a++){for(var d=1;d<h_n0+1;d++){f="bgAof"+(a+1)+""+d;$(f).style.backgroundImage=""}e=l9ng.charAt(a);if(e!="n"&&(!q89()||(a==0&&xzs1("bidcount")<h_n0))){c=q1tm(e);f="bgAof"+(a+1)+""+dxs(c,a)}else{f="bgAof"+(a+1)+"1"}$(f).style.backgroundImage="url("+b[a]+")"}}function nc2(){x__=xzs1("houses");for(var a=0;a<h_n0;a++){try{xdr[a][0]=jn8(a);xdr[a][1]=hdyb(___0[a],"power");$("AvailPower"+___0[a]).innerHTML=xdr[a][0]}catch(b){xdr[a--]=[]}}}function bzk(){for(var d=0;d<h_n0;d++){for(var b=0;b<7;b++){var a=parseInt(dqc.charAt(d*7+b)),e=$("c_icon_"+___0[d]+(b+1)),c=_56(___0[d],a);hnv(e,c)}}if(fjl()==10){x_6()}}function jdq0(b,a){x__=x__.q_fk(b*6+4,sqz(a,2))}function x96b(){this.B=0;this.L=0;this.S=0;this.T=0;this.G=0;this.M=0}function z1jx(){if(!mdmy){return}var p=fjl(),u,n,q,b,m,o=new x96b(),c=new x96b(),f=new x96b();try{for(var g=0;g<r4hn;g++){u=0;q=x8pq(g);l2g("PT"+g);if(q=="n"){continue}if(!___0.k81j(q)){throw (STR.format(STR.ERR_AREA_OWNER,[q,_yjt(g,"l")]))}b=krnj(g);if(b>1){hnv("PT"+g,"default");$("PT"+g).src="./images/garrison.png";$("PT"+g).title=STR.format(STR.TTIP_GARRISON,[_y_(q),b]);$("PT"+g).style.left=jtsz(g)-6;$("PT"+g).style.top=bdm(g)-4}else{if(b==1||(b==0&&vh13(g)&&wsv())){hnv("PT"+g,"power_token"+(b==0?"100":""));$("PT"+g).src=f8fr(b==1?q:qy_(g));$("PT"+g).title=STR.format(STR.TTIP_AREA_CTRL,[_y_(q)]);$("PT"+g).style.left=jtsz(g);$("PT"+g).style.top=bdm(g)}}m=z_84>0?hgv(g):0;for(var v=0;v<m;v++){n=f[q]+z_84*q1tm(q);$(rvqs[n][3]).style.left=_m_h[g][u*2];$(rvqs[n][3]).style.top=_m_h[g][u*2+1];$(rvqs[n][3]).title=STR.format(STR.UNIT_OWNER,[STR.UNIT_SIEGE,_y_(q)]);if(rvqs[n][2]>=0&&rvqs[n][2]!=g){lxxz($(rvqs[n][3]))}rvqs[n][2]=g;f[q]+=1;u++;if(f[q]==z_84){break}}m=f4v(g);for(var d=0;d<m;d++){n=c[q]+x9v*q1tm(q);$(f878[n][3]).style.left=_m_h[g][u*2];$(f878[n][3]).style.top=_m_h[g][u*2+1];$(f878[n][3]).title=STR.format(STR.UNIT_OWNER,[STR.UNIT_KNIGHT,_y_(q)]);if(f878[n][2]>=0&&f878[n][2]!=g){lxxz($(f878[n][3]))}f878[n][2]=g;c[q]+=1;u++;if(c[q]==x9v){break}}m=_mgq(g);for(var r=0;r<m;r++){n=o[q]+mbj*q1tm(q);$(sr63[n][3]).style.left=_m_h[g][u*2];$(sr63[n][3]).style.top=_m_h[g][u*2+1];$(sr63[n][3]).title=STR.format(STR.UNIT_OWNER,[STR.UNIT_FOOTMAN,_y_(q)]);if(sr63[n][2]>=0&&sr63[n][2]!=g){lxxz($(sr63[n][3]))}sr63[n][2]=g;o[q]+=1;u++;if(o[q]==mbj){break}}}var h=!wg1&&(p==5||__h());for(var g=0;g<6;g++){var a=___0[g];$("AvailKnight"+a).innerHTML=!h?c[a]:x9v-c[a];$("AvailInf"+a).innerHTML=!h?o[a]:mbj-o[a];for(f[a];f[a]<z_84;f[a]++){n=f[a]+z_84*g;l2g(rvqs[n][3]);rvqs[n][2]=-1}for(c[a];c[a]<x9v;c[a]++){n=c[a]+x9v*g;l2g(f878[n][3]);f878[n][2]=-1}for(o[a];o[a]<mbj;o[a]++){n=o[a]+mbj*g;l2g(sr63[n][3]);sr63[n][2]=-1}if(g+1==5&&h_n0<6){break}}f76();_64();if(qny||qny!=xzs1("routedunits")){_sf()}}catch(l){jc0x(l+"\n"+STR.ERR_CONTACT);return}}function rql8(a){var l,g,h,k,f=_8n.length;for(var c=0;c<f;c++){k=j1zn(c);l=x8pq(k);if(l=="n"||(fjl()>=8&&k==knq&&d8dm()&&xzs1("takeover")==0&&l!=xzs1("land").charAt(k*8))){tpwj(c,0);continue}g=_qwp(c);for(var b=0;b<g;b++){h=a[l]+_6t*q1tm(l);try{$(p4jb[h][3]).style.left=brg[c][b*2];$(p4jb[h][3]).style.top=brg[c][b*2+1];$(p4jb[h][3]).title=STR.format(STR.UNIT_OWNER,[STR.UNIT_SHIP,_y_(l)]);if(p4jb[h][2]>=0&&p4jb[h][2]!=lyw1+c){lxxz($(p4jb[h][3]))}p4jb[h][2]=lyw1+c;a[l]+=1;if(a[l]==_6t){tpwj(c,b+1);break}}catch(d){}}}return a}function k520(){if(!zj9){return}var l=fjl(),h=0,k,m,b=new x96b();try{for(var d=0;d<lyw1;d++){m=d6v8(d);if(m=="n"){continue}if(!___0.k81j(m)){throw (STR.format(STR.ERR_AREA_OWNER,[m,_yjt(d,"s")]))}h=rt1h(d);for(var c=0;c<h;c++){k=b[m]+_6t*q1tm(m);$(p4jb[k][3]).style.left=f2l[d][c*2];$(p4jb[k][3]).style.top=f2l[d][c*2+1];$(p4jb[k][3]).title=STR.format(STR.UNIT_OWNER,[STR.UNIT_SHIP,_y_(m)]);if(p4jb[k][2]>=0&&p4jb[k][2]!=d){lxxz($(p4jb[k][3]))}p4jb[k][2]=d;b[m]+=1;if(b[m]==_6t){break}}}if(q_kx){b=rql8(b)}var f=!wg1&&(l==5||__h());for(var d=0;d<6;d++){var a=___0[d];$("AvailShip"+a).innerHTML=!f?b[a]:_6t-b[a];while(b[a]<_6t){k=b[a]+_6t*d;l2g(p4jb[k][3]);p4jb[k][2]=-1;b[a]++}if(d==4&&h_n0<6){break}}if(qny||qny!=xzs1("routedunits")){_sf()}}catch(g){jc0x(k+"\n"+g+"\n"+STR.ERR_CONTACT);return}}function f76(){if(mfnf){for(var b=15;b<r4hn;b++){var a=mdmy.charAt(b*8);units=mdmy.charAt(b*8+1);if(a=="n"&&units!="0"){$("nf"+b).style.left=Math.round((_m_h[b][2]+_m_h[b][6])/2);$("nf"+b).style.top=Math.round((_m_h[b][3]+_m_h[b][7])/2);$("nf"+b).innerHTML=units}else{l2g("nf"+b)}}}else{l2g("klanding");l2g("eyrie");l2g("sunspear");if(mdmy.substr(15*8,2)=="n6"){$("eyrie").style.left=538;$("eyrie").style.top=736}if(mdmy.substr(22*8,2)=="n5"){$("klanding").style.left=460;$("klanding").style.top=908}if(!rz0_&&mdmy.substr(32*8,2)=="n5"){$("sunspear").style.left=572;$("sunspear").style.top=1238}}}function _64(){for(var a=0;a<6;a++){var b=___0[a];$("Stronghold"+b).innerHTML=hdyb(b,"stronghold");$("City"+b).innerHTML=hdyb(b,"castle");if(a==4&&h_n0<6){break}}}function y1y(l){var c="",n=l.substr(1,2).r_z();if(l.substr(0,4)=="card"){hzg=-255;ytmn=-30;c+='<div class="card_base '+ww2m+l.charAt(4)+" card"+l.charAt(5)+'"></div>'}else{if(ctk>0&&fjl()==4&&((l.charAt(0)=="l"&&x8pq(n)!=v_f())||(l.charAt(0)=="s"&&d6v8(n)!=v_f()&&d6v8(n)!="n"))){var f,g;if(l.charAt(0)=="s"){f=_yjt(n,"s");n+=r4hn}else{f=_yjt(n,"l")}g=l3_c(n,2);c+='<table border=0 onmouseover="vg8()" cellspacing=0 cellpadding=0 width="100%"><tr><th><small><i>'+f+'</i></small></th><th>&#160;<img src="'+n2tb.src+'">&#160;</th></tr><tr><td><small>'+STR.MARCH_TTIP_STR+":</small></td><th>"+g[0]+"</th></tr><tr><td><small>"+STR.MARCH_TTIP_STR_E+":</small></td><th>"+g[1]+"</th></tr>";+(y90(n)?'<tr><th colspan=2 style="color:red;padding-top:5px;"><sub>'+STR.MARCH_TTIP_SUPPORT+"</sub></th></tr>":"")+"</table>"}else{if(l.mlh("AvailPower")){hzg=28;ytmn=5;var a=l.charAt(10),h=q1tm(a),b=xdr[h][0],k=zh0-b-xdr[h][1];if(dsqw>0){b+=dsqw;k-=dsqw}c+="<table cellspacing=0 cellpadding=0><tr><td><b>"+STR.TTIP_STATUS_POWER+" "+_y_(a)+"</b><small><br>"+STR.TTIP_STATUS_POWER_A+": <b>"+b+"</b><br>"+STR.TTIP_STATUS_POWER_U+": <b>"+(zh0-b-k)+"</b><br>"+STR.TTIP_STATUS_POWER_P+": <b>"+k+"</b></small></td></tr></table>"}else{if(l.mlh("nf")){hzg=-60;ytmn=-275;var n=l.substr(2,2);c='<table width="185" cellspacing=0 cellpadding=0><tr><td><b>'+_yjt(n,"l")+"</b><small><br><i>"+STR.TTIP_NTRL_FORCES1+"</i><br>"+STR.format(STR.TTIP_NTRL_FORCES2,["<b>"+_mgq(n)+"</b>"])+"</small></td></tr></table>"}else{if(l.mlh("evt")){hzg=155;ytmn=-183;var e=unescape(l),m=parseInt(e.substr(3)),d=parseInt(l.length>6?e.substr(-2,2):e.substr(-1));if(d==0){c+=STR.EVT_NO_INFO}else{c+="<b>"+_z_p(m,d)+"</b><br>"+sh0(m,d)}c='<p style="text-align:center;width:230px;margin:0 auto">'+c+"</p>"}}}}}return c}function yt8z(e,f){var l=false,g="tooltip",m=0,h=0,c=277,a=0;if(typeof e=="object"){l=true;m=e.offsetHeight;h=e.offsetWidth;c=cz2(e);a=rlz(e)}else{if(e=="map"&&ctk>0&&fjl()<6){var b=f.charAt(0),k=f.substr(1,2).r_z(),d=kbk();if(txsb.k81j(b+sqz(k,2))&&(knq<0||knq==k)&&((b=="l"&&x8pq(k)!=v_f()&&(zwp(k)||__fb(k)>0))||(b=="s"&&d6v8(k)!=v_f()&&rt1h(k)>0))){l=true;if(b=="l"){a=Math.round((_m_h[d][7]+_m_h[k][7])/2)}else{if(d<lyw1){a=Math.round((f2l[d][7]+f2l[k][7])/2)}else{if(q_kx&&d>=lyw1&&d-lyw1<j_d){a=Math.round((brg[d-lyw1][1]+f2l[k][7])/2)}}}}}}if(l){if(f.mlh("evt")){g="event-deck"}$("tooltipContent").innerHTML="<table"+(f.mlh("card")?">":' class="'+g+'" cellpadding=2>')+"<tr><td>"+y1y(f)+"</td></tr></table>";if(w1dk.k81j(f+",")){c-=$("tooltipContent").offsetWidth-10}$("tooltip").style.left=c+h+ytmn;$("tooltip").style.top=a-m+hzg}}function vg8(){$("tooltipContent").innerHTML="";$("tooltip").style.left=-999;$("tooltip").style.top=-999;if(ytmn!==0||hzg!==0){ytmn=0;hzg=0}}function _bp(a){return a.r_z().vxn0(1,3)}function m35(a){return a.r_z().vxn0(4,6)}function g_q_(a){return a.r_z().vxn0(7,9)}function j9n(a){return a.r_z().vxn0(10,12)}function wln(a){return a.r_z().vxn0(13,15)}function nx_(a){return a.r_z()==15}function pcw(c){var b=[],d="",a=hx_+1;if(mfnf){jc0x(STR.NO_MAP_SUPPORT);return}if(c=="B"){if(h_n0>5){if(a>1){a=0}b[0]="205249"+(r4hn+lyw1-4)+"4";b[1]="20524E"+(r4hn+lyw1-4)+"9";d=b[a]}else{if(h_n0>3){d="206244"+(r4hn+lyw1-4)+"5"}else{if(a>1){a=0}b[0]="204246"+(r4hn+lyw1-4)+"5";b[1]="20624D"+(r4hn+lyw1-4)+"5";d=b[a]}}}else{if(c=="L"){if(h_n0>4){if(a>1){a=0}b[0]="165186"+(r4hn+3)+"1";b[1]="166189"+(r4hn+3)+"1";d=b[a]}else{d="164185"+(r4hn+3)+"6"}}else{if(c=="S"){d="014045"+(r4hn+lyw1-1)+"6"}else{if(c=="T"){if(h_n0==6){d="27529D434"}else{if(!qvxd||h_n0==5){if(a>2){a=0}b[0]="274286385";b[1]="274285386";b[2]="274286387";d=b[a]}else{if(a>1){a=0}b[0]="274285387";b[1]="27428E385";d=b[a]}}}else{if(c=="G"){if(a>1){a=0}if(q_kx&&_qwp(1)>0){b[0]="075124"+(r4hn+2)+"1"+(r4hn+lyw1+1)+"D";b[1]="07E125"+(r4hn+2)+"4"+(r4hn+lyw1+1)+"D"}else{b[0]="075124"+(r4hn+2)+"7";b[1]="07D124"+(r4hn+2)+"5"}d=b[a]}else{if(c=="M"){d="346375459"}}}}}}hx_=a;bwxb(c,d);zzn();r59f();kkwg(v_f())}function qbgq(b,d){var c=q_kx&&b=="p";if(txsb.k81j(b+sqz(d,2))){var a=fjl();yn_=_qbx(d,b);if(qg0&&(a==0||a==5)){if(b=="l"){if(_mgq(d)+f4v(d)>3){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_MAX_ARMY)}else{if($("AvailInf"+v_f()).innerHTML=="0"&&$("AvailKnight"+v_f()).innerHTML=="0"&&hctz(v_f())>=z_84){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_FOOTMEN)}else{v1p(d)}}}else{if((b=="s"&&rt1h(d)>3)||(c&&_qwp(d)>2)){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_MAX_FLEET)}else{if($("AvailShip"+v_f()).innerHTML=="0"){jc0x(STR.EVT_MUSTER_NEW+"\n"+STR.EVT_MUSTER_NO_SHIPS)}else{if(b=="s"){xz16(d)}else{if(c){z04(d)}}}}}}else{if(a<3&&document.sendOrdersForm){if(a==2&&_hh!=q0q()){_5_(2);jc0x(STR.RAVEN_ORDER_RESET)}rgm(_qbx(d,b))}else{if(qg0&&a==4&&ctk>0){switch(b){case"l":_mwy(d);break;case"p":f0ty(_qwp(d),d+lyw1);break;default:f0ty(ptrv(d),d);break}}else{if(qg0&&a>7){ym_l(!c?d:d+lyw1)}}}}}}function jt3(f,a,e,d){var b,h=0,c=0,g=0;if(f<r4hn){b=x8pq(f);while((a>0||e>0)&&!lrmm(mdmy,zj9,_8n,b)){if(a>0){h++;a--;wm0(f,-1);hrhg.trooper++}else{if(e>0){c++;e--;h5b_(f,-1);hrhg.knight++}}}}else{if(f<r4hn+lyw1){f-=r4hn;b=d6v8(f);while(d>0&&!lrmm(mdmy,zj9,_8n,b)){g++;d--;qk5p(f,-1);hrhg.ship++}}else{if(q_kx){f-=r4hn+lyw1;b=_p7k(f);while(d>0&&_qwp(f)>0&&(b=="n"||!lrmm(mdmy,zj9,_8n,b))){g++;d--;__3c(f,-1);hrhg.ship++}}}}return[h,c,g]}function lh1z(){return(r4hn+lyw1+j_d)+"0"}function t22m(){var f=document.sendOrdersForm,g=v_f(),e=q0q();if(!e||e==lh1z()){if(!confirm(STR.CNFM_NO_ORDERS)||!confirm(STR.CNFM_NO_ORDERS2)){return false}else{f.orders.value=lh1z()}}else{if(fjl()==2){var c=xzs1("orders"+g);if(e==c&&!confirm(STR.CNFM_NO_RAVEN)){return false}}else{var d=kqb(g),b=e.length/3,a=q__+t94()-3;if(d>b&&a>b&&!confirm(STR.format(STR.CNFM_USABLE_ORDERS,[b]))){return false}}f.orders.value=e}p170(f.proceed);f.proceed.disabled=true;f.house.value=g;zzn();q1_h();kf06()}function kqb(c){var b=0;c=c;for(var a=0;a<r4hn;a++){if(c==mdmy.charAt(a*8)&&__fb(a)>0){b++}}for(var a=0;a<lyw1;a++){if(c==zj9.charAt(a*2)&&zj9.charAt(a*2+1)!="0"){b++}}for(var a=0;a<j_d;a++){if(c==_p7k(a)&&_qwp(a)>0){b++}}return b}function zzn(){$("orderWindow").style.left=-500;$("orderWindowContent").innerHTML=""}function t94(){var a=[3,3,2,1,0,0],c=ndl(v_f());if(qvxd){a=[3,2,1,0]}try{return a[c-1]}catch(b){return 0}}function gs7(h){var c=0,d=fjl(),e=kbl(h),b=p24(h),g=q0q();if(b==0||(d==4&&knq>=0)){return 0}if((d!=6&&d!=7)&&(d>=8||(__0()&&document.sendOrdersForm)||(h==k89&&g==_hh)||(d>=3&&h!=k89))){if(r48_()||d>=8||(d==4&&h>=r4hn+lyw1)){if(d>=8){k89=-1;g6t();r8h(e)}if(d==3&&r48_()&&e!=v_f()){if(b>=13&&(h<r4hn||h>=(r4hn+lyw1))){w7q_(v_f(),1);if(xg64){w7q_(e,-1)}}}if(d==4||h!=k89){bwxb(e,_lj(q0q(e),h));if(e==v_f()){n_xv=sqz(h,2)+z70(b)}c++;dnm(h)}if(d==4||d==5){q1_h();if(d==4){g03m()}if(d==5&&(!nx_(b)||!mckv())){if(h<r4hn){w7q_(e,1+cvl(h))}else{if(q_kx&&h>=r4hn+lyw1){var f=xsbp[h],a=f.substr(f.indexOf("s")+1,2).r_z();if(rt1h(a)==0||v_f()==d6v8(a)){w7q_(e,1)}}}l_6()}}if(r48_()&&e!=v_f()){g6t();n_h++;if(d==3&&(xg64||p24(k89)!=3)){n_h++}if(d==3&&(n_h==2||h==k89)){e=srf(k89);h=k89}else{$("OrderSelect"+k89).style.left=$("Order"+k89).style.left;$("OrderSelect"+k89).style.top=$("Order"+k89).style.top}}if(d==10||(r48_()&&(n_h==2||h==k89))){kf06();k89=-1;n_h=0}if(d==3&&n_h==1){r8h(v_f());gk5p()}}if(v_f()==e){if(d<8&&g==q0q()){gc6g[b][0]=0;bwxb(e,_lj(g,h));dnm(h);c++}}if(__0()){r59f()}if(d<3&&parseInt($("orderWindow").style.left)>=0){syg(yn_)}}return c}function nw4(b,a){_npz(b,a,false)}function d2v(b,a){_npz(b,a,true)}function _npz(e,d,b){var a=q0q(d),c=_lj(a,e);if(a.length-c.length==3){bwxb(d,c);if(b){dnm(e)}}}function kkwg(a){if(a){nw8x(a)}else{mhkn()}if(d_hs()){return}for(var f=0;f<h_n0;f++){if(a&&a!=___0[f]){continue}var b=__xx(___0[f]),l=q0q(___0[f]);if(__0()&&l=="set"){b=xg_(___0[f],true)}for(var g=0;g<b.length;g++){try{var m=b[g],d=ww_(m,l),n=$("Order"+m),c=gc6g[d][1]+(d==0?___0[f]:""),h=_y_(___0[f]);n.style.left=jll[m][0];n.style.top=jll[m][1];n.title=STR.format(STR.ORDER_OWNER,[h]);hnv(n,"o_map");spy(n,c);if(!__0()&&r48_()&&p24(k89)!=3){p170(n)}if(objClassBak!=n.className){lxxz(n)}}catch(k){continue}}}}function lxxz(a){if(qtzp){a.style.display="none";a.offsetHeight;a.style.display="block"}}function r59f(){var b=q0q();for(var a=1;a<16;a++){gc6g[a][0]=0;if(hg_w(a,b)>=0){gc6g[a][0]=1}}}function _lj(b,e,a){var c=sqz(e,2);a=z70(a);for(var d=0;d<b.length;d+=3){if(c==b.substr(d,2)||(a&&a==b.charAt(d+2))){b=b.substring(0,d)+b.substr(d+3);d-=3}}return b}function lf_y(f,a){var b=sqz(f,2)+z70(a),e=a%3==0,d=_lj(q0q(),lh1z().substr(0,2)),c=-1;_8v();if(d){while((c=d.indexOf(sqz(f,2),c))>=0){if(c%3==0){break}c++}}if(qg0){if(gc6g[a][0]==1){jc0x(STR.RAVEN_ORDER_SWAP)}else{if(d&&(!e||(mtqb<t94())||(c>=0&&d.charAt(c+2).r_z()%3==0))){if(c>-1){d=d.substr(0,c)+d.substr(c+3)}d+=b;if(a>=13&&z_w(f)){jc0x(STR.PLAN_ORDER_NO_EFFECT)}}else{if(!d){d=b}else{jc0x(STR.PLAN_ORDER_LIMIT)}}}}else{if(!e||mtqb<t94()||(c>=0&&d.charAt(c+2).r_z()%3==0)){if(d&&d.charAt(2)!="0"){d=_lj(d,f,a)}d+=b;if(a>=13&&z_w(f)){jc0x(STR.PLAN_ORDER_NO_EFFECT)}}else{if(t94()<1){jc0x(STR.PLAN_NO_SPECIAL)}else{jc0x(STR.PLAN_ORDER_LIMIT)}}}bwxb(v_f(),d);kkwg(v_f());ykl(v_f());zzn();if(__0()){r59f()}}function _8v(){var a=q0q();mtqb=0;for(var b=0;b<a.length;b+=3){if(a&&parseInt(a.charAt(b+2),16)%3==0){mtqb++}}}function rgm(c){var b=$("orderWindow"),a=$("orderWindowContent");syg(c);b.style.left=0;b.style.top=jll[c][1]-150;if(parseInt(b.style.top)>($("WesterosMapImg").offsetHeight-a.offsetHeight)){b.style.top=$("WesterosMapImg").offsetHeight-a.offsetHeight}else{if(c==0){b.style.top=0}}}function x0_n(){var c=v_f();txsb="";for(var b=0;b<r4hn;b++){if(x8pq(b)==c&&__fb(b)>0){txsb+="l"+sqz(b,2)}if(b<lyw1&&d6v8(b)==c&&rt1h(b)>0){txsb+="s"+sqz(b,2)}if(zxk(b)&&x8pq(b)==c){var a=x59(b);if(_qwp(a)>0){txsb+="p0"+a}}}pds_(txsb)}function pds_(a){var d=a.length;for(var h=0;h<d;h+=3){var g="#AAFFAA",b=a.charAt(h),l=a.substr(h+1,2).r_z(),c=b+l,f=$(c);if(b!="l"){g="#BBBBFF"}if(f){try{f.onclick=new Function("qbgq('"+b+"', "+l+")");f.onmouseover=new Function("kz5c(), _q5h('"+c+"', '"+g+"'), vg8(), yt8z('map', '"+c+"')");frjw(f)}catch(k){jc0x("pds_()\n"+k)}_q5h(c,g)}}txsb=a}function q1_h(){var c=[r4hn,lyw1,j_d],b=["l","s","p"];kz5c();for(var d=0;d<3;d++){for(var f=0;f<c[d];f++){var a=$(b[d]+f);try{a.onclick="";a.onmouseover="";p170(a)}catch(g){}}}}function rn_w(b){for(var a=0;a<h_n0;a++){if(!b||b==___0[a]){bwxb(___0[a],xzs1("orders"+___0[a]));kkwg(___0[a])}}}function __xx(d){var c=q0q(d),a=[];for(var b=0;b<c.length;b+=3){var e=c.substr(b,2).r_z();if(e>=0){a.push(e)}}return a}function ykl(c){var a=__xx(c);for(var b=0;b<a.length;b++){g2r("Order"+a[b])}}function nw8x(c){var a=xg_(c,false).concat(xg_("n",false));for(var b=0;b<a.length;b++){dnm(a[b])}}function mhkn(){var a=r4hn+lyw1+j_d;for(var b=0;b<a;b++){dnm(b)}}function r8h(c){var a=__xx(c);for(var b=0;b<a.length;b++){p170("Order"+a[b])}}function kf06(){for(var a=0;a<h_n0;a++){r8h(___0[a])}}function dnm(b){try{ppl(b);l2g("Order"+b)}catch(a){jc0x(a)}}function ppl(b){try{l2g("OrderSelect"+b)}catch(a){jc0x(a)}}function g6t(){var a=r4hn+lyw1+j_d;for(var b=0;b<a;b++){ppl(b)}}function y4w(a){if(_bp(a)){return mhz==7||mhz==10}else{if(a==6){return mhz==12}else{if(g_q_(a)){return mhz==13}else{if(j9n(a)){return mhz==6}else{if(wln(a)){return mhz==8||mhz==11}}}}}return false}function yrs(a){if(!gc6g[a][0]&&!y4w(a)){return true}return false}function syg(b){var c='<table width="210" class="tooltip" border="0" cellpadding="2"><tr><th colspan="3"><span style="font-size:13px"><b>'+_yjt(j2n(b),hwt3(b))+"<br><small>"+STR.PLAN_DLG_SET_ORDER+'</small></b></span></th></tr><tr><td><table width="100%" border="0" cellpadding="3"><tr>';for(var a=1;a<16;a++){if(yrs(a)){c+='<th><div onclick="lf_y('+b+", "+a+')"      class="'+gc6g[a][1]+'"      style="cursor:pointer"></div></th>'}else{c+='<th><img src="./images/order_already_used.gif"></th>'}if(a<15&&a%3==0){c+="</tr><tr>"}}c+='</tr></table></td></tr><tr><td align="center"><span style="font-size:11px">'+STR.PLAN_DLG_SELECT_ORDER+'<br /><u style="cursor:pointer" onclick="zzn()">'+STR.PLAN_DLG_CLOSE+"</u></span></td></tr></table>";$("orderWindowContent").innerHTML=c}function x5f(a){ml70(a,true)}function ml70(d,b){var a=qy_(d),c=a+"0000";if(b&&zwp(d)){c=a+"0002"}mdmy=mdmy.q_fk(d*8,c)}function _7p(c){var a=wm8(c);for(var b=a;b<h_n0;b++){if(khz_(b)){return false}}return true}function h_3v(d,c){if(d.cities<c.cities){return 1}else{if(d.cities>c.cities){return -1}else{if(xzs1("cfg-tbrkr")){if(d.strong<c.strong){return 1}else{if(d.strong>c.strong){return -1}}}if(d.supply<c.supply){return 1}else{if(d.supply>c.supply){return -1}else{if(d.power<c.power){return 1}else{if(d.power>c.power){return -1}else{if(d.throneTrack>c.throneTrack){return 1}return -1}}}}}}return 0}function _ggp(d,c,a,b){this.house=d;this.castle=c[0];this.strong=c[1];this.cities=c[0]+c[1];this.supply=a;this.power=b;this.throneTrack=wm8(d)}function ww6(){var d=[];for(var a=0;a<h_n0;a++){var c=hdyb(___0[a],"castle"),b=hdyb(___0[a],"stronghold");d[a]=new _ggp(___0[a],[c,b],tqz1(___0[a]),lr96(a,true))}d.sort(h_3v);return d}function cm_h(){var c=ww6(),a=c[0].house,b=_y_(a);qg0=true;$("gameStateForm").innerHTML="";$("gameStateText").innerHTML='<center><br/><h3><font color="red">GAME OVER</font></h3><i><b>'+STR.format(STR.GAME_OVER_VICTORY,[b])+"</b></i></center>";$("stats_action").innerHTML='<p style="text-align:center;">-- GAME OVER --</p>';if(v_f()){vp3(a)}}function _qq3(){for(var a=0;a<h_n0;a++){if(hdyb(___0[a],"winPoints")>=w_w3()){cm_h();return true}}return false}function w7q_(c,f){var d=q1tm(c),a=xdr[d][0],e=xdr[d][1],b;if(f>0&&(zh0-a-e)<f){f=(zh0-a-e)}else{if(f<0){if(a+f<0){return 0}xdr[d][1]-=f}}b=a+f;xdr[d][0]=b;$("AvailPower"+c).innerHTML=b;jdq0(d,b);return f}function _zb_(a,g,b){if(a){try{if(typeof b=="number"&&kt4()){b+=r4hn}}catch(f){}for(var d=2;d<a.length;d+=3){for(var c=0;c<g.length;c++){if(a.charAt(d)==g[c]&&(typeof b!="number"||b==a.substr(d-2,2).r_z())){return true}}}}return false}function g03m(){var e=h_n0*mbj,d=h_n0*x9v,c=h_n0*z_84,a=h_n0*_6t;ctk=0;for(var b=0;b<e;b++){sr63[b][0]=false;sr63[b][5]=0;p170(sr63[b][3]);if(sr63[b][6]&&$(sr63[b][3]).className!=sr63[b][1]){hnv(sr63[b][3],sr63[b][1]);lxxz($(sr63[b][3]))}}for(var b=0;b<d;b++){f878[b][0]=false;f878[b][5]=0;p170(f878[b][3]);if(f878[b][6]&&$(f878[b][3]).className!=f878[b][1]){hnv(f878[b][3],f878[b][1]);lxxz($(f878[b][3]))}}for(var b=0;b<c;b++){rvqs[b][0]=false;rvqs[b][5]=0;p170(rvqs[b][3]);if(rvqs[b][6]&&$(rvqs[b][3]).className!=rvqs[b][1]){hnv(rvqs[b][3],rvqs[b][1]);lxxz($(rvqs[b][3]))}}for(var b=0;b<a;b++){p4jb[b][0]=false;p4jb[b][5]=0;p170(p4jb[b][3]);if(p4jb[b][6]&&$(p4jb[b][3]).className!=p4jb[b][1]){hnv(p4jb[b][3],p4jb[b][1]);lxxz($(p4jb[b][3]))}}}function gk5p(d){var e=dlh(),c=[],b=(d||d===0);if(e){c.push(new d86g());return _60(d,c,h2fw(),true)}else{var a=false;if(!b){d=k89;a=p24(d)}c.push(new w40j(d,a))}if(b){k89=d}return t7rr(d,c)}function w40j(b,a){this.areaId=b;this.isRaidAtSeaPossible=b>=r4hn||fjl()==10;this.raidableOrders=[1,2,3,7,8,9,13,14,15];if(xg64&&a&&a==3){this.raidableOrders.push(10);this.raidableOrders.push(11);this.raidableOrders.push(12)}}w40j.prototype.x1nl=function(a,b){return this.raidableOrders.k81j(a)&&(b<r4hn||this.isRaidAtSeaPossible)};function r48_(){return !k89.isNaN&&k89.r_z()>=0}function ltz(d){var b=fjl(),c=srf(d),a=p24(d);if(__0()&&_8k0("Order"+d)){gs7(d)}if(qg0&&b==3&&c!=v_f()&&_8k0("Order"+d)){gs7(d)}else{if(qg0&&c==v_f()&&_hh==q0q()){if(b==3&&_bp(a)){kf06();if(r48_()){rn_w();n_h=0}ysn(d);gk5p();py73(1,3)}else{if(b==4&&m35(a)){if(r48_()&&k89!=d&&(ctk>0||mckv())){_5_(4)}ysn(d)}else{if(b==5&&wln(a)){if(r48_()){_5_(5)}ysn(d);if(nx_(a)&&ynhr(d)&&hkwf(d)>0){s0p(d);l0j();f4z[0][0]=d;f4z[0][1]=hkwf(d);y59();rbp()}}}}}}}function ysn(b){var a=$("OrderSelect"+b);g6t();hnv(a,vh85+" o_map o_select1");a.style.left=$("Order"+b).style.left;a.style.top=$("Order"+b).style.top;k89=b}function bwxb(a,b){switch(a){case"B":x9l=b;break;case"L":mqy=b;break;case"S":rc__=b;break;case"T":bky=b;break;case"G":vdq=b;break;case"M":r5t=b;break;default:break}}function _sf(){var l=0,c=0,n=0,a,f=h_n0*mbj,m=h_n0*x9v,o=h_n0*z_84,g=h_n0*_6t,b=qny.length,h;for(var d=0;d<f;d++){sr63[d][6]=true;if(d<m){f878[d][6]=true}if(d<o){rvqs[d][6]=true}if(d<g){p4jb[d][6]=true}}for(var e=0;e<b;e+=6){a=qny.charAt(e);h=qny.substr(e+1,2).r_z();n=qny.charAt(e+5).r_z();if(h<r4hn){l=qny.charAt(e+3).r_z();c=qny.charAt(e+4).r_z();for(d=f-1;d>=0;d--){if(l>0&&sr63[d][2]==h&&sr63[d][4]==a){sr63[d][6]=false;l--}if(c>0&&d<m&&f878[d][2]==h&&f878[d][4]==a){f878[d][6]=false;c--}if(n>0&&d<o&&rvqs[d][2]==h&&rvqs[d][4]==a){rvqs[d][6]=false;n--}}}else{for(d=g-1;d>=0;d--){if(n>0&&p4jb[d][2]==h-r4hn&&p4jb[d][4]==a){p4jb[d][6]=false;n--}}}}m0fk()}function zxk(b){try{if(q_kx&&xsbp[b].k81j("p")){return true}}catch(a){}return false}function _cjj(h){var e=x59(h);if(e>=0&&_9q5&&xzs1("port").charAt(e)!="0"){var d=x59(yn_),c=parseInt(xzs1("port").charAt(e)),g=_qwp(d),b=parseInt(xzs1("port").charAt(d))-g,a=0;while(c-->0&&b-->0){var f=_8n.q_fk(d,++g);if(lrmm(mdmy,zj9,f)){a++;_8n=f}else{break}}if(a>0){k520()}}_9q5=false}function wgl(c){var b=v_f();if(w7q_(b,-1)==-1){d2d(c,b);ydx7(c,1);z1jx()}w3d();if(zxk(c)){var a=x59(c);if(a+r4hn+lyw1==n_xv.substr(0,2).r_z()){bwxb(b,q0q()+n_xv);kkwg(b)}_8n=_8n.q_fk(a,xzs1("port").charAt(a));k520()}if(knq>=0){d6_()}}function lrmm(g,r,t,b,e){if(!b){b=v_f();if(!b){return false}}else{if(b=="n"){return true}}e=(typeof e==="undefined")?true:e;var a=tqz1(b),n=[0,0,0,0,0],p=0,s=0,q=[],d=g.length,u=r.length;for(var o=0;o<x2_k[a].length;o++){n[x2_k[a][o]]++}for(var m=0;m<d;m+=8){p=parseInt(g.charAt(m+1))+parseInt(g.charAt(m+2))+parseInt(g.charAt(m+3));if(p>1&&g.charAt(m)==b){if(p>4){return false}n[p]--;q.push(p)}}for(var h=0;h<u;h+=2){p=parseInt(r.charAt(h+1));if(r.charAt(h)==b){if(p>1){if(p>4){return false}n[p]--;q.push(p)}s+=p}}if(q_kx){var c=t.length;for(var f=0;f<c;f++){p=parseInt(t.charAt(f));if(p>3){return false}else{if(g.substr(j1zn(f)*8,1)==b){if(p>1){n[p]--;q.push(p)}s+=p}}}}if(s>_6t){return false}for(var o=2;o<5;o++){if((o==2&&n[o]+n[3]+n[4]<0)||(o==3&&n[o]+n[4]<0)||(o==4&&n[o]<0)){return false}}if(e&&b==v_f()){l55y(b,q)}return true}function l55y(d,a){var f=tqz1(d);a.sort();a.reverse();var c=a.pop();for(var b=0;b<x2_k[f].length;b++){var e=$("supplybox"+f+b);hnv(e,"supply_red");e.innerHTML=x2_k[f][b];if(x2_k[f][b]>=c){if(x2_k[f][b]>c){e.innerHTML=c+"/"+x2_k[f][b];hnv(e,"supply_green")}else{hnv(e,"supply_blue")}c=a.pop()}}}function _m_j(){for(var c=0;c<=6;c++){for(var a=0;a<x2_k[c].length;a++){var b=$("supplybox"+c+a);hnv(b,"supply_red");b.innerHTML=x2_k[c][a]}}}function _mwy(r){if(knq>=0){return}r=r.r_z();var l=bzv4(r),m=h_n0*mbj,n=h_n0*x9v,x=h_n0*z_84,k=v_f(),B="",p=_8n,v=false,q=q0q(),z=0,c=0,h=0,w=0,y=0,C,d,f,g;txsb="";for(var u=0;u<m;u++){if(sr63[u][0]){z++;d=sr63[u][2]}}for(var u=0;u<n;u++){if(f878[u][0]){c++;d=f878[u][2]}}for(var u=0;u<x;u++){if(rvqs[u][0]){h++;d=rvqs[u][2]}}f=bzv4(d).q_fk(1,(_mgq(d)-z)+""+(f4v(d)-c)+""+(hgv(d)-h));if(x8pq(r)==k||(__fb(r)==0&&!zwp(r))){if(f.substr(1,4)=="0000"){f=f.q_fk(0,qy_(d))}z=z+_mgq(r);c=c+f4v(r);h=h+hgv(r);C=k+""+z+""+c+""+h+""+l.substr(4,4);if(l.charAt(4)=="1"&&l.charAt(0)!=k){C=C.q_fk(4,0)}B=mdmy.q_fk(r*8,C);B=B.q_fk(d*8,f);var b=x59(r),e=_6t-parseInt($("AvailShip"+k).innerHTML,10);if(b>=0&&e<_6t&&_qwp(b)>0&&mdmy.charAt(r*8)!=k){if((e==0&&(!zxk(d)||_qwp(x59(d))==0||B.charAt(d*8+4)!="0"||B.substr(d*8+1,3)!="000"))||!confirm(STR.CNFM_PORT_TAKEOVER_EASY)){_8n=_8n.q_fk(b,0)}else{var A=_qwp(b),t=0;while(A>e||!lrmm(B,zj9,_8n,null,false)){_8n=_8n.q_fk(b,--A);t++}if(t>0){jc0x(STR.BATTLE_PORT_TAKEOVER);_9q5=true}}}if(v=lrmm(B,zj9,_8n)){mdmy=B;if(B.substr(d*8+1,4)=="0000"){if(jn8(q1tm(k))>0){bq1m(d)}else{fgl(d)}}}else{jc0x(STR.MARCH_SUPPLY)}}else{if(!_y9(x8pq(r))&&(__fb(r)>0||zwp(r))){w=l3_c(r,0);y=l3_c(r,1);if(f.substr(1,4)=="0000"){f=f.q_fk(0,qy_(d))}C=k+z+""+c+""+h+"0"+l.substr(5,3);B=mdmy.q_fk(r*8,C);B=B.q_fk(d*8,f);if(zxk(r)){p=_8n.q_fk(x59(r),0)}if(w>=y&&(v=lrmm(B,zj9,p))){var a=l.charAt(0);if(a!="n"){d2v(r,a);if(zxk(r)){d2v(x59(r)+r4hn+lyw1,a)}}gs7(d);_8n=p;mdmy=B;if(mfnf&&r>=15){l2g("nf"+r)}else{if(r==15){l2g("eyrie")}else{if(r==22){l2g("klanding")}else{if(r==32&&h_n0<6){l2g("sunspear")}}}}if(B.substr(d*8+1,4)=="0000"&&mdmy.substr(d*8+5,3)!="000"){if(jn8(q1tm(k))>0){bq1m(d)}else{fgl(d)}}}else{if(w<y){jc0x(STR.MARCH_WEAKLING)}else{jc0x(STR.MARCH_SUPPLY)}}vg8()}else{C=k+z+c+h+l.substr(4,4);B=mdmy.q_fk(r*8,C);B=B.q_fk(d*8,f);if(zxk(r)){p=_8n.q_fk(x59(r),0)}if(!lrmm(B,zj9,p,null,false)){jc0x(STR.MARCH_SUPPLY_ATTACK)}else{$("battleImg").style.left=_m_h[r][6];$("battleImg").style.top=_m_h[r][7];$("attackerImg").style.left=_m_h[d][6];$("attackerImg").style.top=_m_h[d][7];$("OrderSelect"+d).className=vh85+" o_map o_select2";zp0_=v_f();qc_=x8pq(r);v1s=d;knq=r;xqm=z+""+c+""+h;q1_h();kf06();if(__fb(d)==nlp4()&&krnj(d)==0){if(jn8(q1tm(k))>0){bq1m(d)}else{fgl(d)}}}}}if(v&&knq<0){mdmy=B;if(__fb(d)==0&&!w){gs7(d)}}var s=-1;if(_nf_(d)&&zxk(d)&&mdmy.substr(d*8+1,4)=="0000"){s=r4hn+lyw1+x59(d);if(wcs(s,k)>=0){gs7(s)}jt3(s,0,0,3)}else{if(zxk(d)&&!j8q(d)&&krnj(d)==0&&__fb(d)==0){s=r4hn+lyw1+x59(d);if(wcs(s,k)>=0){gs7(s)}}}if(zxk(r)&&x8pq(r)==k&&xzs1("land").charAt(r*8)!=k){var o=xzs1("land").charAt(r*8);s=r4hn+lyw1+x59(r);if(o!="n"&&q0q(o)==xzs1("orders"+o)&&wcs(s,o)>=0){gs7(s)}jt3(s,0,0,3)}if(knq<0){z471(r,d)}}function z471(b,a){x2x(b,a,true)}function lfhn(b,a){x2x(b,a,false)}function x2x(c,b,a){if(a){z1jx()}if(!a||zxk(c)||zxk(b)){k520()}q1_h();g03m();ldf()}function f0ty(h,o){var g=h_n0*_6t,f=v_f(),v=String(),s=false,n=q0q(),m=n.length,l=0,t=0,u=0,w,b,d,e,c=0;o=parseInt(o,10);txsb="";for(var r=0;r<g;r++){if(p4jb[r][0]){l++;b=p4jb[r][2]}}d=zj9.substr(b*2,2);d=f+(parseInt(d.charAt(1))-l);e=p24(b+r4hn);if(q_kx&&o>=lyw1){o-=lyw1;if(_p7k(o)==f){c=_8n.q_fk(o,_qwp(o)+l);w=f+(parseInt(zj9.charAt(b*2+1))-l);if(w.charAt(1)=="0"){w="n0"}v=zj9.q_fk(b*2,w);if(s=lrmm(mdmy,v,c)){zj9=v;_8n=c}else{jc0x(STR.MARCH_SUPPLY)}}else{jc0x(STR.MARCH_PORT)}}else{if(q_kx&&b>=lyw1){var a=b-lyw1;if(rt1h(o)==0){__3c(a,-1*l);qk5p(o,l);__j7(o,f);s=true;lrmm(mdmy,v,c)}else{if(knq<0&&parseInt(h.substr(1,2),10)>0&&!_y9(h.charAt(0))){u=parseInt(h.charAt(1));t=l+r8x(o+r4hn,f);if(e==6){t+=1}else{if(e==4){t-=1}}c=_8n.q_fk(a,_qwp(a)-l);v=zj9.q_fk(o*2,f+""+l);if(s=lrmm(mdmy,v,c,null,false)&&t>=u){zj9=v;_8n=c;gs7(a+r4hn+lyw1)}else{if(t<u){jc0x(STR.MARCH_WEAKLING)}else{jc0x(STR.MARCH_SUPPLY)}}vg8()}else{if(h.charAt(0)==f){c=_8n.q_fk(a,_qwp(a)-l);l=rt1h(o)+l;v=zj9.q_fk(o*2,f+""+l);if(s=lrmm(mdmy,v,c)){zj9=v;_8n=c}else{jc0x(STR.MARCH_SUPPLY)}}else{if(knq<0&&_y9(h.charAt(0))){for(var p=0;p<g;p++){if(p4jb[p][0]){mnv_(f+"SP"+p,"_select")}}$("battleImg").style.left=f2l[o][6];$("battleImg").style.top=f2l[o][7]+4;$("attackerImg").style.left=brg[a][0]-6;$("attackerImg").style.top=brg[a][1]-32;$("OrderSelect"+(a+r4hn+lyw1)).className=vh85+" o_map o_select2";zp0_=f;qc_=zj9.charAt(o*2);v1s=a+lyw1;knq=o;xqm=l;q1_h();kf06()}}}}if(_qwp(a)==0){d="p0"}}else{if(knq<0&&(h.charAt(0)=="n"||h.charAt(0)==f)){if(parseInt(d.substr(1,2),10)<=0){d="n0"}l=l+parseInt(zj9.charAt(o*2+1));w=f+l;v=zj9.substr(0,o*2)+w+zj9.substr(o*2+2);v=v.substr(0,b*2)+d+v.substr(b*2+2);if(s=lrmm(mdmy,v,_8n)){zj9=v}else{jc0x(STR.MARCH_SUPPLY)}}else{if(knq<0&&h.charAt(1)!="0"&&!_y9(h.charAt(0))){u=parseInt(h.charAt(1));t=l;if(e==6){t+=1}if(e==4){t-=1}t+=r8x(o+r4hn,f);if(parseInt(d.substr(1,2),10)<=0){d="n0"}w=f+l;v=zj9.substr(0,o*2)+w+zj9.substr(o*2+2);v=v.substr(0,b*2)+d+v.substr(b*2+2);if(s=lrmm(mdmy,v,_8n,null,false)&&t>=u){zj9=v;gs7(b+r4hn);d2v(o+r4hn,h.charAt(0))}else{if(t<u){jc0x(STR.MARCH_WEAKLING)}else{jc0x(STR.MARCH_SUPPLY)}}vg8()}else{if(knq<0){for(var q=0;q<g;q++){if(p4jb[q][0]){mnv_(f+"SP"+q,"_select")}}w=f+l;v=zj9.substr(0,o*2)+w+zj9.substr(o*2+2);v=v.substr(0,b*2)+d+v.substr(b*2+2);if(!lrmm(mdmy,v,_8n,null,false)){jc0x(STR.MARCH_SUPPLY_ATTACK)}else{$("battleImg").style.left=f2l[o][6];$("battleImg").style.top=f2l[o][7]+4;$("attackerImg").style.left=f2l[b][6];$("attackerImg").style.top=f2l[b][7]+3;$("OrderSelect"+(b+r4hn)).className=vh85+" o_map o_select2";zp0_=f;qc_=zj9.charAt(o*2);v1s=b;knq=o;bzm=l3_c(o+r4hn,0);cqq1=l3_c(o+r4hn,1);xqm=l;q1_h();kf06()}}}}}}if(s&&knq<0&&parseInt(d.charAt(1))<=0&&!t){gs7(b+r4hn)}if(knq<0){lfhn(o,b)}}function vxm6(){if(_hh==q0q()){jc0x(STR.CP_ACTION);return false}var b=document.cpOrdersForm,a=q1tm(v_f());b.proceed.disabled=true;document.revokeForm.elements[0].disabled=true;if(mckv()){if(!lrmm(mdmy,zj9,_8n)){jc0x(STR.EVT_MUSTER_LOW_SUPPLY);return false}l_6();b.routedunits.value=qny;b.land.value=mdmy;b.sea.value=zj9;b.port.value=_8n}else{if(x__!=xzs1("houses")||xdr[a][0]+xdr[a][1]==zh0){b.hpositions.value=k1py(q1tm(v_f()))}}b.orders.value=q0q()}function py73(e,d){var g=q0q();for(var f=0;f<g.length;f+=3){var c=g.charAt(f+2).r_z();if(c.vxn0(e,d)){var h=g.substr(f,2).r_z();g2r("Order"+h)}}}function tcb(){var h=fjl(),l=_vn(),k=v_f(),f='<input type="hidden" name=',c=' target="setDataFrame" action="./setGameData.php?game='+yt_+"&crc="+mm52,m="";w3d();if(l==k&&wwp()){qg0=true;kwjj();gppp();m='<form name="eventForm"'+c+'" onsubmit="return j3s()" method="post">'+f+'"eventChoice">'+f+'"eventDeck"></form>'}else{if(l==k&&__h()){qg0=true;nsyf();s0p(false);wqh(k);y59();rbp();m='<form name="eventForm"'+c+'" onsubmit="return fd_()" method="post">'+f+'"land">'+f+'"sea">'+f+'"ports"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>'}else{if(l==k&&mn5l()){qg0=true;kwjj();r1fr();m='<form name="eventForm"'+c+'" onsubmit="return _t9()" method="post">'+f+'"house" value="'+v_f()+'">'+f+'"positions">'+f+'"land">'+f+'"sea">'+f+'"ports">';if(!lrmm(mdmy,zj9,_8n)){__p=15;hfq();m+='<input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')">'}m+="</form>"}else{if(k==l&&mvxd()){qg0=true;nsyf();m='<form name="eventForm"'+c+'" onsubmit="return _t9()" method="post">'+f+'"Baratheon">'+f+'"Lannister">'+f+'"Stark">'+f+'"Tyrell">'+f+'"Greyjoy">'+f+'"Martell"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>';fjnq()}else{if(q89()){qg0=false;var g=xzs1("bidcount")>=h_n0;if(k&&!g){kwjj();l82();$("menue").innerHTML="";if(v_f()&&xdr[q1tm(v_f())][0]>0){dsqw=-1;m='<form name="eventForm"'+c+'" onsubmit="return z865()" method="post">'+f+'"bidvalue"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>';nvwc();_jjv("CoK Bid")}else{dsqw=0;m=STR.STATUS_WAITING}}else{if(g&&tj4(k)){qg0=true;kwjj();l82();$("menue").innerHTML='<small>&#160;<a href="javascript:z89x()">'+STR.DLG_MENU_BIDS+"</a> |</small>";m='<form name="eventForm"'+c+'" onsubmit="return _t9()" method="post">'+f+'"track" value='+rxl+">"+f+'"Baratheon">'+f+'"Lannister">'+f+'"Stark">'+f+'"Tyrell">'+f+'"Greyjoy">'+f+'"Martell"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>';kqy();z89x()}else{m=STR.EVT_CLASH_WAITING;l82();if(g){$("menue").innerHTML='<small>&#160;<a href="javascript:z89x()">'+STR.DLG_MENU_BIDS+"</a> |</small>";kqy();z89x()}}}}else{if(d0bb()){var g=xzs1("bidcount")>=h_n0;qg0=false;kkb9();if(!g){if(v_f()&&xdr[q1tm(v_f())][0]>0){kwjj();dsqw=-1;m='<form name="eventForm"'+c+'" onsubmit="return z865()" method="post">'+f+'"bidvalue"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>';nvwc();_jjv("Wildling Attack")}else{dsqw=0;m=STR.STATUS_WAITING}}else{var n=dy_();if($("menue").innerHTML.length<25){$("menue").innerHTML='<small>&#160;<a href="javascript:z89x()">'+STR.DLG_MENU_BIDS+"</a> |</small>";z89x()}m="<b><i>"+STR.PHASE_TITLE_EVENTS+": ("+STR.EVT_DECK+" 3)</i></b><br>";if(n==0||n==1){m+="<small><b>"+STR.EVT_WILDLINGS+"(2):</b></br>"+STR.EVT_WILDLINGS_LOST+"</small>"}else{m+="<small><b>"+STR.EVT_WILDLINGS+"(2):</b></br>"+STR.EVT_WILDLINGS_WIN+"</small>"}$("gameStateText").innerHTML=m;m="";if(n>0&&!tj4(k)){m=STR.STATUS_WAITING_THRONE}else{if(k&&n<=0){var e=xzs1("ordersall");if(n==0&&(q0q()||(!e&&cv2_[0]==xzs1("bid"+k)))){qg0=true;kwjj();t7vm=q56p(v_f());j_t()}else{if(n==0){for(var d=0;d<h_n0;d++){var b=___0[d];if(q0q(b)||(!e&&cv2_[0]==xzs1("bid"+b))){l=b}}if(l){m=STR.format(STR.STATUS_WAITING_NAME,[wyv(l)])}}else{if(n<0&&k==l){qg0=true;kwjj();hfq();m='<form name="eventForm"'+c+'" onsubmit="return _t9()" method="post">'+f+'"house" value="'+v_f()+'">'+f+'"positions">'+f+'"land">'+f+'"sea">'+f+'"ports"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>';__p=2;if(q0q()=="1"||(!e&&cv2_[0]==xzs1("bid"+k))){__p=4}var a="You have to remove "+__p+" Mustering Points.";if(__p==2){a+="\nHouse "+_0_()+" was chosen to remove 4..."}jc0x(a)}else{m=STR.format(STR.STATUS_WAITING_NAME,[wyv(l)])}}}}}}}else{if(h==3&&l==k){qg0=true;m='<form name="raidOrdersForm"'+c+'" onsubmit="return g74p()" method="post">'+f+'"ordersB">'+f+'"ordersL">'+f+'"ordersS">'+f+'"ordersT">'+f+'"ordersG">'+f+'"ordersM">'+f+'"house">'+f+'"housepositions"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>';py73(1,3);nsyf()}else{if(h==4&&l==k){qg0=true;m='<form name="marchOrdersForm"'+c+'" onsubmit="return _0l()" method="post">'+f+'"takeover" value=1>'+f+'"ordersB">'+f+'"ordersL">'+f+'"ordersS">'+f+'"ordersT">'+f+'"ordersG">'+f+'"ordersM">'+f+'"land">'+f+'"sea">'+f+'"ports">'+f+'"house">'+f+'"housepositions">'+f+'"boarea">'+f+'"btarea">'+f+'"bstrattacker">'+f+'"bstrdefender">'+f+'"baunits"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>';_5_(4);nsyf()}else{if(h==5&&k==l&&xg64){qg0=true;z1jx();k520();py73(13,15);nsyf();m='<form name="cpOrdersForm"'+c+'" onsubmit="return vxm6()" method="post">'+f+'"land">'+f+'"sea">'+f+'"port">'+f+'"hpositions">'+f+'"orders">'+f+'"routedunits"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+h+')"></form>'}else{if(!k||(h<6&&k)){m=STR.format(STR.STATUS_WAITING_NAME,[wyv(l)])}}}}}}}}}}if(m!=""){$("gameStateForm").innerHTML=m}}function ldf(){var e=q0q(0),k=e.length,m=q1tm(v_f()),h=m*mbj,b=m*x9v,d=m*z_84,l=m*_6t;for(var g=0;g<k;g+=3){var a=parseInt(e.substr(g,2),10),c=parseInt(e.charAt(g+2),16);if(a<r4hn){for(var f=h;f<h+mbj;f++){if(sr63[f][6]&&sr63[f][2]==a){sr63[f][5]=c}}for(var f=b;f<b+x9v;f++){if(f878[f][6]&&f878[f][2]==a){f878[f][5]=c}}for(var f=d;f<d+z_84;f++){if(rvqs[f][6]&&rvqs[f][2]==a){rvqs[f][5]=c}}}else{for(var f=l;f<l+_6t;f++){if(p4jb[f][6]&&p4jb[f][2]==a-r4hn){p4jb[f][5]=c}}}}}function c501(a){var b,c=v_f();if(a==847713){c=l7y(knq);if(d8dm()){b=knq}else{b=knq+r4hn}}bnj(b,c,a)}function bnj(r,a,c){if(ctk==1||c==847713){if(c<16){var q=q0q();for(var o=0;o<q.length;o+=3){if(c==parseInt(q.charAt(o+2),16)){r=parseInt(q.substr(o,2),10);ltz(r);break}}}txsb=xsbp[r];var s=txsb.length;if(r<r4hn){var g,p=zj9.length;for(var e=0;e<s;e+=3){if(txsb.charAt(e)=="s"){for(var h=0;h<p;h+=2){if(zj9.charAt(h)==a&&(parseInt(txsb.substr(e+1,2),10))==(h/2)){g=xsbp[parseInt(txsb.substr(e+1,2),10)+r4hn];for(var b=0;b<s;b+=3){g=g.replace(txsb.substr(b,3),"")}txsb+=g;s+=g.length}}}}for(var f=0;f<s;f+=3){while(txsb.charAt(f)=="s"||txsb.charAt(f)=="p"||txsb.substr(f,3)=="l"+sqz(r,2)){txsb=txsb.replace(txsb.substr(f,3),"");s-=3}}}else{if(r>=r4hn){r-=r4hn;for(var d=0;d<s;d+=3){while(txsb.charAt(d)=="l"||txsb.substr(d,3)=="s"+sqz(r,2)){txsb=txsb.replace(txsb.substr(d,3),"");s-=3}}}}if(c!=847713&&s>0){pds_(txsb)}}else{if(ctk<=0){txsb=""}}}function _0l(){if($("playerMessageContent").innerHTML.indexOf(STR.CNFM_INVEST_PT.substr(10,15),0)>0){jc0x(STR.MARCH_POWER);return false}if(knq<0&&_hh==q0q()){jc0x(STR.MARCH_ACTION);return false}else{if(!lrmm(mdmy,zj9,_8n,null,false)){jc0x(STR.MARCH_SUPPLY);_5_(4);return false}else{var d,m=v_f(),h=document.marchOrdersForm;if(q_kx&&knq>=0&&d8dm()){d=x59(knq)}document.forms.marchOrdersForm.takeover.value=1;if((p0j(m)==_6t&&(!v1s||v1s<0||!zxk(v1s)||_qwp(x59(v1s))==0||npy(v1s)||__fb(v1s)>nlp4()))||(d>=0&&_qwp(d)>0&&!confirm(STR.CNFM_PORT_TAKEOVER))){document.forms.marchOrdersForm.takeover.value=0}h.proceed.disabled=true;document.revokeForm.elements[0].disabled=true;h.ordersB.value=x9l;h.ordersL.value=mqy;h.ordersS.value=rc__;h.ordersT.value=bky;h.ordersG.value=vdq;if(h_n0==6){h.ordersM.value=r5t}h.land.value=mdmy;h.sea.value=zj9;h.ports.value=q_kx?_8n:"";h.house.value=m;h.housepositions.value=k1py(q1tm(m));h.baunits.value="";if(knq>=0){if(q0q(m)!=xzs1("orders"+m)){jc0x(STR.ERR_ORDER_REMOVED);return false}vg8();var b=knq,c=d7v(),n=lrg1(),a=n1q(),g=yvg(),k=z_84>0?STR.BATTLE_UNITS_LIST2:STR.BATTLE_UNITS_LIST,f=g>0?g+" "+STR.UNIT_SHIPS:STR.format(k,[c,n,a]),l=_yjt(v1s,g>0?"s":"l"),e=_yjt(knq,g>0?"s":"l");if(g>0){b+=r4hn;if(v1s>=lyw1){l=_yjt(v1s-lyw1,"p")}}if(!confirm(STR.format(STR.CNFM_ATTACK,[e,l,f]))){_5_(4);h.proceed.disabled=false;document.revokeForm.elements[0].disabled=false;return false}h.boarea.value=v1s;h.btarea.value=knq;h.bstrattacker.value=l3_c(b,0);h.bstrdefender.value=l3_c(b,1);h.baunits.value=xqm;knq=-1}}}}function g74p(){if(_hh==q0q()){jc0x(STR.RAID_ACTION);return false}else{var a=document.raidOrdersForm;a.proceed.disabled=true;document.revokeForm.elements[0].disabled=true;a.ordersB.value=x9l;a.ordersL.value=mqy;a.ordersS.value=rc__;a.ordersT.value=bky;a.ordersG.value=vdq;if(h_n0==6){a.ordersM.value=r5t}a.house.value=v_f();a.housepositions.value=k1py(q1tm(v_f()))}}function fl2g(a){if(a==pmj()){return true}return false}function wzw(){if(fjl()==8&&c2ts!=1&&(s7n()==false||(c2ts!=2&&gxb()))){var b=j_9(zp0_),a=j_9(qc_);if((xz80(zp0_)&&((gxb()&&c2ts==0)||(b<a&&cqq1-bzm==1)||(b>a&&cqq1==bzm)))||(xz80(qc_)&&((gxb()&&c2ts==0)||(a<b&&bzm-cqq1==1)||(a>b&&cqq1==bzm)))){return true}}return false}function tc0(b){var c=v_f(),a=xzs1("stolentokens");if(b=="throne"){a=c+""+a.substr(1,2)}else{if(b=="blade"){a=a.charAt(0)+""+c+""+a.charAt(2)}else{if(b=="raven"){a=a.substr(0,2)+""+c}}}document.phaseAForm.stolentokens.value=a}function y90(d){var b=-1,a;if(d>=r4hn){a=zj9.substr((d-r4hn)*2,1)}else{a=mdmy.charAt(d*8)}while(++b<h_n0){var c=___0[b];if(c!=v_f()&&c!=a&&(r8x(d,c)>0||(d<r4hn&&yyn(d,c)>0))){return true}}return false}function yyn(b,a){return _bt(b,a,0)}function gtw(b,a){return _bt(b,a,2)}function j_r(b,a){return _bt(b,a,3)}function pnzz(b,a){return _bt(b,a,4)}function _bt(p,b,l){var o=q0q(b),c=0,m=0,k=0,n=0;if(fjl()>5&&kt4()){return 0}for(var h=0;h<xsbp[p].length;h+=3){if(xsbp[p].charAt(h)=="l"){for(var g=0;g<o.length;g+=3){var e=o.charAt(g+2),f=o.substr(g,2).r_z(),r=xsbp[p].substr(h+1,2).r_z();if(g_q_(e)&&f==r&&x8pq(r)==b){var d=_mgq(r)-j3n(r),q=f4v(r)-nkcs(r),a=hgv(r)-nwz(r);k+=q;if(a>0&&x8pq(p)!=x8pq(r)){n+=a}if(mhz!=9){m+=d}if(e=="9"){c++}}}}}switch(l){case 1:return n+k+m;case 2:return m;case 3:return k;case 4:return n;case 9:return c;default:break}return c+m+k*2+(n>0&&_5fv(p)?n*4:0)}function b0t_(f,d){var a=q0q(d),e=xsbp[f],b="";if(kt4()){e=xsbp[f+r4hn]}for(var c=0;c<e.length;c+=3){if(e.charAt(c)=="s"||(e.charAt(c)=="p"&&kt4())){b+=e.substr(c,3)}}return gpt3(b,a,"9")}function gpt3(f,b,e){var g,a;for(var d=0;d<f.length;d+=3){g=parseInt(f.substr(d+1,2),10);if(f.charAt(d)!="l"){g+=r4hn;if(f.charAt(d)=="p"){g+=lyw1}}for(var c=0;c<b.length;c+=3){a=b.charAt(c+2);if(e.k81j(a)&&b.substr(c,2).r_z()==g){return true}}}return false}function pcxp(b,a){return z_h(b,a,1)}function r8x(b,a){return z_h(b,a,0)}function z_h(o,a,h){var c,n=q0q(a),b=0,p=0,k=0;if(fjl()>=6&&kt4()){c=xsbp[o+r4hn]}else{c=xsbp[o]}for(var e=0;e<c.length;e+=3){var g=parseInt(c.substr(e+1,2),10);if(c.charAt(e)=="s"){for(var f=0;f<n.length;f+=3){var d=parseInt(n.charAt(f+2),16);if(g+r4hn==parseInt(n.substr(f,2),10)&&d>=7&&d<=9&&zj9.charAt(g*2)==a){var m=parseInt(zj9.charAt(g*2+1))-n_wv(g);k+=m;if(d==9){b++}}}}else{if(c.charAt(e)=="p"&&(o>=r4hn||(fjl()>=6&&kt4()))){for(var f=0;f<n.length;f+=3){var d=parseInt(n.charAt(f+2),16);if((g+r4hn+lyw1)==parseInt(n.substr(f,2),10)&&d>=7&&d<=9&&_p7k(g)==a){var m=_qwp(g)-n_wv(g+lyw1);p+=m;if(d==9){b++}}}}}}switch(h){case 1:return k+p;case 2:return k;case 2:return p;case 4:return b;default:break}return b+k+p}function kbk(){for(var a=0;a<h_n0*mbj;a++){if(sr63[a][0]){return sr63[a][2]}if(a<h_n0*x9v&&f878[a][0]){return f878[a][2]}if(a<h_n0*z_84&&rvqs[a][0]){return rvqs[a][2]}if(a<h_n0*_6t&&p4jb[a][0]){return p4jb[a][2]}}return 0}function l3_c(k,l){var o=q0q(),q,n,a=0,d=0,c=0,m=0,b,f,p,h=[0,0];for(var g=0;g<mbj*h_n0;g++){if(sr63[g][0]){a++;q=sr63[g][2]}if(g<x9v*h_n0&&f878[g][0]){d++;q=f878[g][2]}if(g<z_84*h_n0&&rvqs[g][0]){c++;q=rvqs[g][2]}if(g<_6t*h_n0&&p4jb[g][0]){m++;q=p4jb[g][2]}}if(m==0){n=x8pq(k);h[0]+=a+d*2+c*(_5fv(k)?4:0)+yyn(k,v_f())+r8x(k,v_f());h[1]+=_mgq(k)+f4v(k)*2+yyn(k,n)+r8x(k,n)-j3n(k)-nkcs(k)*2;if(zwp(k)){h[1]+=2}}else{n=d6v8(k-r4hn);h[0]+=m+r8x(k,v_f());h[1]+=rt1h(k-r4hn)+r8x(k,n)-n_wv(k-r4hn)}q=m==0?sqz(q,2):""+(q+r4hn);for(var e=0;e<o.length;e++){if(o.substr(e*3,2)==q){b=o.charAt(e*3+2);if(b=="4"){h[0]-=1}else{if(b=="6"){h[0]+=1}}break}}p=q0q(n);for(var g=0;g<p.length;g++){if(p.substr(g*3,2)==sqz(k,2)){f=p.charAt(g*3+2);break}}if(f=="A"||f=="B"){h[1]+=1}else{if(f=="C"){h[1]+=2}}if(l==0||l==1){return h[l]}return h}function __8(a,h,b,f){qny=xzs1("routedunits");for(var c=0;c<qny.length;c+=6){var k=qny.charAt(c),l=parseInt(qny.substr(c+1,2),10);if(k!=srf(l)){qny=qny.substr(0,c)+qny.substring(c+6,qny.length)}}if(!(f instanceof Array)){return}if(d8dm()){h=sqz(h,2);b=sqz(b,2)}else{h+=r4hn;b+=r4hn}try{if(hk_s()){var g=qny.indexOf(a+b);if(g>=0&&h!=b){qny=qny.substr(0,g)+qny.substring(g+6,qny.length)}}if(d8dm()){bz7p(h,a,f[0]);k_x(h,a,f[1]);bx77(h,a,f[2])}else{_qz(h,a,f[2])}}catch(d){}}function ym_l(a){g_w_(a,false)}function g_w_(r,a){var b=hk_s(),B=b||zp0_=="S",D=B?qc_:zp0_,u=B?zp0_:qc_,m=B?knq:v1s,g=B?v1s:knq,C=g,n=kt4()?d6v8(m):x8pq(m),h=[0,0,0];r=parseInt(r,10);if(!a){txsb="";q1_h()}if(d8dm()){var p,x,F,A,y,E=_mgq(m),w=f4v(m),z=hgv(m),l=d7v(),q=lrg1(),d=n1q();if(!B){n=nnlv();E=l;w=q;z=d;C=m}if(!B||r!=m){p=E;x=w;hrhg.siege+=z;if(B){A=j3n(m);y=nkcs(m);p-=A;x-=y;hrhg.trooper+=A;hrhg.knight+=y}h=[p,x,0];if(p+x>0){wm0(r,p);h5b_(r,x);d2d(r,n)}else{if(krnj(r)==0&&__fb(r)==0){x5f(r)}}}else{if(!a){j0x[4]+=E;j0x[5]+=w;j0x[6]+=z}}if(x_2g()){p=_mgq(C)-l;x=f4v(C)-q;F=hgv(C)-d;if(p+x+F>0){k_0(C,p);w9g(C,x);_n9(C,F)}else{if(!npy(C)){x5f(C)}else{k_0(C,0);w9g(C,0);_n9(C,0)}}}if(B){ml70(m,false);if(x_2g()&&l+q+d>0){d2d(m,u);k_0(m,l);w9g(m,q);_n9(m,d)}}else{k_0(C,p);w9g(C,x)}if(!lrmm(mdmy,zj9,_8n,n,!a)){if(!a){jc0x(STR["BATTLE_RETREAT_SUPPLY"+(b?"":"2")])}if(E+w>0){var c=jt3(r,E,w,0);h[0]-=c[0];h[1]-=c[1]}j0x[2]+=z}if(q_kx){var s=false;if(zxk(m)){yfn(m,a);s=true}if(zxk(C)){yfn(C,a);s=true}if(!a&&s){k520()}}if(!a){__8(n,r,m,h);g03m();z1jx()}}else{var o=r>=lyw1,v=yvg(),e=m>=lyw1?_qwp(m-lyw1):rt1h(m),f=e;if(!B){n=nnlv();e=v;f=e;C=m}if(o||!B||r!=m){f-=B?n_wv(m):0;h=[0,0,f];if(C!=r){if(o){f+=_qwp(r-lyw1);tpwj(r-lyw1,f)}else{f+=rt1h(r);lcy(r,f);__j7(r,n)}}}else{if(!a){j0x[7]+=e}}if(x_2g()&&C!=r){if(C<lyw1){f=rt1h(C)-v;lcy(C,f)}else{__3c(C-lyw1,-1*v)}}if(B){if(x_2g()&&v>0){lcy(m,v);__j7(m,u)}else{lcy(m,0)}}else{if(C<lyw1&&C!=r){lcy(C,f)}}if(!lrmm(mdmy,zj9,_8n,n,!a)){if(!a){jc0x(STR["BATTLE_RETREAT_SUPPLY"+(b?"":"2")])}if(e>0){var c=jt3((r+r4hn),0,0,e);h[2]-=c[2]}}if(!a){__8(n,r,m,h);g03m();k520()}}if(!a){p170("WesterosMapImg");cj30();m+=d8dm()?0:r4hn;if(l4_9(D,m)){gs7(m)}kkwg(D);kkwg(u)}}function cj30(){l2g("battleImg");l2g("attackerImg")}function cxj(){kkb9();cj30();knq=-1}function w4m(){for(var a=0;a<8;a++){j0x[a]=0}}function k3_(a){if(a==2){return true}return false}function yjy(){return fjl()>7&&gxb()&&(sn_n()||(!z2_f()&&!_qf("G1")&&!_qf("T1")&&!_qf("M1")))}function wr0(){var h=[d0sg(),j6y0()],a=[nt2(),sq1v()],g=[knq,v1s];while(a.length>0){var f=0,m=h.pop(),d=a.pop(),n=g.pop(),e=n!=knq;if(k3_(d)&&!(wvf()&&m=="S2")){if(kt4()){var k=!e?rt1h(n):yvg(),l=zzf(n+r4hn);if(k>0){f=7;if(l){__3c(n-lyw1,-1)}else{qk5p(n,-1)}if(e){n5sz(-1)}if(!e&&k==1){d2v(n+r4hn,qc_)}k520()}}else{var c=!e?_mgq(n):d7v(),p=!e?f4v(n):lrg1(),o=!e?hgv(n):n1q(),b=c+p+o==1;if(c>0){f=4;wm0(n,-1);if(e){msmq(-1)}}else{if(p>0){f=5;h5b_(n,-1);if(e){_c_(-1)}}else{if(o>0){f=6;rf6(n,-1);if(e){q_6(-1)}}}}if(b){if(!e){d2v(n,qc_)}if(krnj(n)==0&&__fb(n)==0){x5f(n);if(zxk(n)){k5nx(n);k520()}}}z1jx()}if(f>0){j0x[f]+=1}}}}function s77f(b){var a=y1t9(b);switch(a){case 4:return -1;case 3:return 1;default:break}return 0}function y9jk(a){if(!a.vxn0(0,6)){a=0}return ntsr+a}function t__(a){if(gxb()){switch(a){case 6:return 3;case 5:return 2;case 4:return 1;case 3:return 1;default:break}}return 0}function d_4(){r_pg=0;rf36=0;hrhg=new m4m();w4m();zp0_=nnlv();qc_=msgj();v1s=xzs1("originarea");knq=xzs1("targetarea");xqm=xzs1("attackingunits");bzm=xzs1("attackerstr")+xzs1("attackersupport")+t__(nt2());cqq1=xzs1("defenderstr")+xzs1("defendersupport")+t__(sq1v());if(fjl()>8&&xzs1("steelbladeused")==1){if(xz80(zp0_)){bzm+=1}else{if(xz80(qc_)){cqq1+=1}}}}function rh0(b){var a=0;for(var c=0;c<b.length;c++){if(b0t_(knq,b.charAt(c))){a++}}return a}function wcs(g,f){var b=q0q(f),a=b.length/3,e=d8dm(),c;if(knq>=0){for(var d=0;d<a;d++){c=parseInt(b.substr(d*3,2),10);if((e&&c==g)||(!e&&c==g+r4hn)){return d}}}else{for(var d=0;d<a;d++){c=parseInt(b.substr(d*3,2),10);if(c==g||c==g+r4hn||c==g+r4hn+lyw1){return d}}}return -1}function _m_7(b,a){return k_s(b,a,false)}function k_s(o,e,a){var t=d7v(),m=lrg1(),s=yvg();if(kt4()){var n=0,p=s;if(o!=v1s){p=o<lyw1?rt1h(o):_qwp(o-lyw1);if(!a&&o==knq){var b=n_wv(o),r=srf(o+r4hn);n+=b;_qz(o,r,-1*b)}}while(e>0){if(p>n&&(v1s!=o||s>n)){n++}e--}if(n>0){j0x[3]+=n;s-=n;if(o==v1s){rqy(p-n)}if(o<lyw1){qk5p(o,-1*n);if(rt1h(o)==0){if(o==knq){gs7(o+r4hn)}}}else{if(q_kx){__3c(o-lyw1,-1*n)}}k520()}}else{var c=0,d=0,l=0,f=_mgq(o),h=f4v(o),g=hgv(o);if(!a&&o==knq){var k=srf(o),q=j3n(o);routedKnights=nkcs(o);c+=q;d+=routedKnights;bz7p(o,k,-1*q);k_x(o,k,-1*routedKnights)}else{if(o==v1s){g=n1q();if(a){f=d7v();h=lrg1()}else{l=g}}}while(e>0){if(a&&h>d){d++}else{if(a&&g>l){l++}else{if(f>c&&(v1s!=o||t>c)){c++}else{if(h>d&&(v1s!=o||m>d)){d++}}}}e--}if(c+d+l>0){j0x[0]+=c;j0x[1]+=d;j0x[2]+=l;if(o==v1s){t-=c;m-=d;mp_6(f-c);ggn1(h-d);l6ql(g-l)}if(npy(o)||__fb(o)>c+d+l){wm0(o,-1*c);h5b_(o,-1*d);rf6(o,-1*l)}else{x5f(o);if(o==knq){gs7(o)}if(zxk(o)&&(o==v1s||xzs1("takeover")==0)){k5nx(o);k520()}}z1jx()}}if(o==v1s){return[t,m,s]}return[0,0,0]}function v5vq(p){var g=d8dm(),b="",d=mdmy,m=zj9,c=_8n,n=hrhg.ship,l=4,a=4;for(var f=0;f<p.length;f+=3){var k=p.charAt(f)=="p",o=p.substr(f+1,2).r_z(),h=0,e=0;if(g){if(o!=v1s){e=-1*__fb(o)}g_w_(o,true);e+=__fb(o);h=hrhg.trooper+hrhg.knight;hrhg.trooper=0;hrhg.knight=0;hrhg.siege=0;mdmy=d}else{if((!k?o:o+lyw1)!=v1s){e=-1*(k?_qwp(o):rt1h(o))}g_w_(!k?o:o+lyw1,true);e+=k?_qwp(o):rt1h(o);h=hrhg.ship-n;hrhg.ship=n;zj9=m;_8n=c}if(l>h){l=h}if(e>0&&a>=h){if(a>h){b="";a=h}b+=p.substr(f,3)}}lrmm(mdmy,zj9,_8n);return b}function l7y(a){return d8dm()?x8pq(a):d6v8(a)}function fc0(e){var g="",c=!kt4();if(c){for(var b=1;b<txsb.length;b+=3){var d=txsb.substr(b,2).r_z(),a=mdmy.charAt(d*8);if(txsb.charAt(b-1)=="l"&&d!=v1s&&(a==e||(a=="n"&&mdmy.substr(d*8+1,4)=="0000"))){var f="l"+d;if(!$(f)){continue}g+=txsb.substr(b-1,3)}}}else{for(var b=1;b<txsb.length;b+=3){var d=parseInt(txsb.substr(b,2),10),a=zj9.charAt(d*2);if((txsb.charAt(b-1)=="p"&&_p7k(d)==e)||(txsb.charAt(b-1)=="s"&&d!=v1s&&(a=="n"||a==e))){g+=txsb.substr(b-1,3)}}}v1s=xzs1("originarea");if(g){g=v5vq(g)}if(g.length>3){pds_(g)}txsb=g;return g}function j2_1(){$("battleFormWrapper").style.display="";qg0=true}function kr9(a){message='<br><center><table style="display:none" id="battleFormWrapper"><tr><td><form name="finishBattleForm" action="./setGameData.php?sendorders=1&game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return t93()" method="post"><input type="hidden" name="steelblade"><input type="hidden" name="textability"><input type="hidden" name="ordersB"><input type="hidden" name="ordersL"><input type="hidden" name="ordersS"><input type="hidden" name="ordersT"><input type="hidden" name="ordersG"><input type="hidden" name="ordersM"><input type="hidden" name="land"><input type="hidden" name="sea"><input type="hidden" name="ports"><input type="hidden" name="house"><input type="hidden" name="houseWinner"><input type="hidden" name="housepositions"><input type="hidden" name="routedunits"><input type="hidden" name="Lannisterpos"><input type="hidden" name="trackid" value=0><input type="hidden" name="aphaseplayer">';if(a){message+='<input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+fjl()+')"></form>'}message+="</td></tr></table></center>";$("gameStateForm").innerHTML=message}function pmj(){var c=j_9(zp0_),b=j_9(qc_),a=qc_;if(bzm>cqq1||(cqq1==bzm&&b>c)){a=zp0_}if(sn_n()&&gxb()&&fjl()==10){var g=j6y0(),f=d0sg();if(hh7(g)&&hh7(f)){var e=knq+(d8dm()?0:r4hn),d=srf(e);if(d==qc_){a=qc_}else{if(d!="n"){a=zp0_}}}else{if(hh7(g)){a=zp0_}else{a=qc_}}}return a}function d8dm(){try{return fjl()>5?xzs1("attackingunits").length==3:xqm.length==3}catch(a){return 0}}function kt4(){try{return fjl()>5?xzs1("attackingunits").length==1:parseInt(xqm).vxn0(1,4)}catch(a){return 0}}function s7n(){var a=0,b=false;if(sn_n()){if(nlp4()==0){a++;b=qc_}if((kt4()&&rt1h(knq)==0)||(d8dm()&&__fb(knq)==0&&!zwp(knq))){a++;b=zp0_}if(a>1){b=false}}return b}var yxm9="";function bzfb(){var m=j6y0(),z=d0sg(),t=d8dm(),b="",k,r,x,h=0,s=s7n();yxm9="";kr9(true);if(s==qc_){r=qc_;x=zp0_;__hz(z,m);if(v_f()==zp0_){j2_1();document.revokeForm.elements[0].disabled=true;g03m();if(t){gs7(v1s);if(__fb(knq)==0){gs7(knq)}}else{gs7(v1s+r4hn);if(rt1h(knq)==0){gs7(knq+r4hn)}}cj30()}}else{if(s==zp0_){r=zp0_;x=qc_;__hz(m,z);if(v_f()==qc_){j2_1();ym_l(knq+(t?0:r4hn));g03m();gs7(v1s+(t?0:r4hn))}}else{if(pmj()==qc_&&hk_s()){var v=-1*jxb_(m),d=jxb_(z)-(v>0?v:0);k=_m_7(v1s,d);__hz(z,m);r=qc_;x=zp0_;if(v_f()==zp0_){j2_1();document.revokeForm.elements[0].disabled=true;g03m();gs7(v1s+(t?0:r4hn));if(t&&__fb(knq)==0){gs7(knq)}cj30()}__8(zp0_,v1s,v1s,k);_sf()}else{var l=knq,c=m,A=z,a=hk_s(),v,d;r=zp0_;x=qc_;if(!a&&zp0_!="S"){r=qc_;x=zp0_;l=v1s,c=z;A=m}v=-1*jxb_(A),d=jxb_(c)-(v>0?v:0);if(d>0){_m_7(l,d)}__hz(c,A);if((v_f()==x&&a)||(v_f()==r&&!a)){j2_1();if((!a&&x==zp0_&&nlp4()>n1q())||(t&&(__fb(knq)>hgv(knq)||(!a&&zwp(knq))))||(!t&&rt1h(knq)>0)){if(a){c501(847713)}else{bnj(knq+(t?0:r4hn),x,847713);v1s=-1}b=fc0(x)}h=b.length/3;if(h<1){ym_l(l)}else{if(h==1){var y=b.charAt(0)!="p"?b.substr(1,2):parseInt(b.substr(1,2),10)+lyw1;ym_l(y)}}g03m();if(cq6_()){var o=v1s+(t?0:r4hn),n=knq+(t?0:r4hn);tsz(r,o,n);if(b.length<4){kkwg("T")}}else{gs7(v1s+(t?0:r4hn))}}}}}wgf7(r);var p="";if(v_f()==r){p+=STR.BATTLE_RESULT_WIN}else{if(v_f()==x){p+=STR.BATTLE_RESULT_LOSE}else{var e=_y_(r);houseNameL=_y_(x);p+=STR.format(STR.BATTLE_RESULT_SPEC,[e,houseNameL])}}var w=j0x[0]+j0x[4]+hrhg.trooper,f=j0x[1]+j0x[5]+hrhg.knight,g=j0x[2]+j0x[6]+hrhg.siege,q=j0x[3]+j0x[7]+hrhg.ship;if(w+f+g+q>0){p+="\n\n"+STR.BATTLE_KILLED+":";if(w>0){p+="\n "+w+" "+STR.UNIT_FOOTMEN}if(f>0){p+="\n "+f+" "+STR.UNIT_KNIGHTS}if(g>0){p+="\n "+g+" "+STR.UNIT_SIEGES}if(q>0){p+="\n "+q+" "+STR.UNIT_SHIPS}}if(v_f()!=x&&h>0){p+="\n\n"+STR.BATTLE_RETREAT_SPEC}if(a&&v_f()==qc_&&v_f()==x){if(h>1){p+="\n\n"+STR.BATTLE_RETREAT_CHOOSE}else{if(h==1){var u=$(b.charAt(0)+b.substr(1,2).r_z()).title;p+="\n\n"+STR.format(STR.BATTLE_RETREAT_FORCE,[u])}else{p+="\n\n"+STR.BATTLE_NO_RETREAT}}}if(v_f()==zp0_||v_f()==qc_){jc0x(p+yxm9)}if(x=="S"&&[m,z].k81j("S7")&&[m,z].k81j("L1")){m6nk()}}function tsz(f,e,g){var d=xzs1("orders"+f),b=q0q(f),a;nw4(g,srf(g));for(var c=0;c<d.length;c+=3){if(e==parseInt(d.substr(c,2),10)){a=g+""+d.charAt(c+2);b+=sqz(a,3);for(var c=0;c<b.length;c+=3){if(e==parseInt(b.substr(c,2),10)){b=b.substr(0,c)+b.substr(c+3);break}}if(b!=d){bwxb(f,b)}break}}}function k5nx(a){yfn(a,false)}function yfn(e,c){if(zxk(e)){var b=xzs1("land").charAt(e*8),d=x59(e),a;jt3(d+r4hn+lyw1,0,0,3);if(!c&&(_qwp(d)==0||mdmy.charAt(e*8)!=b)){gs7(d+r4hn+lyw1)}}}function d0x(d){var c=fjl(),h=d.charAt(4),b=document.sendCardsForm,g="c_icon_"+h+d.charAt(5);t7vm=q56p(v_f());if((c==7||(c==8&&v_f()=="G"&&dqc.charAt(28)!=xzs1("cards").charAt(28)))&&document.sendCardsForm&&v_f()==h&&t7vm.substr(parseInt(d.charAt(5))-1,1)=="1"){var f=b.card.value.indexOf(d.substr(4,2));if(f>=0){$(g).className=_56(v_f(),1);b.card.value=b.card.value.substr(0,f)+""+b.card.value.substr(f+2,b.card.value.length)}else{if(!_1m_||b.card.value.length>=6){bzk();b.card.value=d.substr(4,2)}else{b.card.value+=d.substr(4,2)}$(g).className=_56(v_f(),2)}}else{if(qg0&&document.phaseAForm&&(c==11||(c==10&&lr96(v_f())>0))){var a=h2fw();t7vm=q56p(a);if(h==a&&t7vm.substr(parseInt(d.charAt(5))-1,1)=="1"){bzk();if(!$(g).className.k81j("used")){t7vm=t7vm.substr(0,parseInt(d.charAt(5))-1)+"0"+t7vm.substr(parseInt(d.charAt(5)));$(g).className=_56(a,2);document.phaseAForm.house.value=a;document.phaseAForm.cardstring.value=t7vm}}}else{if(qg0&&(c==10||(d.length<2&&d0bb()))){for(var e=1;e<8;e++){if($("usedCard"+e)&&$("usedCard"+e).className.k81j("select")){$("usedCard"+e).className=_56(v_f(),1)}}$("usedCard"+d).className=_56(v_f(),2);t7vm=t7vm.substr(0,parseInt(d,10)-1)+"1"+t7vm.substr(parseInt(d,10));b.card.value=d.substr(4,2)}}}}function h2fw(){return v_f()==zp0_?qc_:zp0_}function x_6(){var b=nnlv(),a=msgj();$("c_icon_"+lz0t(b)).className=_56(b,0);$("c_icon_"+lz0t(a)).className=_56(a,0)}function rww6(){var b=document.sendSupportForm;if(!b.elements[0].checked&&!b.elements[1].checked&&!b.elements[2].checked){jc0x(STR.BATTLE_SUPPORT_SELECT);return false}if(z_84>0&&_5fv(knq)&&b.supportstrland.value>3&&$("radioSupportDefender").checked){var a=pnzz(knq,v_f());b.supportstrland.value-=a*4}b.proceed.disabled=true;p170(b.proceed)}function k09h(){var a=fjl(),b=v_f();fObj=document.sendCardsForm;card=fObj.card.value;if((a==0||a==10)&&t7vm==q56p(b)&&t7vm.length==7&&t7vm!="1111111"){if(!confirm(STR.CNFM_NO_CARD)){return false}else{if(a==0){fObj.nocardconfirm.value="OK"}}}if(!_1m_&&(a==7||a==8)&&fObj.card.value.length!=2){jc0x(STR.BATTLE_HOUSE_CARD);return false}else{if(_1m_&&(a==7||a==8)&&fObj.card.value.length!=6){jc0x(STR.BATTLE_3HOUSE_CARDS);return false}else{try{fObj.proceed.disabled=true}catch(c){}if(a==7||a==8){fObj.house.value=b;if(_1m_){card=b+"0"}if(zp0_==v_f()){fObj.actor.value="attacker";bk9x("attackercard",card)}else{fObj.actor.value="defender";bk9x("defendercard",card)}}else{fObj.cardstring.value=t7vm;fObj.house.value=b;if(a!=10){p101()}fObj.houseposition.value=x__;x__+="x";kkb9()}}}return true}function d6_(){var k=fjl(),e=d8dm(),a=e?3:4,h=["FM","KT","SE","SP"],f=[mbj,x9v,z_84,_6t],g=[d7v(),lrg1(),n1q(),yvg()];for(var c=e?0:3;c<a;c++){if(g[c]>0){var d=wh7y(h[c]),l=h_n0*f[c];for(var b=0;b<l;b++){if(g[c]>0&&k<10&&d[b][6]&&d[b][4]==zp0_&&d[b][2]==v1s){mnv_(zp0_+h[c]+b,"_select");if(--g[c]==0){break}}}}}if(e){$("battleImg").style.left=_m_h[knq][6];$("battleImg").style.top=_m_h[knq][7]+4;$("attackerImg").style.left=_m_h[v1s][6];$("attackerImg").style.top=_m_h[v1s][7]+3}else{$("battleImg").style.left=f2l[knq][6];$("battleImg").style.top=f2l[knq][7]+4;if(v1s<lyw1){$("attackerImg").style.left=f2l[v1s][6];$("attackerImg").style.top=f2l[v1s][7]+3}else{$("attackerImg").style.left=brg[v1s-lyw1][0]-6;$("attackerImg").style.top=brg[v1s-lyw1][1]-32}}}function t93(n){w3d();var q=v_f(),o=document.finishBattleForm,k=hk_s(),d=_qf("T1"),g=!d&&s6b(),l=cq6_(),b=n==1||n==2;if(!n&&!d&&!g&&txsb.length/3>1){if(!k){jc0x(STR.BATTLE_RETREAT2)}else{if(v_f()==qc_){jc0x(STR.BATTLE_RETREAT)}}return false}else{if(n>1){if(b){if(!confirm(STR.CNFM_NO_BLADE)){xxy();return false}o.steelblade.value=2}else{if(!confirm(STR.CNFM_NO_TEXT_ABILITY)){var f=msgj()==q?d0sg():j6y0();q5_(f);return false}o.textability.value=2;qg0=false}}else{if(n){if(b){o.steelblade.value=1}else{o.textability.value=n;if(n=="G1"){dqc=dqc.q_fk(28,"0");bzk();dd0(0,7);document.sendCardsForm.house.value=q;document.sendCardsForm.textability.value=n;return false}else{if(n=="T1"){kkb9();var m=knq;if(kt4()){m+=r4hn}gk5p(m);j2_1();return false}else{if(n=="M1"){lr0_();return false}}}}}else{if(g&&o.trackid.value=="0"&&!confirm(STR.CNFM_NO_TEXT_ABILITY)){return false}else{if(!g){var a=d?h2fw():zp0_,p=q0q(a),c=xzs1("orders"+a);if(p==c||p.length>c.length){jc0x(d?STR.BATTLE_CARD_OLENNA:STR.ERR_ORDER_ATTACKER);return false}}}}}if(l&&q!="T"&&fl2g("T")&&!n&&!o.textability.value&&!_zb_(bky,[4,5,6],knq)){jc0x("ERROR: "+STR.ERR_CONTACT);return false}try{o.proceed.disabled=true;document.revokeForm.elements[0].disabled=true}catch(h){}o.ordersB.value=x9l;o.ordersL.value=mqy;o.ordersS.value=rc__;o.ordersT.value=bky;o.ordersG.value=vdq;if(h_n0==6){o.ordersM.value=r5t}o.land.value=mdmy;o.sea.value=zj9;o.ports.value=q_kx?_8n:"";o.house.value=q;o.houseWinner.value=pmj();o.housepositions.value=k1py(q1tm(q));o.routedunits.value=qny}mc4();if(n){o.submit()}}function d7f_(a){var h=$("eventDecks"),g=xzs1("altwphase")==1,f="<table cellpadding=0 cellspacing=0><tr>",e="carddeck";$("event-reminder-field").style.display="";if(a>0&&g){e="nextcard"}if(h75()>1&&xzs1("carddeck3")!="0"&&(g||xzs1(e+"1")=="0")){$("event-reminder-field").style.display="table-row";$("event-card-reminder").innerHTML=y1y("evt3:"+xzs1("carddeck3"))}for(var d=1;d<4;d++){f+="<th width=155>";var c=g||a==0?xzs1(e+d):"0",b=c!="0"?_c7b(d,c):"";className="event-deck"+(c!="0"?"":" event-deck-cover event-deck-cover"+d);f+='<table width=125 height=70 class="'+className+'" onmouseover="yt8z(this, \'evt'+d+":"+c+'\')" onmouseout="vg8()">';f+="<tr><th>"+b+"</th></tr></table>";f+="</th>"}h.innerHTML=f+"</tr></table>";h.style.left=145;h.style.top=15}function p101(){var e,f,d=h_n0<6?5:h_n0;nc2();if(!rxl.vxn0(1,3)){rxl=1}for(var c=0;c<d;c++){var b=c*6+rxl-1,a=0;while(d>a++){if(document.images["aof"+rxl+a].src.k81j("house"+___0[c])){break}}x__=x__.q_fk(b,a);f=xzs1("bid"+___0[c]);if(f>0){e=xdr[c][0]-f;jdq0(c,e)}}}function nvwc(){var b,c;c='<img src="./images/wildlings.png" width=22>';if(q89()){c='<img src="'+t3p(rxl)+'">'}b='<table class="box_extend box_game_state"><tr> <td width=50>'+c+"</td><th>"+STR.DLG_BID_TITLE+'</th><td width=50 align="right">'+c+'</td></tr> <tr><td colspan=3 align="center"><nobr>';for(var a=0;a<h_n0;a++){b+=' <img src="'+f8fr(___0[a])+'" width=11> <div id="'+___0[a]+'BidTokens">'+xdr[a][0]+"</div>&#160;"}b+=' </nobr></td></tr> <tr><th colspan=3>    <table width="75%" align="center"><tr>     <th align="left"><span style="cursor:pointer;color:red;font-size:48px" onclick="yyd0(-1)">&#9660;</span></th>     <th> <span style="font-size:36px"> <div id="yyd0">'+(dsqw<0?"?":dsqw)+'</div> </span> </th>     <th align="right"><span style="cursor:pointer;color:green;font-size:48px" onclick="yyd0(1)">&#9650;</span></th>    </tr></table> </th></tr></table>';$("leak_menu").innerHTML=b;yyd0(xzs1("mybid"),"SET");$("leak_menu").style.left=-1;$("leak_menu").style.top=rlz($("gameStateField"))-23}function ny4r(a){var e=document.images["aof"+rxl+a];if(tj4(v_f())&&xzs1("bidcount")>=h_n0&&e.src.k81j("empty")){for(j=1;j<=h_n0;j++){var d=document.images["AoFSel"+j],c=document.images["AoF"+j];if(cv2_[j-1]&&d.src.k81j("sword")){if(hxx2[j-1].k81j(a)){e.src=c.src;d.src="./images/blind.gif";c.src="./images/house_empty.gif";p170(e);p170(c);for(var b=1;b<=h_n0;b++){if(cv2_[b-1]&&!document.images["AoF"+b].src.k81j("empty")){document.images["AoFSel"+b].src="./images/sword_attacker.gif";break}}}else{jc0x(STR.EVT_CLASH_TIED)}break}}}}function y07d(a){if(!document.images["AoF"+a].src.k81j("house_empty.gif")){for(var b=1;b<=h_n0;b++){if(cv2_[b-1]){document.images["AoFSel"+b].src="./images/blind.gif"}}document.images["AoFSel"+a].src="./images/sword_attacker.gif"}}function gxd(){var k,c,f=0,h=[],g=[];for(var e=0;e<h_n0;e++){g[e]=[]}for(var d=0;d<h_n0;d++){if(cv2_[d]){k=xzs1("bid"+___0[d]);$("AoFBid"+(d+1)).innerHTML=k;g[f][0]=k;g[f++][1]=d}else{g.pop()}h[d]=false;if(document.images["aof"+rxl+(d+1)].src.k81j("empty")){h[d]=true}hxx2[d]=""}g.sort(xnz_);c=0;k=g[0][0];for(var e=0;e<g.length;e++){if(k==g[e][0]){while(!h[c++]){}for(var a=0;a<g.length;a++){if(g[a][0]==k){hxx2[g[a][1]]+=""+c}}}else{k=g[e--][0]}}}function ktp7(){var a="./images/sword_attacker.gif",c='<table class="box_extend box_aof"><tr><th colspan=3>'+STR.DLG_TIED_BIDS_TITLE+"</th></tr>";for(var b=1;b<=h_n0;b++){if(cv2_[b-1]){c+="<tr>";c+='<th><img id="AoFSel'+b+'" width="40" src="'+a+'"></th>';c+='<th><img id="AoF'+b+'" width="40" height="40" src="'+cv2_[b-1]+'" onclick="y07d('+b+')" style="cursor:pointer"></th>';c+='<th><div id="AoFBid'+b+'"></div></th>';c+="</tr>";a="./images/blind.gif"}}c+="</table>";$("leak_menu").innerHTML=c;$("leak_menu").style.left=-1;$("leak_menu").style.top=rlz($("AoFField"))-24;gxd()}function kqy(){var e,c=h_n0<6?5:h_n0,d=[];for(var b=0;b<c;b++){d[b]=[];d[b][0]=xzs1("bid"+___0[b]);d[b][1]=_mc(___0[b]);d[b][2]=b}d.sort(xnz_);if(rxl==1){document.images.aof11.src="./images/house_empty.gif"}for(var b=0;b<c;b++){document.images["aof"+rxl+(b+1)].src="./images/house_empty.gif";cv2_[d[b][2]]=false;if(d[b][0]>=0){for(var a=0;a<c;a++){if(b!=a&&d[b][0]==d[a][0]){e=true;cv2_[d[b][2]]=d[b][1];break}}}if(!cv2_[d[b][2]]){document.images["aof"+rxl+(b+1)].src=d[b][1]}}if(e&&tj4(v_f())){ktp7()}}function j_t(){var b=v_f();t7vm=q56p(b),availableCards=false,content='<table class="box_extend box_game_state"><tr><th colspan='+(t7vm.l30("0")+2)+">"+STR.DLG_SELECT_CARD+"</th></tr><tr><th></th>";for(var a=1;a<8;a++){if(t7vm.charAt(a-1)=="0"){content+='<td width=28><div id="usedCard'+a+'" class="mini'+ww2m+" card_"+b+'" style="cursor:pointer" onclick="d0x(\''+a+"')\" onmouseover=\"yt8z(this, 'card"+b+a+'\')" onmouseout="vg8()" /></td>';availableCards=true}}if(!availableCards){content+="<small><i>"+STR.DLG_SELECT_CARD_NONE+"</i></small>"}content+='<th></th></tr></table><form name="sendCardsForm" action="./setGameData.php?game='+yt_+"&crc="+mm52+'" target="setDataFrame" method="post"><input type="hidden" name="card"><input type="hidden" name="cardstring"><input type="hidden" name="nocardconfirm"><input type="hidden" name="house"><input type="hidden" name="houseposition">';if(fjl()==10){content+='<input type="hidden" name="type" value="'+lz0t(b)+'">'}content+="</form>";$("leak_menu").innerHTML=content;$("gameStateForm").innerHTML='<input class="button" type="button" onclick="if (k09h()){document.sendCardsForm.submit();$(\'gameStateForm\').innerHTML=\'\';}" value="'+STR.PROCEED+'">';$("leak_menu").style.left=-1;$("leak_menu").style.top=rlz($("gameStateField"))-23}function j8n(d,e){var c=String();c='<form name="wildlingHouseChoiceForm" action="./setGameData.php?housechoice='+e+"&game="+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return kkb9()" method="post"><table class="box_extend box_game_state"><tr><th colspan=2>'+STR.DLG_TIED_BIDS_TITLE+"</th></tr><tr><td colspan=2><small>";if(e==2){c+=STR.EVT_WILDLINGS_4MP}else{c+=STR.EVT_WILDLINGS_RETURN_CARD}c+=":</small></td></tr>";for(var a=0;a<h_n0;a++){var b=___0[a];if(d[0]==xzs1("bid"+b)){c+='<tr><th style="padding-right:8px;height:18px;width:35%;" align="right"><img src="'+_mc(b)+'" height=16></th><td><input style="cursor:pointer" type="radio" name="house" value="'+b+'" id="radio'+b+'"><small><label for="radio'+b+'" style="cursor:pointer">'+_y_(b)+"</label></small></td></tr>"}}c+="</table></form>";$("leak_menu").innerHTML=c;document.wildlingHouseChoiceForm.elements[0].checked=true;$("gameStateForm").innerHTML='<input class="button" type="button" onclick="document.wildlingHouseChoiceForm.submit();$(\'gameStateForm\').innerHTML=\'\'" name="proceed" value="'+STR.PROCEED+'">';$("leak_menu").style.left=-1;$("leak_menu").style.top=rlz($("gameStateField"))-23}function dy_(){var a=shs0();if(y59k()>=f01s()){a.sort(p4hx);cv2_=a;if(a[0]==a[1]&&!xzs1("ordersall")){if(tj4(v_f())){j8n(a,1)}return 1}return 0}else{a.sort();cv2_=a;if(a[0]==a[1]&&!xzs1("ordersall")){if(tj4(v_f())){j8n(a,2)}return 2}return -1}}function yyd0(c,a){var b=q1tm(v_f());if(a=="SET"){if(c>=0&&c<=xdr[b][0]){dsqw=c;xdr[b][0]=jn8(b)-dsqw}else{return}}else{if(c>0&&xdr[b][0]>0){if(++dsqw>0){xdr[b][0]--}}else{if(c<0&&dsqw>0){dsqw--;xdr[b][0]++}else{return}}document.eventForm.bidvalue.value=dsqw}$("yyd0").innerHTML=dsqw;$(v_f()+"BidTokens").innerHTML=xdr[b][0]}function hdyb(e,d,b){var g=0,a;switch(d){case"power":a=4;break;case"castle":a=5;break;case"stronghold":a=5;break;case"winPoints":a=5;break;case"barrel":a=6;break;case"crown":a=7;break;default:return 0}for(var c=0;c<r4hn;c++){if(x8pq(c)==e){var f=ztd(c,a);if(f>1){if(d=="castle"||d=="power"){continue}else{if(d=="stronghold"||d=="winPoints"){f--}}}else{if(d=="stronghold"){continue}}g+=f}}if(g>6&&d=="barrel"){return 6}return g}function r1fr(){var b=v_f(),a=q1tm(b)*6+3,c=hdyb(b,"barrel");x__=xzs1("houses").q_fk(a,c);tyd(c)}function jm0y(c){var b,d=0;for(var a=0;a<_8n.length;a++){b=hj_(a);if(_qwp(a)>0&&_p7k(a)==c&&(d6v8(b)==c||d6v8(b)=="n")){d++}}return d}function fjnq(){var b,c=h_n0<5?5:h_n0;x__=xzs1("houses");for(var a=0;a<c;a++){b=hdyb(___0[a],"crown");if(q_kx){b+=jm0y(___0[a])}if(xdr[a][0]+xdr[a][1]+b>zh0){b=zh0-(xdr[a][0]+xdr[a][1])}jdq0(a,b+xdr[a][0])}}function s0p(l){var k=fjl(),a=v_f(),m="";for(var f=0;f<r4hn;f++){var h=sqz(f,2),b;if((k==0&&_5fv(f)&&x8pq(f)==a)||(k==5&&h==l)){m+="l"+h;b=xsbp[f].match(/.{1,3}/g);while(b.length>0){var d=b.pop(),c=d.charAt(0);if(c=="s"){var e=d.substr(1).r_z(),g=d6v8(e);if(g=="n"||g==a){m=m.replace(d,"")+d}}else{if(c=="p"){m+=d}}}}}txsb=m;pds_(m)}function jj5h(c){var a=gtg8.length;gtg8[a]=[];gtg8[a]["land"]=mdmy;gtg8[a]["sea"]=zj9;gtg8[a]["ports"]=_8n;gtg8[a]["mpoints"]=new Array();for(var b=0;b<8;b++){gtg8[a].mpoints[b]=new Array();gtg8[a].mpoints[b][0]=f4z[b][0];gtg8[a].mpoints[b][1]=f4z[b][1]}if(fjl()==5&&f4z[c][1]==0){gs7(k89)}rbp()}function yrc(b){var a=-1;while(++a<8){if(f4z[a][0]==b){return a}}return -1}function l0j(){while(gtg8.length>0){gtg8.pop()}for(var a=0;a<8;a++){f4z[a][1]=0}l_6()}function wqh(c){var b=0;l0j();for(var a=0;a<r4hn;a++){if(b<8&&x8pq(a)==c&&_5fv(a)){f4z[b][0]=a;f4z[b++][1]=hkwf(a)}}}function sqc(){for(var a=0;a<8;a++){if(f4z[a][1]>0&&qf0(f4z[a][0])){return false}}return true}function qf0(m){var c=yrc(m),a=v_f(),b=qlh(a)<mbj,n=skv_(a)<x9v,p=hctz(a)<z_84,o=p0j(a)<_6t;if(c<0||f4z[c][1]<=0){return false}var q,k=mdmy,h=_mgq(m);if(h>0&&(n||p)){return true}else{if(b){wm0(m,1);q=lrmm(mdmy,zj9,_8n,null,false);mdmy=k;if(q){return true}}else{if(f4z[c][1]>=2&&(n||p)){h5b_(m,1);q=lrmm(mdmy,zj9,_8n,null,false);mdmy=k;if(q){return true}}}}if(o){var l=xsbp[m];k=zj9;for(var g=1;g<l.length;g+=3){if(l.charAt(g-1)!="s"){continue}var d=l.substr(g,2).r_z(),e=d6v8(d);if(e=="n"){return true}else{if(e==a){__j7(d,a);qk5p(d,1);q=lrmm(mdmy,zj9,_8n,null,false);zj9=k;if(q){return true}}}}k=_8n;var f=-1;while(q_kx&&++f<j_d){if(m==j1zn(f)){__3c(f,1);q=lrmm(mdmy,zj9,_8n,null,false);_8n=k;if(q){return true}}}}return false}function fd_(){var a=true;if(txsb.length>0&&!mckv()){if(!confirm(STR.CNFM_NO_NEW_UNITS)){return false}a=false}if(a&&!sqc()&&!confirm(STR.CNFM_NOT_ALL_MP)){return false}if(a&&!lrmm(mdmy,zj9,_8n)){jc0x(STR.EVT_MUSTER_LOW_SUPPLY);return false}document.eventForm.proceed.disabled=true;document.revokeForm.elements[0].disabled=true;document.eventForm.land.value=mdmy;document.eventForm.sea.value=zj9;document.eventForm.ports.value=q_kx?_8n:"";q1_h();txsb="";g03m();l0j()}function _t9(){var c=document.eventForm;c.proceed.disabled=true;if(q89()){for(var a=1;a<=h_n0;a++){if(document.images["aof"+rxl+a].src.k81j("empty")){jc0x(STR.EVT_CLASH_EMPTY_SLOTS);c.proceed.disabled=false;return false}}p101()}if(mn5l()||d0bb()){if(!lrmm(mdmy,zj9,_8n)){n_yy();jc0x(STR.EVT_SUPPLY_INFO);c.proceed.disabled=false;return false}else{var b=v_f();if(d0bb()){if(__p>0&&(qlh(b)>0||skv_(b)>0||hctz(b)>0||p0j(b)>0)){jc0x(STR.EVT_SUPPLY_NOT_READY);c.proceed.disabled=false;return false}}else{c.positions.value=k1py(q1tm(b));n_yy()}g03m();if(mckv()){document.revokeForm.elements[0].disabled=true;c.land.value=mdmy;c.sea.value=zj9;c.ports.value=q_kx?_8n:""}}}else{c.proceed.disabled=true;c.Baratheon.value=k1py(0);c.Lannister.value=k1py(1);c.Stark.value=k1py(2);c.Tyrell.value=k1py(3);c.Greyjoy.value=k1py(4);if(h_n0>5){c.Martell.value=k1py(5)}x__=""}}function j3s(a){var b=document.eventForm;if(qg0&&a){w3d();b.eventChoice.value=a;b.eventDeck.value=jwk();b.submit()}}function z865(){var a=document.eventForm;a.proceed.disabled=true;if((q89()||d0bb())){var b=parseInt(a.bidvalue.value,10);if(dsqw<0){a.proceed.disabled=false;jc0x(STR.BID_MISSING);return false}else{if(dsqw==xzs1("mybid")){nc2();dd0(h75(),fjl());jc0x(STR.format(STR.BID_ALREADY,[dsqw]));z7k();return false}else{if(!b||b<=0){if(!confirm(STR.CNFM_NO_BID)){a.proceed.disabled=false;return false}else{a.bidvalue.value="0confirmed"}}}}}}function p2v(){var a=STR.DLG_SWITCH_TITLE+"<br /><br />";a+="<i>"+STR.DLG_SWITCH+"</i><br />"+STR.CNFM_PBEM_SWITCH+"<br />";a+='<div onclick="zr1()">'+STR.YES+"</div>";a+='<div onclick="w3d()">'+STR.NO+"</div>";wgb0(a)}function qj9c(d,b){var c='<table width=125 cellspacing=0 cellpadding=0 class="requestwindow">';for(var a=1;a<b.length;a+=3){c+='<tr onclick="n0cx('+d+","+(parseInt(b.substr(a,2),10))+')"><td onmouseover="style.backgroundColor=\'#FFFFFF\'" onmouseout="style.backgroundColor=\'\'" style="cursor:pointer">&#160;&raquo;<small>&#160;'+_yjt(b.substr(a,2),"l")+"</small></td> </tr>"}c+="</table>";yg_(c,d<5?25:f2l[d][0]-50,f2l[d][1]+40)}function zr1(){wgb0("processing...");b0xz("set=switchmode",g943)}function g943(a){w3d();document.images.pbemSwitchImg.style.display="none"}function _pz(a){try{var b=JSON.parse(a);$("nText").innerHTML=b.notes}catch(c){jc0x(STR.ERR_NOTES_LOADING);w3d()}}function b3_(){var a=fjl();if(a>5){if(parseInt($("actionWindow").style.left)>0){kkb9()}else{tyd(a)}}}function _m0k(){if(parseInt($("playerMessageDialog").style.left)>0){w3d();return}$("playerMessageContent").innerHTML='<form name="notesForm" action="./setGameData.php?updateNotes=1&game='+yt_+"&crc="+mm52+'" target="setDataFrame" method="post"><table class="notes"><tr><td width=19></td><td>'+STR.DLG_NOTES_TITLE+'</td><td width=19><img id="xNotes" src="./images/x0.gif" border=0 style="cursor:pointer" onmouseover="document.images[\'xNotes\'].src=\'./images/x1.gif\'" onmouseout="document.images[\'xNotes\'].src=\'./images/x0.gif\'" onclick="w3d()"></td></tr><tr><td colspan="3"><textarea id="nText" name="notes" rows=18 cols=32 maxlength=1024>Loading...</textarea></td></tr><tr><td colspan="3" align="center"><input type="submit" value="'+STR.UPDATE+'"></td></tr></table></form>';r8w();nwb("get=GAMENOTES",_pz)}function r8w(){$("playerMessageDialog").style.left=($("mainTable").offsetWidth-$("playerMessageContent").offsetWidth)/2;$("playerMessageDialog").style.top=(screen.height/2)-200}function vp3(b){var c=_y_(b),a="<br /><br /><small>";if(v_f()==b){a=STR.GAME_OVER_WIN+a+STR.format(STR.GAME_OVER_TXT,[c])}else{a=STR.GAME_OVER_DEFEAT+a+STR.format(STR.GAME_OVER_TXT_NAME,[c,"<nobr>"+wyv(b)+"</nobr>"])}a+='</small><br /><div onclick="w3d()">'+STR.OK+"</div>";if(yt_%7<2){a+='<br /><br /><hr><small><i>If you enjoy playing, please consider a <a title="More information here!" href="https://www.thronemaster.net/?goto=donation">donation</a> to support our project. Thank you!</i><br /><br /></small><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="55MNTVAV7G2R4"><input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_SM.gif" border=0 name="submit" alt="Donate" title="Your donation is much appreciated!"></form>'}sg0_(a)}function z89x(){var f=[],e=0,d='<table width=180 cellspacing=5 class="actionwindow overlay_shadow dlg_battle" style="background-image:url('+rf0j.src+'); background-image:repeat;"><tr><th colspan=3>'+STR.DLG_MENU_BIDS+"</th></tr>";for(var b=0;b<h_n0;b++){var c=___0[b];if(_y9(c)){f[e]=[];f[e][0]=xzs1("bid"+c);f[e][1]=_y_(c);f[e][2]=f8fr(c);e++}}f.sort(hyj_);while(f.length>0){var a=f.pop();d+='<tr><td align="right" width="30%"><img src="'+a[2]+'" width="11"></td><th><small>'+a[0]+"</small></th><td><small>"+a[1]+"</small></td></tr>"}d+='<td colspan="3"><table align="center" style="cursor:pointer" onclick="w3d()" onmouseover="style.backgroundColor=\'#EEFFEE\'" onmouseout="style.backgroundColor=\'\'" class="actionwindow"><tr><th>'+STR.O_K+"</th></tr></table> </td></tr></table>";$("playerMessageContent").innerHTML=d;if(!tj4(v_f())){kkb9()}r8w();_jjv(STR.DLG_MENU_BIDS)}function bq1m(b){if(!j8q(b)){var a="<b>"+STR.MARCH_AREA_CONTROL+"</b><br /><br />"+STR.format(STR.CNFM_INVEST_PT,[_yjt(b,"l")])+'<br /><div onclick="wgl('+b+')">'+STR.YES+'</div><div onclick="w3d(),_cjj('+b+')">'+STR.NO+"</div>";sg0_(a)}}function fgl(b){if(!j8q(b)){var a="<b>"+STR.MARCH_NO_POWER+"</b><br /><br />"+STR.format(STR.MARCH_NO_POWER_TXT,[_yjt(b,"l")])+'<br /><div onclick="w3d()">'+STR.OK+"</div>";sg0_(a)}}function xxy(){var a="<b>"+STR.BATTLE_STEELBLADE+"</b><br /><br />"+(!gxb()||c2ts==2?STR.CNFM_BLADE:STR.CNFM_BLADE_TOB)+'<br /><div onclick="t93(1)">'+STR.YES+'</div><div onclick="t93(2)">'+STR.NO+"</div>";sg0_(a,"xxy()")}function q5_(a){var b="<b>"+STR.BATTLE_CARD_ABILITY_TITLE+"</b><br /><br />"+STR.CNFM_TEXT_ABILITY+"<br /><div onclick=\"t93('"+a+"')\">"+STR.YES+'</div><div onclick="t93(3)">'+STR.NO+"</div>";sg0_(b)}function dxh(a){$("playerMessageContent").innerHTML='<div class="box-alert-minified" onclick="'+a+'">></div>';$("playerMessageDialog").style.left=285;$("playerMessageDialog").style.top=(screen.height/2)-200}function gppp(){var a=jwk(),b=[[2,1],[2,1],[6,12]],c="<b>"+_z_p(a,lv3())+"</b><br /><br />"+STR.EVT_CHOICE_TEXT+'<br /><div style="width:150px" onclick="j3s(\'A\')">a) '+_z_p(a,b[a-1][0])+'</div><div style="width:150px" onclick="j3s(\'B\')">b) '+_z_p(a,b[a-1][1])+'</div><div style="width:150px" onclick="j3s(\'C\')">c) '+STR.EVT_CHOICE_C+"</div>";sg0_(c,"gppp()")}function sg0_(b,c){var a='<div class="box-alert">'+b;if(c){a+='<div class="box-minifier" onclick="dxh(\''+c+"')\"><</div>"}a+="</div>";$("playerMessageContent").innerHTML=a;r8w()}function wgb0(a){$("playerMessageContent").innerHTML='<div class="box-alert box_admin">'+a+"</div>";r8w()}function rbp(){if(__h()||fjl()==5){var c=0,m="";for(var e=0;e<8;e++){var n=f4z[e][1];if(n>0){++c;var k=f4z[e][0];var f=hkwf(k);var a=f-n;var h=f==2;var d=h?"stronghold":"city";var l=STR.format(h?STR.DLG_MAIN_NFO_CASTLE:STR.DLG_MAIN_NFO_CITY,[f]);m+='<tr><td valign="bottom"><img width=35 height=19 src="./images/'+d+'.gif" title="'+l+'"></td>';m+="<td>"+_yjt(k,"l")+":</td><td>"+a+"/"+f+" "+STR.EVT_MUSTER_POINTS_USED;if(!qf0(k)){m+=" ("+STR.EVT_MUSTER_NOT_POSSIBLE+")"}m+="</td></tr>"}}if(c==0){m="<tr><td>"+STR.DLG_MUSTER_NO_POINTS+"</tr></td>"}var b='<div onclick="sm5()" class="box-minifier">&lt;</div>';var g='<div class="dlg-muster"><table><tbody>'+m+"</tbody></table>"+b+"</div>";$("musteringDlgContent").innerHTML=g;$("musteringDialog").style.display="block"}}function sm5(){var a='<img width=35 height=19 src="./images/city.gif">';var b='<table><tbody><tr><td valign="bottom">'+a+"</td></tr></tbody></table>";$("musteringDlgContent").innerHTML='<div class="dlg-muster-minified" onclick="rbp()">'+b+"</div>"}function kwjj(){if(t0_x){try{new Audio("./sounds/turn-pedantic.mp3").play()}catch(a){console.log("No Audio / HTML5")}}}function nsyf(){var a=STR.ALRT_TURN;_jjv(STR.ALRT_TURN+" ("+xzs1("lastaction")+")");kwjj();if(fjl()==1){a="<b>"+STR.PHASE_TITLE_PLANNING.toUpperCase()+"</b><br /><br />"+STR.PLAN_SET_ORDERS}a+='<br /><div onclick="w3d()">'+STR.OK+"</div>";sg0_(a)}function tyd(v){var h=fjl(),s="",b=0,m=0;if(h==0){s+='<table border=0 cellspacing="8" class="actionwindow" style="background-image:url('+rf0j.src+'); background-image:repeat;"><tr><th>'+STR.format(STR.EVT_SUPPLY_NEW,["<big>"+v+"</big>"])+'</th></tr><tr><td align="center"><table style="cursor:pointer" onclick="kkb9(), _t9()" onmouseover="style.backgroundColor=\'#EEEEEE\'" onmouseout="style.backgroundColor=\'\'" class="actionwindow"><tr><th>'+STR.O_K+"</th></tr></table></td></tr></table>"}else{if(h>=6){var f=kt4()?"s":"l",o=h>6?j6y0():"",w=h>6?d0sg():"",x=nt2(),l=sq1v(),r=t__(x),d=t__(l),q=yyn(knq,zp0_),e=yyn(knq,qc_),c=r8x(knq,zp0_),n=r8x(knq,qc_),p=xzs1("attackersupport"),a=xzs1("defendersupport"),t=_k9q(zp0_),g=_k9q(qc_),k=bzm,u=cqq1;if(h>8&&xzs1("steelbladeused")==1){if(xz80(zp0_)){m=1}else{b=1}}if(h==7){k+=t;u+=g}s+='<table><tr><td rowspan=2 valign="top" width=195><div class="card_container_battle"><div class="card_base '+ww2m+zp0_+" card"+(o.length!=2?'00">':o.charAt(1)+'">')+"</div>"+(h>7&&gxb()?'<div class="'+y9jk(x)+'"></div>':"")+'</div></td><td valign="top"><table cellpadding=5 class="actionwindow overlay_shadow dlg_battle" style="background-image:url(\''+rf0j.src+'\'); background-repeat:repeat;"><tr><th><img src="'+n2tb.src+'"></th><th>&#160;'+STR.format(STR.BATTLE_STR_TITLE,[_yjt(knq,f)])+'&#160;</th><th><img src="'+n2tb.src+'"></th></tr><tr><td colspan=3 align="center"><table width="100%"><tr><td valign="top"><small><i>'+_y_(zp0_)+'</i></small>  <table class="inneractionwindow" cellspadding=0 style="background-image:url(\'./images/bg_'+zp0_+".gif');\">   <tr><td><nobr>"+STR.BATTLE_STR_BASE+":</nobr></td><th>"+(k-r-rf36-m-q-c-p-t)+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_LAND+":</td><th>"+q+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_SEA+":</td><th>"+c+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_NEUTRAL+":</td><th>"+p+"</th></tr>"+(h>7&&gxb()?"   <tr><td>"+STR.BATTLE_STR_TOB+':</td><th valign="top">'+(h<8?"-":r)+"</th></tr>":"")+'   <tr><td style="font-size:15px"><b>'+STR.BATTLE_STR_TOTAL+':</b></td><th style="font-size:18px">'+k+'</th></tr>  </table> </td><td valign="top">&#160;</td> <td align="right" valign="top"><small><i>'+_y_(qc_)+'</i></small>  <table class="inneractionwindow" cellspadding=0 style="background-image:url(\'./images/bg_'+qc_+".gif');\">   <tr><td><nobr>"+STR.BATTLE_STR_BASE+":</nobr></td><th>"+(u-d-r_pg-b-e-n-a-g)+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_LAND+":</td><th>"+e+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_SEA+":</td><th>"+n+"</th></tr>   <tr><td>"+STR.BATTLE_STR_SUPPORT_NEUTRAL+":</td><th>"+a+"</th></tr>"+(h>7&&gxb()?"   <tr><td>"+STR.BATTLE_STR_TOB+':</td><th valign="top">'+(h<8?"-":d)+"</th></tr>":"")+'   <tr><td style="font-size:15px"><b>'+STR.BATTLE_STR_TOTAL+':</b></td><th style="font-size:18px">'+u+'</th></tr>  </table> </td></tr></table><small onclick="kkb9()" style="line-height:20px;cursor:pointer"><u>'+STR.PLAN_DLG_CLOSE+'</u></small></td></tr></table></td><td rowspan=2 valign="top" align="right" width=195><div class="card_container_battle"><div class="card_base '+ww2m+qc_+" card"+(w.length!=2?'00">':w.charAt(1)+'">')+"</div>"+(h>7&&gxb()?'<div class="'+y9jk(l)+'"></div>':"")+"</td>";if(m||b){s+='<tr><th height=75><img src="./images/sword_'+(m?"attacker":"defender")+'.gif"></th>'}s+="</tr></table>"}}$("actionWindowContent").innerHTML=s;if(parseInt($("actionWindow").style.left)<0){$("actionWindow").style.left=($("mainTable").offsetWidth-$("actionWindow").offsetWidth)/2;$("actionWindow").style.top=document.body.scrollTop+(screen.height/2)-245}}function x5x(){var b=chat.domObj;if(b.style.left!="-500"){var a=document.body.scrollTop+25;b.style.top=a}}function yg_(a,c,b){$("map_menu").style.left=c;$("map_menu").style.top=b;$("map_menu").innerHTML=a;$("map_menu").style.display=""}function ckr(){$("map_menu").style.display="none"}function mc4(){l2g("leak_menu")}function kkb9(){l2g("actionWindow");if(fjl()<8){mc4()}}function l_6(){$("musteringDialog").style.display="none";$("musteringDlgContent").innerHTML=""}function w3d(){$("playerMessageContent").innerHTML="";l2g("playerMessageDialog")}function f0x(){$("connerror").style.display="";$("connerror").innerHTML="<span>CONNECTION<br>ERROR</span>"}function gt0(){$("connerror").style.display="none"}function m6nk(){var a=$("whereuheaded");if(a.className!="spike"){hnv($("whereuheaded"),"spike")}}function yg2(){var a=$("whereuheaded");if(a.className=="spike"){spy(a,"unspike")}}function _f40(){this.x=587;this.y=document.body.scrollTop+30;this.doAlert=true;this.offsetX;this.offsetY;this.modeDrag=false;this.notify=false;this.history=[];this.histIndex=0;this.lastEntryId=0;this.heightDiff;this.domObj;this.domObjHdr;this.domObjMain;this.domObjContent;this.domInput;this.classHdrDefault="chat_hdr chat_hdr_pulse";this.classHdrBlink="chat_hdr chatblink";this.classDefault="chatframe";this.classMove="chatframe chatopacity";try{this.audioNewMessage=new Audio("./sounds/com-channel.mp3")}catch(a){console.log("No Audio / HTML5")}}function d6r0(){var a=document.chatSendForm.chat,b=a.value;if(typeof String._xt=="function"){b=b._xt()}a.focus();a.value="";chat.history.push(b);chat.histIndex=chat.history.length;b0xz("set=chat&lce="+chat.lastEntryId+"&value="+encodeURIComponent(b),l_kx)}function _mp(a){var b;a=window.event||a;b=a.charCode||a.keyCode;if(b==38&&chat.histIndex>0){chat.domInput.value=chat.history[--chat.histIndex]}else{if(b==40){if(chat.histIndex<chat.history.length-1){chat.domInput.value=chat.history[++chat.histIndex]}else{chat.domInput.value="";chat.histIndex=chat.history.length}}}}function cbsr(){chat=new _f40();chat.domObj=$("chatWindow");chat.domObjHdr=$("chatWindowHdr");chat.domObjMain=$("chatMain");chat.domObjContent=$("chatContent");chat.domInput=$("chatInput");if(chat.domObj.addEventListener){chat.domObjHdr.addEventListener("mousedown",sjfc,false);chat.domObjHdr.addEventListener("mouseup",_t6,false);chat.domObjHdr.addEventListener("dblclick",ntc,false);if(chat.domInput){chat.domInput.addEventListener("keydown",_mp,false)}}else{chat.domObjHdr.onmousedown=sjfc;chat.domObjHdr.onmouseup=_t6;chat.domObjHdr.ondblclick=ntc;if(chat.domInput){chat.domInput.onkeydown=_mp}}document.onmousemove=b58r;dt_()}function p_p(a){chat.domObjContent.innerHTML+=b71(a);nv8t()}function b71(c){if(c.k81j("<img src=")){var b="https://www.thronemaster.net/images/avatars/";for(var a=0;a<h_n0;a++){c=c.split('<img src="_avt_'+___0[a]).join('<img src="'+b+rmw[a])}}return c}function nv8t(){chat.domObjContent.scrollTop=chat.domObjContent.scrollHeight}function vkc(c){if(c.length==1&&c[0].length>0){jc0x(c[0])}else{if(c.length==4){var b=parseInt(c[2]);if(c[3].length>0){if(b>chat.lastEntryId){var a=chat.lastEntryId>0;p_p(c[3]);chat.lastEntryId=b;if(a){if(c[3].k81j("has been kicked")){qg0=false;yq8()}if(parseInt(c[0])>0){_r84()}}}}if(chat.doAlert&&parseInt(c[1])>0){chat.doAlert=false;jc0x(STR.format(STR.CHAT_PM,[c[1]]))}}}}function _r84(){_jjv(STR.CHAT_NEW_TITLE+" ("+chat.lastEntryId+")");if(t0_x){try{chat.audioNewMessage.currentTime=0.39;chat.audioNewMessage.play()}catch(a){}}if(chat.modeDrag){chat.notify=true}else{if(chat.domObj.style.display=="none"){llkk("");if(xzs1("g-pbem")&&!qg0){yq8()}}_th(1800)}}function _th(a){if(a>0){if(a%900==0){chat.domObjHdr.className=chat.classHdrBlink}else{chat.domObjHdr.className=chat.classHdrDefault}a-=450;window.setTimeout(_th,450,a)}else{chat.domObjHdr.className=chat.classHdrDefault}}function sjfc(){chat.modeDrag=true;chat.offsetX=wgs-chat.domObj.offsetLeft;chat.offsetY=_zx-chat.domObj.offsetTop}function _t6(){chat.modeDrag=false;chat.domObj.className=chat.classDefault;if(chat.notify){chat.notify=false;window.setTimeout(_r84,500)}}function b58r(a){wgs=document.all?window.event.clientX:a.pageX;_zx=document.all?window.event.clientY:a.pageY;if(chat.modeDrag){if(chat.domObj.className!=chat.classMove){chat.domObj.className=chat.classMove}chat.x=wgs-chat.offsetX;chat.y=_zx-chat.offsetY;chat.domObj.style.left=chat.x+"px";chat.domObj.style.top=chat.y+"px"}}function llkk(a){chat.domObj.style.left=chat.x;chat.domObj.style.top=chat.y;chat.domObj.style.display="";chat.domObjMain.style.display="";if(!wf_||a){if(v_f()){chat.domInput.focus();chat.domInput.value=a}}nv8t()}function h86k(){try{if(chat.domObj.style.display!="none"){ww0()}else{llkk("")}}catch(a){jc0x(STR.CHAT_INIT_FAILED+"\n"+a)}}function ntc(){if(chat.domObjMain.style.display!="none"){chat.domObjMain.style.display="none";chat.x=chat.domObj.style.left;chat.y=chat.domObj.style.top;chat.domObj.style.left=window.innerWidth-chat.domObj.scrollWidth-50;chat.domObj.style.top=window.innerHeight-chat.domObj.scrollHeight-25}else{chat.domObj.style.left=chat.x;chat.domObj.style.top=chat.y;chat.domObjMain.style.display=""}_t6()}function sm3(){return chat&&chat.domObj&&chat.domObj.style.display!="none"}function sl_7(){return chat&&chat.domObjMain&&chat.domObjMain.style.display=="none"}function ww0(){chat.domObj.style.display="none";_t6()}function jc0x(a){if(v_f()){alert(a)}}function dt_(){nwb("get=CHAT&lce="+chat.lastEntryId,l_kx)}function yq8(){nwb("get=GAMEALL&lce="+chat.lastEntryId+"&crc="+mm52+"&lga="+wh_,l_kx)}function l_kx(c){try{var b=JSON.parse(c),f=b.error.r_z(),a="";__x.setTime(b.time)}catch(d){alert("Unexpected error while retrieving data from __x!")}if(isNaN(f)||f>0){alert("WARNING: Possible connection problem!")}else{if(b.setup.length>0){yhcg(b.setup)}if(b.data.length>0){yhcg(b.data);_ty5()}if(b.chat.length>0){vkc(b.chat)}if(b.logs.length>0){c1_(b.logs)}if(b.online.length>0){wyp(b.online)}if(b.stats.length>0){t8j_(b.stats)}}}function c1_(b){var c=$("stats_action"),d="";if(c.innerHTML.mlh("<img")){c.innerHTML=""}for(var a=0;a<b.length;a++){d+="&#10151; "+b[a]+"<br />"}c.innerHTML=d+c.innerHTML}function k__h(){mmrz();z7k();qg0=false;kkc5();yq8()}function ffwd(a,b){switch(a){case"ffrfrsh":k__h();break;case"ffshtcht":ww0();break;case"ffclstp":vg8();break;case"ffchngmg":mnv_(b[0],b[1]);break;case"ffswtchpbm":p2v();break;case"fftltp":yt8z(b[0],b[1]);break;case"ffhghhs":_0q2(b[0],b[1]);break;case"ffhghll":sz1();break;case"ffhghlnd":_0wc(b[0],b[1],b[2]);break;case"ffhghs":jpfv(b[0],b[1],b[2]);break;case"ffhvrf":wgg(b[0],b[1]);break;case"ffrdhvr":_z3f(b[0],b[1]);break;case"ffmncht":ntc();break;case"ffrmnt":pvy6(b[0],b[1],b[2]);break;case"ffrmrdr":gs7(b[0]);break;case"ffstf":ny4r(b[0]);break;case"ffstr":qbgq(b[0],b[1]);break;case"ffslctcrd":d0x(b[0]);break;case"ffslctmg":tl4q(b[0]);break;case"ffslrdr":ltz(b[0]);break;case"ffhghnst":kz5c();break;case"ffpgrd":wx0(b[0],b[1]);break;case"ffchtmt":d6r0();break;case"ffsnd":v_kg();break;case"ffnts":_m0k();break;case"ffchtbx":h86k();break;case"ffcht":llkk(b[0]);break;default:break}}function _ldm(){var f=xzs1("cfg-tbrkr"),g=ww6(),c='<table border=0 width="98%" align="center" style="font-size:small"><tr><td width=15 align="center">&#8896;</td><td><b>'+STR.PLAYER+"</b></td><th>C</th><th>S</th><th>P</th><th>T</th></tr>";for(var a=0;a<h_n0;a++){var b=g[a].house;if(_y9(b)){c+='<tr><td><img src="./images/house'+b+'.gif" style="height:15px;vertical-align:bottom;border:0px;"></td><td>'+wyv(b)+"</td><th>";try{if(f&&((a>0&&g[a].cities==g[a-1].cities)||g[a].cities==g[a+1].cities)){c+=g[a].strong+"+"+g[a].castle}else{throw 1}}catch(d){c+=g[a].cities}c+='</th><td align="center">'+g[a].supply+'</td><td align="center">'+g[a].power+'</td><td align="center">'+g[a].throneTrack+"</td></tr>"}}$("stats_ladder").innerHTML=c+"</table>"}function t8j_(e){var h=xzs1("g-pbem")?"min":"sec",c=e.length,g='<table border=0 width="98%" align="center" style="font-size:small">';for(var f=0;f<c;f++){var k=e[f].split(","),a=k[0],d=k[1],b=k[2];g+="<tr><td width=15>"+(wyv(a)?'<img src="./images/house'+a+'.gif" style="height:15px;vertical-align:bottom;border:0px;"> ':"")+'</td><td width="55%">'+wyv(a)+'</td><td class="avg_speed '+(f+1==c?" overline000":"")+'">'+d+" "+h+" / "+b+"</td></tr>"}$("stats_speed").innerHTML=g+"</table>"}function w4d_(){if(qg0||xzs1("g-pbem")&&(!mvn||!sm3())){dt_()}else{yq8()}}function qvyb(){$("dlg_main_win_txt").innerHTML=STR.format(STR.DLG_MAIN_WIN_TXT,["<b>"+w_w3()+"</b>"])}function c8m(){qvyb();$("dlg_main_aof").innerHTML=STR.DLG_MAIN_AOF;$("dlg_track_1").innerHTML="&#160;"+STR.TRACK_THRONE;$("dlg_track_2").innerHTML="&#160;"+STR.TRACK_FIEFDOMS;$("dlg_track_3").innerHTML="&#160;"+STR.TRACK_COURT;$("dlg_main_supply").innerHTML=STR.DLG_MAIN_SUPPLY;$("dlg_main_status").innerHTML=STR.DLG_MAIN_STATUS;$("dlg_main_houses").innerHTML=STR.DLG_MAIN_HOUSES;$("dlg_main_ladder").innerHTML=STR.DLG_MAIN_LADDER;$("dlg_main_speed").innerHTML=STR.DLG_MAIN_SPEED;$("dlg_main_action").innerHTML=STR.DLG_MAIN_ACTION;$("menu_reload").innerHTML=STR.MENU_RELOAD;$("menu_review").innerHTML=STR.MENU_REVIEW;$("menu_log").innerHTML=STR.MENU_LOG;$("menu_sound").innerHTML=$("menu_sound").innerHTML.replace("Sound:ON",STR.MENU_SOUND+":"+STR.ON);$("menu_sound").innerHTML=$("menu_sound").innerHTML.replace("Sound:OFF",STR.MENU_SOUND+":"+STR.OFF);$("menu_chat").innerHTML=STR.MENU_CHAT;try{$("chatSubmitButton").value=STR.SUBMIT;$("menu_notes").innerHTML=STR.MENU_NOTES;$("pbemSwitchImg").title=STR.DLG_MENU_SWITCH_TITLE}catch(b){}for(var a=0;a<6;a++){try{$("dlg_main_nfo_castle"+a).title=STR.format(STR.DLG_MAIN_NFO_CASTLE,[2]);$("dlg_main_nfo_city"+a).title=STR.format(STR.DLG_MAIN_NFO_CITY,[1]);$("dlg_main_nfo_knight"+a).title=STR.format(STR.DLG_MAIN_NFO_KNIGHT,[2]);$("dlg_main_nfo_footmen"+a).title=STR.format(STR.DLG_MAIN_NFO_FOOTMEN,[1]);$("dlg_main_nfo_ship"+a).title=STR.format(STR.DLG_MAIN_NFO_SHIP,[1]);if(!$("onlineStatus"+___0[a])){$("dlg_main_housename"+___0[a]).innerHTML=_y_(___0[a])}$("dlg_main_usr_profile"+a).title=STR.DLG_MAIN_USR_PROFILE;if(v_f()){var c=$("dlg_main_usr_whisper"+a).title.replace("Whisper to ","");$("dlg_main_usr_whisper"+a).title=STR.format(STR.DLG_MAIN_USR_WHISPER,[c])}}catch(b){}}$("battleImg").firstChild.title=STR.BATTLE_TITLE_AREA;$("attackerImg").firstChild.title=STR.BATTLE_TITLE_FLAG}function v_kg(){t0_x=!t0_x;$("menu_sound").innerHTML=STR.MENU_SOUND+":"+(t0_x?STR.ON:STR.OFF);nwb("audio="+(t0_x?"ON":"OFF"),null)}function wyp(f){var b=f[0],d=parseInt(f[1]),a="",h="";$("watchers").style.display="";if(d>0){$("watchers").style.display="table-row";$("watchers_text").innerHTML=d+" "+(d>1?"users are":"user is")+" currently watching"}for(var c=0;c<h_n0;c++){switch(parseInt(b.charAt(c))){case 1:a="";h="/ "+STR.ONLINE;break;default:a="#96A";h="/ "+STR.OFFLINE;break}try{$("onlineStatus"+___0[c]).style.color=a;$("onlineStatus"+___0[c]).innerHTML=h}catch(g){}}}function yhcg(d){for(var c=0;c<d.length;c++){var e=d[c].split(","),f=e[0]=="1",b=e[1],a=e[2],g=f?a.r_z():a;bk9x(b,g)}}function _ty5(){if(hq2){if(mm52!=xzs1("crc")){k9d()}}else{y4t9()}}function _jjv(a){document.title=_jtq+" - "+a}function mmrz(){document.title=_jtq}function _wrs(){var b=h75(),a=f01s(),c='<div class="head-info head-info-main"><div>'+b+'</div><div class="head-info-turn" title="'+STR.format(STR.TURNS,[b,vfz4])+'"></div><div>'+a+'</div><div class="head-info-wild" title="'+STR.WILDLINGS+'" : "'+a+'"></div></div>';$("gameStateContent").innerHTML=c}function stt5(b){var e,c,a;if(b<1440){c=Math.floor(b/60);a=Math.round(b-(c*60));return sqz(c,2)+":"+sqz(a,2)}else{if(b>14400){e=Math.floor(b/(24*60));return(e+"<small> days</small>")}else{e=Math.floor(b/(24*60));c=Math.round((b-(e*24*60))/60);return e+"<small>d, </small>"+c+"<small>h</small>"}}}function s4w(a){$("playTimeContent").innerHTML='<div class="head-info head-info-time">'+stt5(a)+"</div>";return setTimeout(s4w,60000,++a)}function z6kp(){$("playTime").style.left=5;$("playTime").style.top=5;return s4w((xzs1("lastaction")-d5h2)/60)}function nrh(b,a){b=z70(b);if(!a){a=q0q()}for(var c=0;c<a.length;c+=3){if(b==a.charAt(c+2)){return true}}return false}function _vn(){var h=fjl(),a,g=-1;if(wvk6){for(var f=0;f<h_n0;f++){if(___0[f]==wvk6){g=_85j(f);break}}}if(h==0){if(wwp()){var l=[0,2,1],b=l[jwk()-1];a=h65(b);if(!_y9(a)){a=x5v(b)}return a}else{for(var d=0;d<h_n0;d++){a=khz_(++g);if(_y9(a)){break}}}}else{if(h>2&&h<6){var c,e=klw0(h);for(var d=0;d<h_n0;d++){if(++g>=h_n0){g=0}a=khz_(g);c=q0q(a);if(_y9(a)&&_zb_(c,e,false)){if(h==5){var k=hg_w("F",c);if(k>=r4hn||!_5fv(k)){continue}}break}}}}return a}function k9d(){var f=false,a;mm52=xzs1("crc");hmf=xzs1("lastaction");wh_=xzs1("lastactionid");kdd8();if(hq2!=xzs1("gamestate")){hq2=xzs1("gamestate");if(fjl()==1){sc7()}_wrs();f=true}a=fjl();if(a>7||a!=wwf){f=true}if(a<6&&wwf>5){cxj();g03m();rn_w()}if(wvk6!=xzs1("lasthouse")){wvk6=xzs1("lasthouse")}if(z7g!=xzs1("carddeck1")||l6p!=xzs1("carddeck2")||mhz!=xzs1("carddeck3")){z7g=xzs1("carddeck1");l6p=xzs1("carddeck2");mhz=xzs1("carddeck3");d7f_(a)}if(a==0&&rxl!=xzs1("bidarea")){rxl=xzs1("bidarea");f=true}if(x__!=xzs1("houses")){x__=xzs1("houses");l82();n_yy();nc2()}if(c2ts!=xzs1("steelblade")||l9ng!=xzs1("stolentokens")){c2ts=xzs1("steelblade");l9ng=xzs1("stolentokens");gd3()}if(qny!=xzs1("routedunits")){qny=xzs1("routedunits");if(a<2){_sf()}}if(mdmy!=xzs1("land")){mdmy=xzs1("land");z1jx();nc2()}if(zj9!=xzs1("sea")||_8n!=xzs1("port")){if(q_kx){_8n=xzs1("port")}zj9=xzs1("sea");k520()}for(var b=0;b<h_n0;b++){var d=___0[b],h=q0q(d),c=xzs1("orders"+d);if(h!=c&&(a==0||c.length%3==0)&&(a!=1||wwf!=1||d!=v_f())){bwxb(___0[b],c);kkwg(d)}}if(dqc!=xzs1("cards")){dqc=xzs1("cards");bzk();if(q56p("S").charAt(6)=="1"){yg2()}}_ldm();try{clearTimeout(jsq_)}catch(g){}jsq_=z6kp();if(!f&&[0,3,4,5].k81j(a)){if(a>0||(!q89()&&!d0bb())){f=true}else{if(xzs1("bidcount")>=h_n0){tcb()}}}if(f){dd0(h75(),a);wwf=a}else{if(a==7&&parseInt($("actionWindow").style.left)>0){tyd(a)}}}function dd0(m,o){var h="",p="",c,b;$("gameStateText").innerHTML="";$("gameStateForm").innerHTML="";$("menue").innerHTML="";if(o>=6){$("menue").innerHTML='<small>&#160;<a href="javascript:b3_()">'+STR.DLG_MENU_BATTLE+"</a> |</small>"}if(o==0){var n=jwk(),e=lv3();qg0=false;if(wwf>=8){g03m();g6t();kkb9()}if(n=="3"){if(l6p==1){nc2()}else{if(l6p==2){l82()}}}else{if(z7g==1){z1jx();k520()}}h="<b><i>"+STR.PHASE_TITLE_EVENTS+": ("+STR.EVT_DECK+" "+n+")</i></b><br /><small><b>"+_z_p(n,e)+":</b><br />"+STR.format(z3zr(n,e),[f01s()]);tcb()}else{if(o==1){var a=v_f();qg0=false;h="<b><i>"+STR.PHASE_TITLE_PLANNING+": (1)</i></b>";if(_y9(a)){if(wwf>1){d7f_(1);lrmm(mdmy,zj9,_8n)}if(qlh(a)>0||skv_(a)>0||hctz(a)>0||p0j(a)>0){h+="<small><br />"+STR.PLAN_STATUS+"<br />"+STR.PLAN_PROCEED;ykl(a);p='<form name="sendOrdersForm" action="./setGameData.php?game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return t22m()" method="post"><input type="hidden" name="orders" value="null"><input type="hidden" name="house"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'">&#160;&#160;&#160;<input class="button" type="'+(m==1?"button":"hidden")+'" onclick="pcw(v_f())" value="'+STR.ORDER_ADVICE+'"></form>';nsyf();x0_n();r59f()}else{h+="<small><br />"+STR.PLAN_STATUS0+"<br /><br /><br /><br /><center><b>"+STR.STATUS_WAITING+"</b></center>"}}else{h+="<small><br />"+STR.PLAN_STATUS_SPEC}}else{if(o==2){kkwg();h="<b><i>"+STR.PHASE_TITLE_PLANNING+": (3)</i></b><small><br />"+STR.RAVEN_STATUS+"<br />";if(_y9(v_f())&&_g8(v_f())){qg0=true;nsyf();x0_n();r59f();_hh=q0q();h+="<b>"+STR.RAVEN_STATUS1+"</b><br />"+STR.RAVEN_STATUS2+"<br />"+STR.PLAN_PROCEED;p='<form name="sendOrdersForm" action="./setGameData.php?raven=1&game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return t22m()" method="post"><input type="hidden" name="orders" value="null"><input type="hidden" name="house"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+o+')"></form>'}else{h+=STR.RAVEN_STATUS_SPEC;p=STR.RAVEN_STATUS_WAITING}}else{if(o.vxn0(3,5)){n_xv="";if(wwf>=8){_5_(4);kkb9()}q1_h();if(m==vfz4&&o==5&&xzs1("ordersall")==""){cm_h()}else{if(!_qq3()){_hh=q0q();h="<b><i>"+STR.PHASE_TITLE_ACTION+": ("+(o-2)+")</i></b><small><br /><b>";if(o==3){h+=STR.PHASE_ACTION_RAID+":</b><br />"+STR.RAID_STATUS}else{if(o==4){kkwg();h+=STR.PHASE_ACTION_MARCH+":</b><br />"+STR.MARCH_STATUS}else{if(o==5){h+=STR.PHASE_ACTION_CP+":</b><br />"+STR.CP_STATUS}}}tcb()}}}else{if(o>=6){var g=fjl();if(o==6){g03m()}d_4();if(g>=8){bzm+=_k9q(zp0_);cqq1+=_k9q(qc_);y9bq(j6y0(),d0sg());if(yjy()){wr0()}}if(o<10||(o==10&&fl2g(v_f()))){d6_()}h="<b><i>"+STR.PHASE_ACTION_BATTLE+": ("+(o-5)+")</i></b><small><br /><b>";if(o==6){h+=STR.BATTLE_SUPPORT_STATUS+":</b><br />"+STR.BATTLE_SUPPORT_STATUS_SPEC;if(d8dm()){scrollTo(0,_m_h[knq][7]-(screen.height/2))}else{scrollTo(0,f2l[knq][7]-(screen.height/2))}p=STR.BATTLE_SUPPORT_WAITING;if(zp0_==v_f()||qc_==v_f()){g6t();tyd(o)}else{if(_y9(v_f())&&(r8x(knq,v_f())>0||(d8dm()&&yyn(knq,v_f())>0))){nsyf();c=yyn(knq,v_f());b=r8x(knq,v_f());h+="<br />"+STR.BATTLE_SUPPORT_STATUS1;p='<form name="sendSupportForm" action="./setGameData.php?game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return rww6()" method="post"><center><table><tr><td colspan=2><input style="cursor:pointer" type="radio" name="support" value=0><small> <b>'+STR.BATTLE_SUPPORT_DEFAULT+'</b></small></td></tr><tr><td><input style="cursor:pointer" type="radio" name="support" value="attacker"><small> <b>'+_y_(zp0_)+'</b></small></td><td><input style="cursor:pointer" type="radio" name="support" id="radioSupportDefender" value="defender"><small> <b>'+_y_(qc_)+'</b></small></td></tr><tr><th colspan=2><input type="hidden" name="house" value="'+v_f()+'"><input type="hidden" name="supportstrland" value="'+c+'"><input type="hidden" name="supportstrsea" value="'+b+'"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></th></tr></table></center> </form>'}}}else{if(o==7){h+=STR.BATTLE_CARD_STATUS+":</b><br />";h+=_1m_?STR.BATTLE_CARDS_STATUS1:STR.BATTLE_CARD_STATUS1;if((zp0_==v_f()||qc_==v_f())&&((j6y0()+d0sg()).length<4||v_f()!="L")){t7vm=q56p(v_f());if(o!=g||(!_1m_&&t7vm.l30("1")>1)||(_1m_&&t7vm.l30("1")>3)){if(o==g){nsyf()}h+="<br />"+STR.BATTLE_CARD_STATUS2;p+='<form name="sendCardsForm" action="./setGameData.php?&game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return k09h()" method="post"><input type="hidden" name="card" value=""><input type="hidden" name="actor"><input type="hidden" name="house"><input type="hidden" name="textability"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'">'}else{p=STR.BATTLE_CARD_STATUS0+"<br />"+STR.BATTLE_CARD_WAITING}tyd(o)}else{p=STR.BATTLE_CARD_WAITING}}else{if(o==8||o==9){var d,l,a;tyd(o);if(z2_f()){d="L3";l=STR.HOUSE_L}else{if(_qf("G1")){d="G1";l=STR.HOUSE_G}else{if(_qf("T1")){d="T1";l=STR.HOUSE_T}else{if(_qf("M1")){d="M1";l=STR.HOUSE_M}}}}if(d&&l){a=d.charAt(0);h+=STR.BATTLE_CARDS_CHOSEN+":</b><br />"+STR.format(STR.BATTLE_CARD_TEXT_ABILITY,[l]);if(v_f()==a){qg0=true;kr9(d!="G1"?true:false);q5_(d)}else{p=STR.format(STR.STATUS_WAITING_NAME,[wyv(a)])}}else{if(wzw()){kr9(false);h+=STR.BATTLE_CARDS_CHOSEN+":</b><br />"+STR.BATTLE_BLADE_STATUS;if(xz80(v_f())&&(v_f()==zp0_||v_f()==qc_)){qg0=true;xxy()}else{l=xz80(zp0_)?zp0_:qc_;p=STR.format(STR.STATUS_WAITING_NAME,[wyv(l)])}}else{h+=STR.BATTLE_RESULT+":</b><br />"+STR.BATTLE_RESULT_STATUS;bzfb()}}}else{if(o==10){var f=pmj(),k=lz0t(f);if(v_f()==f){qg0=true;nsyf();_5_(o);h+=STR.BATTLE_CARD1+":</b><br />"+STR.BATTLE_CARD2;p='<form name="phaseAForm" action="./setGameData.php?sendorders=1&game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return sr_q()" method="post"><input type="hidden" name="ordersB"><input type="hidden" name="ordersL"><input type="hidden" name="ordersS"><input type="hidden" name="ordersT"><input type="hidden" name="ordersG"><input type="hidden" name="ordersM"><input type="hidden" name="land"><input type="hidden" name="routedunits"><input type="hidden" name="house"><input type="hidden" name="housepositions"><input type="hidden" name="cardstring"><input type="hidden" name="type" value="'+k+'"><input type="hidden" name="stolentokens"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+o+')"></form>'}else{h+=STR.BATTLE_CARD1+":</b><br />"+STR.BATTLE_CARD3;p=STR.format(STR.STATUS_WAITING_NAME,[wyv(f)])}h+=" '<i>"+STR[k61t()+"_"+k]+"</i>'<br />";if(k=="S1"){p=""}}else{if(o==11){var k="B1";if(v_f()=="B"){qg0=true;nsyf();h+=STR.BATTLE_CARD1+":</b><br />"+STR.BATTLE_CARD2;p='<form name="phaseAForm" action="./setGameData.php?game='+yt_+"&crc="+mm52+'" target="setDataFrame" onsubmit="return fv_9()" method="post"><input type="hidden" name="house"><input type="hidden" name="cardstring"><input type="hidden" name="type" value="'+k+'"><input class="button" type="submit" name="proceed" value="'+STR.PROCEED+'"></form>&#160;&#160;&#160;<form name="revokeForm"><input class="button" type="button" value="'+STR.REVOKE+'" onclick="_5_('+o+')"></form>'}else{h+=STR.BATTLE_CARD1+":</b><br />"+STR.BATTLE_CARD3;p=STR.format(STR.STATUS_WAITING_NAME,[wyv("B")])}h+=" '<i>"+STR["BATTLE_CARD2_"+k]+"</i>'<br />"}}}}}}}}}}if($("gameStateText").innerHTML==""){$("gameStateText").innerHTML=h+"</small>"}if($("gameStateForm").innerHTML==""){$("gameStateForm").innerHTML=p}}function z7k(){qg0=false;$("gameStateForm").innerHTML=STR.STATUS_WAITING;if(q89()||d0bb()){kkb9()}else{if(__0()){$("gameStateText").innerHTML="<b><i>"+STR.PHASE_TITLE_PLANNING+": (2)</i></b><br /><small>"+STR.PLAN_STATUS1+"</small>"}}}function _5_(b){var f=mn5l(),a=!f&&__h(),e=!f&&!a&&d0bb(),c,g;kz5c();if(b>2||f||e){mdmy=xzs1("land");zj9=xzs1("sea");_8n=xzs1("port");qny=xzs1("routedunits");nc2()}else{if(a){if(gtg8.length>1){c=gtg8.length-2;gtg8.pop();mdmy=gtg8[c].land;zj9=gtg8[c].sea;_8n=gtg8[c].ports;for(var d=0;d<8;d++){f4z[d][0]=gtg8[c].mpoints[d][0];f4z[d][1]=gtg8[c].mpoints[d][1]}}else{mdmy=xzs1("land");zj9=xzs1("sea");_8n=xzs1("port");wqh(v_f())}}}g03m();z1jx();k520();lrmm(mdmy,zj9,_8n);n_xv="";g6t();kf06();rn_w();if(a){ckr();kkb9();y59();rbp();q1_h();pds_(txsb)}else{if(f||e){__p=1;if(e){if(q0q()=="1"||(cv2_[0]==xzs1("bid"+v_f())&&x9l!="1"&&mqy!="1"&&rc__!="1"&&bky!="1"&&vdq!="1"&&r5t!="1")){__p=4}else{__p=2}}}else{if(q89()){l82();kqy()}else{if(b==2){r59f()}else{if(b==3){py73(1,3);ldf()}else{if(b==4){vg8();w3d();cxj();q1_h();f76();ldf();py73(4,6);_9q5=false}else{if(b==5){ckr();l_6();kkb9();py73(13,15);q1_h()}else{if(b==8||b==9){_sf();x__=xzs1("houses");dd0(1,b)}else{if(b>=10){if(document.phaseAForm){document.phaseAForm.cardstring.value=""}bzk();if(b==10){g=lz0t(v_f());_n6(g)}}}}}}}}}}if(b!=10){k89=-1}n_h=0};